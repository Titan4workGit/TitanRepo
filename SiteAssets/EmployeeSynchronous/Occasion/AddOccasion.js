var a281_0x5747c8=a281_0x55e9;(function(_0x107625,_0x286559){var _0x1d8aee=a281_0x55e9,_0x3b1e09=_0x107625();while(!![]){try{var _0x471a8a=parseInt(_0x1d8aee(0x111))/0x1+parseInt(_0x1d8aee(0x127))/0x2+-parseInt(_0x1d8aee(0x14e))/0x3+-parseInt(_0x1d8aee(0x176))/0x4+-parseInt(_0x1d8aee(0x13f))/0x5*(parseInt(_0x1d8aee(0x158))/0x6)+parseInt(_0x1d8aee(0x14a))/0x7+parseInt(_0x1d8aee(0x11b))/0x8*(parseInt(_0x1d8aee(0x15f))/0x9);if(_0x471a8a===_0x286559)break;else _0x3b1e09['push'](_0x3b1e09['shift']());}catch(_0x170364){_0x3b1e09['push'](_0x3b1e09['shift']());}}}(a281_0xefce,0x23da6));var currentCompanyid='',getCurrentCompanySiteURL='';$(document)[a281_0x5747c8(0x13d)](function(){var _0x4b358f=a281_0x5747c8;currentCompanyid=titanForWork['getQueryStringParameter'](_0x4b358f(0x117));var _0x47bceb=new Array();_0x47bceb[_0x4b358f(0x116)](_0x4b358f(0x147));var _0xcdc364=UserExistInProcessApprover(currentCompanyid,'',_0x47bceb);for(var _0x10f7da=0x0;_0x10f7da<_0xcdc364['length'];_0x10f7da++){if(_0xcdc364[_0x10f7da]['webPartName']=='Occasion')$(_0x4b358f(0x12d))['show']();else{}}$(_0x4b358f(0x12d))['is'](_0x4b358f(0x121))==![]&&$('#messageNotAthorizedAcces')[_0x4b358f(0x166)](_0x4b358f(0x10e));$(_0x4b358f(0x112))[_0x4b358f(0x12f)]({'changeMonth':!![],'changeYear':!![],'yearRange':_0x4b358f(0x123)}),$(_0x4b358f(0x112))[_0x4b358f(0x12f)](_0x4b358f(0x129),_0x4b358f(0x138),_0x4b358f(0x149));currentCompanyid!=null&&currentCompanyid!=''&&(currentCompanyid[_0x4b358f(0x11a)]('#')!=-0x1&&(currentCompanyid=currentCompanyid[_0x4b358f(0x134)]('#')[0x0]),currentCompanyid=currentCompanyid);GetCompanyEmployees(currentCompanyid,'BindDropDown'),$(_0x4b358f(0x150))[_0x4b358f(0x165)](function(){var _0x18bbae=_0x4b358f;GetCompanyEmployees($(this)[_0x18bbae(0x12e)](),'LoadProfile');}),$(_0x4b358f(0x177))[_0x4b358f(0x12a)](function(){AddOccasion();}),$(_0x4b358f(0x152))[_0x4b358f(0x12a)](function(){redirectCancel();});var _0x5296ef=titanForWork[_0x4b358f(0x12c)]('itemId'),_0x20bd09=GetSiteUrl();getCurrentCompanySiteURL=_0x20bd09,BindOccasiontype(),_0x5296ef!=''&&_0x5296ef!=null&&LoadOccasions(getCurrentCompanySiteURL,_0x5296ef);});function BindOccasiontype(){var _0x2f9510=a281_0x5747c8;$['ajax']({'url':_spPageContextInfo['webAbsoluteUrl']+'/_api/web/lists/getbytitle(\x27OccasionMaster\x27)/items?$select=OccasionDefault,OccasionLang1,OccasionLang2,OccasionLang3,OccasionLang4,OccasionLang5,OccasionLang6,OccasionLang7,OccasionLang8,OccasionLang9,OccasionLang10','type':_0x2f9510(0x11c),'async':![],'headers':{'accept':_0x2f9510(0x175)},'success':function(_0x1424ca){var _0x52bae2=_0x2f9510,_0xb3cbcb=_0x1424ca['d'][_0x52bae2(0x14f)];for(var _0x30eaba=0x0;_0x30eaba<_0xb3cbcb[_0x52bae2(0x167)];_0x30eaba++){var _0x56bc23=_0xb3cbcb[_0x30eaba][_0x52bae2(0x169)],_0x5f2ba1=_0xb3cbcb[_0x30eaba][_0x52bae2(0x11e)];$(_0x52bae2(0x16e))['append']($(_0x52bae2(0x15e))[_0x52bae2(0x15c)]('value',_0x56bc23)[_0x52bae2(0x166)](_0x5f2ba1));}},'error':function(_0x2a0ba2){var _0x468eb8=_0x2f9510;alert(JSON[_0x468eb8(0x14c)](_0x2a0ba2));}});}function GetDateStandardFormat(_0x157640){var _0x132b48=a281_0x5747c8,_0x2136f3=ConvertDateFormatToddMMyyyy(_0x157640),_0x6bfe02=new Date(_0x2136f3),_0x51622a=0x3c*0x3c*0x18*0x3e8,_0x4d4f4b=new Date(_0x6bfe02[_0x132b48(0x15b)]()),_0x4204f9=_0x4d4f4b[_0x132b48(0x170)]();return _0x4204f9;}function ConvertDateFormatToddMMyyyy(_0x18d6aa){var _0x5371f2=a281_0x5747c8,_0x5648eb=stringToDate(_0x18d6aa,_0x5371f2(0x17a),'/');return _0x5648eb;}function a281_0xefce(){var _0x3b90ab=['Email','ready','#spanemplyeePeopleId','44150sPYVga','Department','promise','charAt','log','append','done','BindDropDown','Occasion','#spanEmailId','dd/mm/yy','844438TsRwpe','sourcelocation','stringify','ID,LogonName/Title,LogonName/UserName,CompanyId&$expand=LogonName&$filter=CompanyId\x20eq\x20\x27','541344IciCSz','results','#ddlemployee','webAbsoluteUrl','#btncancel','\x27)/GetItemById(\x27','OccasionDetails','Occasion\x20has\x20been\x20updated\x20successfully.','OccasionType','/_api/web/lists/getbytitle(\x27Employees\x27)/items?$select=','54xNSrvF','Title','ListItem','getTime','attr','Designation','<option></option>','1832616IdDKFx','Department\x20:\x20','yyyy','when','ajax','resolve','change','text','length','Occasion\x20is\x20already\x20added\x20for\x20this\x20date\x20and\x20employee.','OccasionDefault','OccasionDate','Deferred','SiteURL','toLowerCase','#ddlOccasionType','show','toISOString','#spandesination','empty','Company','\x27)/items','application/json;odata=verbose','1102972bbMWgu','#btnsubmit','\x27\x20and\x20Status\x20eq\x20\x27Active\x27','href','dd/MM/yyyy','You\x20are\x20not\x20authorized\x20to\x20access\x20this\x20page.','hide','ID,JoiningDate,DateOfAnniversary,FullName,DateOfBirth,LogonName/Title,LogonName/ID,LogonName/UserName,OfficeLocation/OfficeName,Email,Department/DepartmentName,Designation,Company/CompanyName,Company/ID,Manager,MobileNumber&$expand=LogonName,Company,Department,OfficeLocation&$filter=ID\x20eq\x20\x27','1271QCaFAx','#occasiondate','UserName','\x27\x20and\x20OccasionType\x20eq\x20\x27','&undefinedstr=undefinedstr','push','CompanyId','&$filter=OccasionDate\x20eq\x20\x27','SP.Data.','indexOf','16hLXpKN','GET','Please\x20select\x20employee.','OccasionLang1','itemId','LogonName',':visible','<option\x20value=\x220\x22>-Select\x20Employee-</option>','-1:+0','/_api/web/lists/getbytitle(\x27','toUpperCase','#spanarea','306724dfDikD','Occasion\x20has\x20been\x20added\x20successfully.','option','click','\x27\x20and\x20UserNameId\x20eq\x20\x27','getQueryStringParameter','#newOccasionbx','val','datepicker','DepartmentName','&DepartmentId=','error','LoadProfile','split','reject','EmployeeId','CompanyName','dateFormat','#spandepartment','Please\x20select\x20Occasion\x20Date.','value'];a281_0xefce=function(){return _0x3b90ab;};return a281_0xefce();}function stringToDate(_0x4e1d24,_0x5e6775,_0x2f16a9){var _0x2adf9c=a281_0x5747c8,_0x2bab64=_0x5e6775[_0x2adf9c(0x16d)](),_0x1fe38f=_0x2bab64[_0x2adf9c(0x134)](_0x2f16a9),_0x424221=_0x4e1d24[_0x2adf9c(0x134)](_0x2f16a9),_0x5f3a86=_0x1fe38f[_0x2adf9c(0x11a)]('mm'),_0xa9d133=_0x1fe38f[_0x2adf9c(0x11a)]('dd'),_0x62bee6=_0x1fe38f[_0x2adf9c(0x11a)](_0x2adf9c(0x161)),_0x10db48=parseInt(_0x424221[_0x5f3a86]);_0x10db48-=0x1;var _0x1dcea8=new Date(_0x424221[_0x62bee6],_0x10db48,_0x424221[_0xa9d133]);return _0x1dcea8;}function AddOccasion(){var _0x29e9b2=a281_0x5747c8,_0x191468=$(_0x29e9b2(0x150))['val']();if(_0x191468!=0x0){var _0x55c734=$(_0x29e9b2(0x16e))[_0x29e9b2(0x12e)](),_0x2f21ad='';if($('#occasiondate')[_0x29e9b2(0x12e)]()==''||$(_0x29e9b2(0x112))['val']()==null){alert(_0x29e9b2(0x13a));return;}else _0x2f21ad=GetDateStandardFormat($(_0x29e9b2(0x112))[_0x29e9b2(0x12e)]());if(_0x2f21ad==''||_0x2f21ad==null){alert(_0x29e9b2(0x13a));return;}else{var _0xb1163e=titanForWork[_0x29e9b2(0x12c)](_0x29e9b2(0x11f)),_0x2f1bd8=$(_0x29e9b2(0x13e))[_0x29e9b2(0x12e)]();_0xb1163e==''||_0xb1163e==null?ValidateUserIsAlreadyExistthisOccasion(_0x55c734,_0x2f21ad,_0x2f1bd8,'')==!![]?AddNewOccasionDetails(_0x191468,_0x55c734,_0x2f21ad,_0x2f1bd8,_0xb1163e):alert(_0x29e9b2(0x168)):ValidateUserIsAlreadyExistthisOccasion(_0x55c734,_0x2f21ad,_0x2f1bd8,_0xb1163e)==!![]?AddNewOccasionDetails(_0x191468,_0x55c734,_0x2f21ad,_0x2f1bd8,_0xb1163e):alert(_0x29e9b2(0x168));}}else alert(_0x29e9b2(0x11d));}function GetSiteUrl(){var _0x54edbe=a281_0x5747c8,_0x48a678='',_0x10e9dc='';return _0x48a678=_spPageContextInfo[_0x54edbe(0x151)]+'/_api/web/lists/getbytitle(\x27Companies\x27)/items?$select=ID,SiteURL&$filter=ID\x20eq\x20\x27'+currentCompanyid+'\x27',$['ajax']({'url':_0x48a678,'headers':{'Accept':_0x54edbe(0x175)},'async':![],'success':function(_0x5a19d3){var _0x1b3777=_0x54edbe,_0x28a448=_0x5a19d3['d'][_0x1b3777(0x14f)];_0x28a448[_0x1b3777(0x167)]>0x0&&(_0x10e9dc=_0x28a448[0x0][_0x1b3777(0x16c)]);},'eror':function(_0x28704c){var _0x13a451=_0x54edbe;console[_0x13a451(0x143)](_0x13a451(0x132));}}),_0x10e9dc;}function LoadOccasions(_0x175cdf,_0x5bc548){var _0x42e6e1=a281_0x5747c8,_0xdc79fc=_0x175cdf+'/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$filter=ID\x20eq\x20\x27'+_0x5bc548+'\x27';$[_0x42e6e1(0x163)]({'url':_0xdc79fc,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x43a9cf){var _0x31ba5f=_0x42e6e1,_0x4f1a87=_0x43a9cf['d'][_0x31ba5f(0x14f)];if(_0x4f1a87[_0x31ba5f(0x167)]>0x0){$(_0x31ba5f(0x150))[_0x31ba5f(0x12e)](_0x4f1a87[0x0][_0x31ba5f(0x136)]);var _0x5aa912=new Date(_0x4f1a87[0x0][_0x31ba5f(0x16a)]),_0x590d09='';_0x590d09=$[_0x31ba5f(0x12f)]['formatDate'](_0x31ba5f(0x149),_0x5aa912),$(_0x31ba5f(0x112))[_0x31ba5f(0x12e)](_0x590d09),$(_0x31ba5f(0x16e))[_0x31ba5f(0x12e)](_0x4f1a87[0x0][_0x31ba5f(0x156)]),GetCompanyEmployees(_0x4f1a87[0x0][_0x31ba5f(0x136)],_0x31ba5f(0x133));}},'eror':function(_0xbed3be){var _0x5ee80a=_0x42e6e1;console[_0x5ee80a(0x143)](_0x5ee80a(0x132));}});}function a281_0x55e9(_0x11d1d9,_0x1a5077){var _0xefce05=a281_0xefce();return a281_0x55e9=function(_0x55e905,_0x2f2c7f){_0x55e905=_0x55e905-0x10e;var _0x1e30ae=_0xefce05[_0x55e905];return _0x1e30ae;},a281_0x55e9(_0x11d1d9,_0x1a5077);}function AddNewOccasionDetails(_0x55a582,_0x256499,_0x456749,_0x35e688,_0x439d3a){var _0xb06788=a281_0x5747c8,_0x1f199b=getCurrentCompanySiteURL,_0x97017c=_0xb06788(0x154),_0x2c0ae8=GetItemTypeForListNameDetails(_0x97017c),_0x4db2c5;_0x4db2c5={'__metadata':{'type':_0x2c0ae8},'EmployeeId':_0x55a582,'OccasionType':_0x256499,'OccasionDate':_0x456749,'Details':_0x256499,'Title':_0x256499,'UserNameId':parseInt(_0x35e688)},_0x439d3a==''||_0x439d3a==null?$[_0xb06788(0x162)](AddItemToList(_0x1f199b,_0x97017c,_0x4db2c5))[_0xb06788(0x145)](function(_0x3f9d70){var _0x516bd8=_0xb06788;alert(_0x516bd8(0x128));}):$[_0xb06788(0x162)](updateItemWithID(_0x1f199b,_0x97017c,_0x4db2c5,parseInt(_0x439d3a)))['done'](function(_0x29a088){var _0x169986=_0xb06788;alert(_0x169986(0x155));});}function redirectCancel(){var _0xe186a3=a281_0x5747c8,_0x516051=titanForWork[_0xe186a3(0x12c)](_0xe186a3(0x14b)),_0x3e806d=titanForWork[_0xe186a3(0x12c)]('department'),_0x53af2b='';_0x3e806d!=null&&_0x3e806d!=''&&(_0x53af2b=_0xe186a3(0x131)+_0x3e806d);var _0x5931d8=_0x516051+'?WebAppId='+currentCompanyid+_0x53af2b+_0xe186a3(0x115);$(location)[_0xe186a3(0x15c)](_0xe186a3(0x179),_0x5931d8);}function GetItemTypeForListNameDetails(_0x3b1ed1){var _0x5ee79b=a281_0x5747c8;return _0x5ee79b(0x119)+_0x3b1ed1[_0x5ee79b(0x142)](0x0)[_0x5ee79b(0x125)]()+_0x3b1ed1[_0x5ee79b(0x134)]('\x20')['join']('')['slice'](0x1)+_0x5ee79b(0x15a);}function AddItemToList(_0x2b041c,_0x5b5765,_0x1a136e){var _0x11fa1f=a281_0x5747c8,_0x4820d0=$[_0x11fa1f(0x16b)]();return $['ajax']({'url':_0x2b041c+_0x11fa1f(0x124)+_0x5b5765+_0x11fa1f(0x174),'type':'POST','async':![],'headers':{'accept':'application/json;odata=verbose','X-RequestDigest':$('#__REQUESTDIGEST')[_0x11fa1f(0x12e)](),'content-Type':_0x11fa1f(0x175)},'data':JSON['stringify'](_0x1a136e),'success':function(_0x55fc6c){var _0x33d778=_0x11fa1f;_0x4820d0[_0x33d778(0x164)](_0x55fc6c);},'error':function(_0x177329){var _0x3fa708=_0x11fa1f;alert(JSON[_0x3fa708(0x14c)](_0x177329)),_0x4820d0[_0x3fa708(0x135)](_0x177329);}}),_0x4820d0[_0x11fa1f(0x141)]();}function updateItemWithID(_0x2cbd36,_0x174667,_0x18afe8,_0xeb969b){var _0x10cf7f=a281_0x5747c8,_0x5f2bb5=$['Deferred']();return $[_0x10cf7f(0x163)]({'url':_0x2cbd36+_0x10cf7f(0x124)+_0x174667+_0x10cf7f(0x153)+_0xeb969b+'\x27)','type':'POST','headers':{'accept':_0x10cf7f(0x175),'X-RequestDigest':$('#__REQUESTDIGEST')['val'](),'content-Type':_0x10cf7f(0x175),'X-Http-Method':'PATCH','If-Match':'*'},'data':JSON[_0x10cf7f(0x14c)](_0x18afe8),'async':![],'success':function(_0x1a4dd8){_0x5f2bb5['resolve'](!![]);},'error':function(_0x50c870){var _0x1bc4b1=_0x10cf7f;alert(JSON[_0x1bc4b1(0x14c)](_0x50c870)),_0x5f2bb5[_0x1bc4b1(0x135)](_0x50c870);}}),_0x5f2bb5[_0x10cf7f(0x141)]();}function GetCompanyEmployees(_0xcf1a5c,_0x4ea72b){var _0x3f6051=a281_0x5747c8,_0x2b1aef='';_0x4ea72b==_0x3f6051(0x146)&&($(_0x3f6051(0x150))[_0x3f6051(0x172)]()[_0x3f6051(0x144)](_0x3f6051(0x122)),_0x2b1aef=_0x3f6051(0x14d)+_0xcf1a5c+_0x3f6051(0x178));_0x4ea72b==_0x3f6051(0x133)&&(_0x2b1aef=_0x3f6051(0x110)+_0xcf1a5c+_0x3f6051(0x178));var _0x297f3c=_spPageContextInfo[_0x3f6051(0x151)]+_0x3f6051(0x157)+_0x2b1aef;$[_0x3f6051(0x163)]({'url':_0x297f3c,'headers':{'Accept':_0x3f6051(0x175)},'async':![],'success':function(_0xf96077){var _0x371d31=_0x3f6051,_0x40578c=_0xf96077['d'][_0x371d31(0x14f)];_0x40578c[_0x371d31(0x167)]==0x0&&$('#empinformation')[_0x371d31(0x10f)]();for(var _0x545667=0x0;_0x545667<_0x40578c[_0x371d31(0x167)];_0x545667++){if(_0x4ea72b==_0x371d31(0x146)){var _0x3e7e77=_0x40578c[_0x545667]['LogonName'][_0x371d31(0x159)];(_0x3e7e77==null||_0x3e7e77=='')&&(_0x3e7e77='');var _0x5758be=_0x40578c[_0x545667]['ID'];$(_0x371d31(0x150))[_0x371d31(0x144)]($(_0x371d31(0x15e))[_0x371d31(0x15c)](_0x371d31(0x13b),_0x5758be)[_0x371d31(0x166)](_0x3e7e77));}if(_0x4ea72b==_0x371d31(0x133)){$('#empinformation')[_0x371d31(0x16f)]();var _0x3e7e77=_0x40578c[_0x545667][_0x371d31(0x120)][_0x371d31(0x159)];(_0x3e7e77==null||_0x3e7e77=='')&&(_0x3e7e77='');var _0x50d1dc=_0x40578c[_0x545667][_0x371d31(0x120)][_0x371d31(0x113)];(_0x50d1dc==null||_0x50d1dc=='')&&(_0x50d1dc='');var _0x212d63=_0x40578c[_0x545667][_0x371d31(0x13c)];(_0x212d63==null||_0x212d63=='')&&(_0x212d63='');var _0x34798c=_0x40578c[_0x545667][_0x371d31(0x120)]['ID'];$(_0x371d31(0x13e))['val'](_0x34798c),$(_0x371d31(0x148))[_0x371d31(0x166)](_0x212d63);var _0x317279=_0x40578c[_0x545667][_0x371d31(0x140)][_0x371d31(0x130)];(_0x317279==null||_0x317279=='')&&(_0x317279='');$(_0x371d31(0x139))['text'](_0x371d31(0x160)+_0x317279);var _0xfbef74=_0x40578c[_0x545667][_0x371d31(0x15d)];(_0xfbef74==null||_0xfbef74=='')&&(_0xfbef74='');$(_0x371d31(0x171))[_0x371d31(0x166)](_0xfbef74);var _0x25853d=_0x40578c[_0x545667][_0x371d31(0x173)][_0x371d31(0x137)];(_0x25853d==null||_0x25853d=='')&&(_0x25853d='');var _0x2e635a=_0x40578c[_0x545667]['Manager'];(_0x2e635a==null||_0x2e635a=='')&&(_0x2e635a='');var _0x3c551f=_0x40578c[_0x545667]['MobileNumber'];(_0x3c551f==null||_0x3c551f=='')&&(_0x3c551f='');var _0x4e01e7=_0x40578c[_0x545667]['OfficeLocation']['OfficeName'];(_0x4e01e7==null||_0x4e01e7=='')&&(_0x4e01e7=''),$(_0x371d31(0x126))[_0x371d31(0x166)](_0x4e01e7);}}},'eror':function(_0x155034){var _0x55f9e4=_0x3f6051;console[_0x55f9e4(0x143)]('error');}});}function ValidateUserIsAlreadyExistthisOccasion(_0x5e0f87,_0x15eb7e,_0x21b789,_0x3b0736){var _0x39e310=a281_0x5747c8,_0x57a684=!![],_0x565bcb='';_0x565bcb=_0x39e310(0x118)+_0x15eb7e+_0x39e310(0x12b)+_0x21b789+_0x39e310(0x114)+_0x5e0f87+'\x27';var _0x400aeb=getCurrentCompanySiteURL+'/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$top=10'+_0x565bcb;return $['ajax']({'url':_0x400aeb,'headers':{'Accept':_0x39e310(0x175)},'async':![],'success':function(_0x319ca9){var _0x4e19e2=_0x39e310,_0x1b1769=_0x319ca9['d']['results'];if(_0x1b1769[_0x4e19e2(0x167)]>0x0)for(var _0x5dd4cc=0x0;_0x5dd4cc<_0x1b1769[_0x4e19e2(0x167)];_0x5dd4cc++){_0x1b1769[_0x5dd4cc]['ID']!=_0x3b0736&&(_0x57a684=![]);}},'eror':function(_0x2062c3){var _0x48259e=_0x39e310;console['log'](_0x48259e(0x132));}}),_0x57a684;}