var a57_0x51bed2=a57_0x1b0f;(function(_0x520b26,_0x5c8f09){var _0x13f38b=a57_0x1b0f,_0x102bc9=_0x520b26();while(!![]){try{var _0xe80521=parseInt(_0x13f38b(0x17a))/0x1+-parseInt(_0x13f38b(0x1b7))/0x2+-parseInt(_0x13f38b(0x1a4))/0x3+parseInt(_0x13f38b(0x176))/0x4*(-parseInt(_0x13f38b(0x160))/0x5)+-parseInt(_0x13f38b(0x189))/0x6*(-parseInt(_0x13f38b(0x18b))/0x7)+parseInt(_0x13f38b(0x1a1))/0x8+parseInt(_0x13f38b(0x17f))/0x9;if(_0xe80521===_0x5c8f09)break;else _0x102bc9['push'](_0x102bc9['shift']());}catch(_0x3e37f8){_0x102bc9['push'](_0x102bc9['shift']());}}}(a57_0x4b9d,0xcd909));var currentCompanyid='',getCurrentCompanySiteURL='';$(document)[a57_0x51bed2(0x173)](function(){var _0x284c17=a57_0x51bed2;currentCompanyid=titanForWork['getQueryStringParameter'](_0x284c17(0x163));var _0x5842cb=new Array();_0x5842cb[_0x284c17(0x17c)]('Occasion');var _0x2b6e31=UserExistInProcessApprover(currentCompanyid,'',_0x5842cb);for(var _0x958df7=0x0;_0x958df7<_0x2b6e31['length'];_0x958df7++){if(_0x2b6e31[_0x958df7][_0x284c17(0x195)]==_0x284c17(0x1af))$(_0x284c17(0x196))[_0x284c17(0x15d)]();else{}}$(_0x284c17(0x196))['is'](_0x284c17(0x178))==![]&&$(_0x284c17(0x167))['text'](_0x284c17(0x153));$(_0x284c17(0x190))[_0x284c17(0x181)]({'changeMonth':!![],'changeYear':!![],'yearRange':'-1:+0'}),$(_0x284c17(0x190))['datepicker'](_0x284c17(0x1a0),'dateFormat',_0x284c17(0x1a5));currentCompanyid!=null&&currentCompanyid!=''&&(currentCompanyid['indexOf']('#')!=-0x1&&(currentCompanyid=currentCompanyid['split']('#')[0x0]),currentCompanyid=currentCompanyid);GetCompanyEmployees(currentCompanyid,_0x284c17(0x194)),$(_0x284c17(0x1ad))[_0x284c17(0x197)](function(){var _0x4e942d=_0x284c17;GetCompanyEmployees($(this)[_0x4e942d(0x18c)](),_0x4e942d(0x158));}),$('#btnsubmit')[_0x284c17(0x168)](function(){AddOccasion();}),$(_0x284c17(0x15a))[_0x284c17(0x168)](function(){redirectCancel();});var _0x4e03fd=titanForWork[_0x284c17(0x166)](_0x284c17(0x18e)),_0x23328e=GetSiteUrl();getCurrentCompanySiteURL=_0x23328e,BindOccasiontype(),_0x4e03fd!=''&&_0x4e03fd!=null&&LoadOccasions(getCurrentCompanySiteURL,_0x4e03fd);});function a57_0x1b0f(_0x2575f6,_0x4a2c32){var _0x4b9d57=a57_0x4b9d();return a57_0x1b0f=function(_0x1b0fe5,_0x278d3a){_0x1b0fe5=_0x1b0fe5-0x152;var _0x2ab361=_0x4b9d57[_0x1b0fe5];return _0x2ab361;},a57_0x1b0f(_0x2575f6,_0x4a2c32);}function BindOccasiontype(){var _0x201ebe=a57_0x51bed2;$['ajax']({'url':_spPageContextInfo['webAbsoluteUrl']+_0x201ebe(0x1b3),'type':_0x201ebe(0x192),'async':![],'headers':{'accept':_0x201ebe(0x155)},'success':function(_0x2fa0b0){var _0x5ed7dc=_0x201ebe,_0x3afd9e=_0x2fa0b0['d'][_0x5ed7dc(0x193)];for(var _0x363687=0x0;_0x363687<_0x3afd9e['length'];_0x363687++){var _0x4eb40d=_0x3afd9e[_0x363687][_0x5ed7dc(0x19f)],_0x5160=_0x3afd9e[_0x363687][_0x5ed7dc(0x15b)];$(_0x5ed7dc(0x182))['append']($(_0x5ed7dc(0x19b))[_0x5ed7dc(0x1a8)](_0x5ed7dc(0x159),_0x4eb40d)[_0x5ed7dc(0x1a7)](_0x5160));}},'error':function(_0x25a3c6){var _0x39d16f=_0x201ebe;alert(JSON[_0x39d16f(0x169)](_0x25a3c6));}});}function GetDateStandardFormat(_0x3b22c7){var _0x35caf6=a57_0x51bed2,_0x516508=ConvertDateFormatToddMMyyyy(_0x3b22c7),_0x31ed40=new Date(_0x516508),_0x582fb3=0x3c*0x3c*0x18*0x3e8,_0x252d89=new Date(_0x31ed40[_0x35caf6(0x191)]()),_0x143ff3=_0x252d89[_0x35caf6(0x188)]();return _0x143ff3;}function a57_0x4b9d(){var _0x4cc639=['getTime','GET','results','BindDropDown','webPartName','#newOccasionbx','change','hide','\x27\x20and\x20UserNameId\x20eq\x20\x27','promise','<option></option>','indexOf','#__REQUESTDIGEST','Designation','OccasionDefault','option','9522936tkyqXc','MobileNumber','done','3306318bZCruq','dd/mm/yy','Department\x20:\x20','text','attr','Deferred','Title','href','Company','#ddlemployee','ListItem','Occasion','Please\x20select\x20employee.','resolve','when','/_api/web/lists/getbytitle(\x27OccasionMaster\x27)/items?$select=OccasionDefault,OccasionLang1,OccasionLang2,OccasionLang3,OccasionLang4,OccasionLang5,OccasionLang6,OccasionLang7,OccasionLang8,OccasionLang9,OccasionLang10','\x27\x20and\x20Status\x20eq\x20\x27Active\x27','OccasionDate','Please\x20select\x20Occasion\x20Date.','679030pgGOhR','slice','webAbsoluteUrl','#empinformation','ID,JoiningDate,DateOfAnniversary,FullName,DateOfBirth,LogonName/Title,LogonName/ID,LogonName/UserName,OfficeLocation/OfficeName,Email,Department/DepartmentName,Designation,Company/CompanyName,Company/ID,Manager,MobileNumber&$expand=LogonName,Company,Department,OfficeLocation&$filter=ID\x20eq\x20\x27','empty','Email','UserName','Occasion\x20is\x20already\x20added\x20for\x20this\x20date\x20and\x20employee.','reject','/_api/web/lists/getbytitle(\x27Companies\x27)/items?$select=ID,SiteURL&$filter=ID\x20eq\x20\x27','You\x20are\x20not\x20authorized\x20to\x20access\x20this\x20page.','ajax','application/json;odata=verbose','join','ID,LogonName/Title,LogonName/UserName,CompanyId&$expand=LogonName&$filter=CompanyId\x20eq\x20\x27','LoadProfile','value','#btncancel','OccasionLang1','\x27)/GetItemById(\x27','show','SP.Data.','/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$top=10','29770bgoyFC','log','dd/MM/yyyy','CompanyId','/_api/web/lists/getbytitle(\x27Employees\x27)/items?$select=','\x27\x20and\x20OccasionType\x20eq\x20\x27','getQueryStringParameter','#messageNotAthorizedAcces','click','stringify','split','&undefinedstr=undefinedstr','PATCH','LogonName','/_api/web/lists/getbytitle(\x27','Department','\x27)/items','#spanarea','sourcelocation','ready','Occasion\x20has\x20been\x20updated\x20successfully.','EmployeeId','220lzLvGj','/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$filter=ID\x20eq\x20\x27',':visible','length','553080FBhjti','append','push','formatDate','Occasion\x20has\x20been\x20added\x20successfully.','2581164KgBXKg','error','datepicker','#ddlOccasionType','&$filter=OccasionDate\x20eq\x20\x27','toLowerCase','DepartmentName','POST','yyyy','toISOString','6QZhaVm','#spanemplyeePeopleId','4065887ZANOCQ','val','#spandepartment','itemId','?WebAppId=','#occasiondate'];a57_0x4b9d=function(){return _0x4cc639;};return a57_0x4b9d();}function ConvertDateFormatToddMMyyyy(_0x4c58fc){var _0x254abd=a57_0x51bed2,_0x2160d1=stringToDate(_0x4c58fc,_0x254abd(0x162),'/');return _0x2160d1;}function stringToDate(_0x2ed24e,_0x2b2510,_0x3691f3){var _0x3fc80c=a57_0x51bed2,_0x41858e=_0x2b2510[_0x3fc80c(0x184)](),_0x4094f7=_0x41858e[_0x3fc80c(0x16a)](_0x3691f3),_0x18ca72=_0x2ed24e[_0x3fc80c(0x16a)](_0x3691f3),_0x49ea9a=_0x4094f7['indexOf']('mm'),_0xf90c27=_0x4094f7[_0x3fc80c(0x19c)]('dd'),_0x2720e0=_0x4094f7['indexOf'](_0x3fc80c(0x187)),_0x379e4d=parseInt(_0x18ca72[_0x49ea9a]);_0x379e4d-=0x1;var _0x3dabdf=new Date(_0x18ca72[_0x2720e0],_0x379e4d,_0x18ca72[_0xf90c27]);return _0x3dabdf;}function AddOccasion(){var _0x5a490b=a57_0x51bed2,_0x20312f=$('#ddlemployee')['val']();if(_0x20312f!=0x0){var _0x2a9d15=$(_0x5a490b(0x182))[_0x5a490b(0x18c)](),_0x493141='';if($(_0x5a490b(0x190))[_0x5a490b(0x18c)]()==''||$(_0x5a490b(0x190))['val']()==null){alert(_0x5a490b(0x1b6));return;}else _0x493141=GetDateStandardFormat($(_0x5a490b(0x190))[_0x5a490b(0x18c)]());if(_0x493141==''||_0x493141==null){alert(_0x5a490b(0x1b6));return;}else{var _0xb4f5e3=titanForWork[_0x5a490b(0x166)]('itemId'),_0x3403e1=$(_0x5a490b(0x18a))[_0x5a490b(0x18c)]();_0xb4f5e3==''||_0xb4f5e3==null?ValidateUserIsAlreadyExistthisOccasion(_0x2a9d15,_0x493141,_0x3403e1,'')==!![]?AddNewOccasionDetails(_0x20312f,_0x2a9d15,_0x493141,_0x3403e1,_0xb4f5e3):alert(_0x5a490b(0x1bf)):ValidateUserIsAlreadyExistthisOccasion(_0x2a9d15,_0x493141,_0x3403e1,_0xb4f5e3)==!![]?AddNewOccasionDetails(_0x20312f,_0x2a9d15,_0x493141,_0x3403e1,_0xb4f5e3):alert(_0x5a490b(0x1bf));}}else alert(_0x5a490b(0x1b0));}function GetSiteUrl(){var _0x429d29=a57_0x51bed2,_0x5e936b='',_0x4f9936='';return _0x5e936b=_spPageContextInfo[_0x429d29(0x1b9)]+_0x429d29(0x152)+currentCompanyid+'\x27',$[_0x429d29(0x154)]({'url':_0x5e936b,'headers':{'Accept':_0x429d29(0x155)},'async':![],'success':function(_0x451576){var _0x1689c0=_0x429d29,_0x503396=_0x451576['d'][_0x1689c0(0x193)];_0x503396[_0x1689c0(0x179)]>0x0&&(_0x4f9936=_0x503396[0x0]['SiteURL']);},'eror':function(_0x181ab8){var _0x1fbc1b=_0x429d29;console['log'](_0x1fbc1b(0x180));}}),_0x4f9936;}function LoadOccasions(_0x5350ac,_0x409b83){var _0x5e5181=a57_0x51bed2,_0x5ce74a=_0x5350ac+_0x5e5181(0x177)+_0x409b83+'\x27';$[_0x5e5181(0x154)]({'url':_0x5ce74a,'headers':{'Accept':_0x5e5181(0x155)},'async':![],'success':function(_0x284b03){var _0x8731a1=_0x5e5181,_0x1dc5e5=_0x284b03['d'][_0x8731a1(0x193)];if(_0x1dc5e5[_0x8731a1(0x179)]>0x0){$(_0x8731a1(0x1ad))[_0x8731a1(0x18c)](_0x1dc5e5[0x0][_0x8731a1(0x175)]);var _0x504343=new Date(_0x1dc5e5[0x0][_0x8731a1(0x1b5)]),_0x2c4842='';_0x2c4842=$['datepicker'][_0x8731a1(0x17d)]('dd/mm/yy',_0x504343),$(_0x8731a1(0x190))['val'](_0x2c4842),$(_0x8731a1(0x182))[_0x8731a1(0x18c)](_0x1dc5e5[0x0]['OccasionType']),GetCompanyEmployees(_0x1dc5e5[0x0]['EmployeeId'],_0x8731a1(0x158));}},'eror':function(_0x25ea32){var _0x439f6e=_0x5e5181;console[_0x439f6e(0x161)](_0x439f6e(0x180));}});}function AddNewOccasionDetails(_0xe35552,_0x4773f6,_0x37891b,_0x573c72,_0x2e6a2e){var _0x222bc0=a57_0x51bed2,_0x54008c=getCurrentCompanySiteURL,_0x5d387e='OccasionDetails',_0x36d547=GetItemTypeForListNameDetails(_0x5d387e),_0x3a4e99;_0x3a4e99={'__metadata':{'type':_0x36d547},'EmployeeId':_0xe35552,'OccasionType':_0x4773f6,'OccasionDate':_0x37891b,'Details':_0x4773f6,'Title':_0x4773f6,'UserNameId':parseInt(_0x573c72)},_0x2e6a2e==''||_0x2e6a2e==null?$[_0x222bc0(0x1b2)](AddItemToList(_0x54008c,_0x5d387e,_0x3a4e99))['done'](function(_0x244825){var _0x6074c7=_0x222bc0;alert(_0x6074c7(0x17e));}):$['when'](updateItemWithID(_0x54008c,_0x5d387e,_0x3a4e99,parseInt(_0x2e6a2e)))[_0x222bc0(0x1a3)](function(_0xbae95e){var _0x5f0c08=_0x222bc0;alert(_0x5f0c08(0x174));});}function redirectCancel(){var _0x13e6aa=a57_0x51bed2,_0x5ac8b3=titanForWork[_0x13e6aa(0x166)](_0x13e6aa(0x172)),_0x2d8d25=titanForWork[_0x13e6aa(0x166)]('department'),_0x384354='';_0x2d8d25!=null&&_0x2d8d25!=''&&(_0x384354='&DepartmentId='+_0x2d8d25);var _0x37c180=_0x5ac8b3+_0x13e6aa(0x18f)+currentCompanyid+_0x384354+_0x13e6aa(0x16b);$(location)['attr'](_0x13e6aa(0x1ab),_0x37c180);}function GetItemTypeForListNameDetails(_0x2f4d58){var _0x4ae76b=a57_0x51bed2;return _0x4ae76b(0x15e)+_0x2f4d58['charAt'](0x0)['toUpperCase']()+_0x2f4d58['split']('\x20')[_0x4ae76b(0x156)]('')[_0x4ae76b(0x1b8)](0x1)+_0x4ae76b(0x1ae);}function AddItemToList(_0x3ac22b,_0x44d873,_0x1091b6){var _0x2dcd7e=a57_0x51bed2,_0xf14e40=$[_0x2dcd7e(0x1a9)]();return $[_0x2dcd7e(0x154)]({'url':_0x3ac22b+_0x2dcd7e(0x16e)+_0x44d873+_0x2dcd7e(0x170),'type':_0x2dcd7e(0x186),'async':![],'headers':{'accept':_0x2dcd7e(0x155),'X-RequestDigest':$(_0x2dcd7e(0x19d))[_0x2dcd7e(0x18c)](),'content-Type':_0x2dcd7e(0x155)},'data':JSON[_0x2dcd7e(0x169)](_0x1091b6),'success':function(_0x37c804){var _0x5c8147=_0x2dcd7e;_0xf14e40[_0x5c8147(0x1b1)](_0x37c804);},'error':function(_0x1548d4){var _0x1118ec=_0x2dcd7e;alert(JSON[_0x1118ec(0x169)](_0x1548d4)),_0xf14e40[_0x1118ec(0x1c0)](_0x1548d4);}}),_0xf14e40[_0x2dcd7e(0x19a)]();}function updateItemWithID(_0x4f0e7b,_0x38ab4f,_0x526fbd,_0x329bf8){var _0x4f1f09=a57_0x51bed2,_0x217a67=$['Deferred']();return $['ajax']({'url':_0x4f0e7b+_0x4f1f09(0x16e)+_0x38ab4f+_0x4f1f09(0x15c)+_0x329bf8+'\x27)','type':_0x4f1f09(0x186),'headers':{'accept':_0x4f1f09(0x155),'X-RequestDigest':$(_0x4f1f09(0x19d))[_0x4f1f09(0x18c)](),'content-Type':'application/json;odata=verbose','X-Http-Method':_0x4f1f09(0x16c),'If-Match':'*'},'data':JSON[_0x4f1f09(0x169)](_0x526fbd),'async':![],'success':function(_0xb1f1b){_0x217a67['resolve'](!![]);},'error':function(_0x5067a2){var _0x4a4c29=_0x4f1f09;alert(JSON[_0x4a4c29(0x169)](_0x5067a2)),_0x217a67[_0x4a4c29(0x1c0)](_0x5067a2);}}),_0x217a67[_0x4f1f09(0x19a)]();}function GetCompanyEmployees(_0x1ccad4,_0x48d29d){var _0x6fae73=a57_0x51bed2,_0x3779e1='';_0x48d29d=='BindDropDown'&&($(_0x6fae73(0x1ad))[_0x6fae73(0x1bc)]()['append']('<option\x20value=\x220\x22>-Select\x20Employee-</option>'),_0x3779e1=_0x6fae73(0x157)+_0x1ccad4+_0x6fae73(0x1b4));_0x48d29d==_0x6fae73(0x158)&&(_0x3779e1=_0x6fae73(0x1bb)+_0x1ccad4+_0x6fae73(0x1b4));var _0x2c4f24=_spPageContextInfo['webAbsoluteUrl']+_0x6fae73(0x164)+_0x3779e1;$['ajax']({'url':_0x2c4f24,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x23dd1a){var _0x5e14ce=_0x6fae73,_0x1a4319=_0x23dd1a['d'][_0x5e14ce(0x193)];_0x1a4319[_0x5e14ce(0x179)]==0x0&&$(_0x5e14ce(0x1ba))[_0x5e14ce(0x198)]();for(var _0x59f0b7=0x0;_0x59f0b7<_0x1a4319[_0x5e14ce(0x179)];_0x59f0b7++){if(_0x48d29d==_0x5e14ce(0x194)){var _0x1e4083=_0x1a4319[_0x59f0b7][_0x5e14ce(0x16d)][_0x5e14ce(0x1aa)];(_0x1e4083==null||_0x1e4083=='')&&(_0x1e4083='');var _0x599edb=_0x1a4319[_0x59f0b7]['ID'];$(_0x5e14ce(0x1ad))[_0x5e14ce(0x17b)]($(_0x5e14ce(0x19b))[_0x5e14ce(0x1a8)](_0x5e14ce(0x159),_0x599edb)[_0x5e14ce(0x1a7)](_0x1e4083));}if(_0x48d29d=='LoadProfile'){$(_0x5e14ce(0x1ba))['show']();var _0x1e4083=_0x1a4319[_0x59f0b7]['LogonName'][_0x5e14ce(0x1aa)];(_0x1e4083==null||_0x1e4083=='')&&(_0x1e4083='');var _0x433211=_0x1a4319[_0x59f0b7][_0x5e14ce(0x16d)][_0x5e14ce(0x1be)];(_0x433211==null||_0x433211=='')&&(_0x433211='');var _0x10b9d7=_0x1a4319[_0x59f0b7][_0x5e14ce(0x1bd)];(_0x10b9d7==null||_0x10b9d7=='')&&(_0x10b9d7='');var _0x3a13b9=_0x1a4319[_0x59f0b7][_0x5e14ce(0x16d)]['ID'];$('#spanemplyeePeopleId')[_0x5e14ce(0x18c)](_0x3a13b9),$('#spanEmailId')[_0x5e14ce(0x1a7)](_0x10b9d7);var _0x1cbd27=_0x1a4319[_0x59f0b7][_0x5e14ce(0x16f)][_0x5e14ce(0x185)];(_0x1cbd27==null||_0x1cbd27=='')&&(_0x1cbd27='');$(_0x5e14ce(0x18d))[_0x5e14ce(0x1a7)](_0x5e14ce(0x1a6)+_0x1cbd27);var _0x15d4b4=_0x1a4319[_0x59f0b7][_0x5e14ce(0x19e)];(_0x15d4b4==null||_0x15d4b4=='')&&(_0x15d4b4='');$('#spandesination')[_0x5e14ce(0x1a7)](_0x15d4b4);var _0x1200e6=_0x1a4319[_0x59f0b7][_0x5e14ce(0x1ac)]['CompanyName'];(_0x1200e6==null||_0x1200e6=='')&&(_0x1200e6='');var _0x18a364=_0x1a4319[_0x59f0b7]['Manager'];(_0x18a364==null||_0x18a364=='')&&(_0x18a364='');var _0x1665d2=_0x1a4319[_0x59f0b7][_0x5e14ce(0x1a2)];(_0x1665d2==null||_0x1665d2=='')&&(_0x1665d2='');var _0x2f1523=_0x1a4319[_0x59f0b7]['OfficeLocation']['OfficeName'];(_0x2f1523==null||_0x2f1523=='')&&(_0x2f1523=''),$(_0x5e14ce(0x171))['text'](_0x2f1523);}}},'eror':function(_0xebb80a){var _0x3214d3=_0x6fae73;console[_0x3214d3(0x161)]('error');}});}function ValidateUserIsAlreadyExistthisOccasion(_0x52dbea,_0x552664,_0x420f35,_0x335e29){var _0x47e695=a57_0x51bed2,_0x4ca9e8=!![],_0x127978='';_0x127978=_0x47e695(0x183)+_0x552664+_0x47e695(0x199)+_0x420f35+_0x47e695(0x165)+_0x52dbea+'\x27';var _0xab7ea3=getCurrentCompanySiteURL+_0x47e695(0x15f)+_0x127978;return $[_0x47e695(0x154)]({'url':_0xab7ea3,'headers':{'Accept':_0x47e695(0x155)},'async':![],'success':function(_0x41f1a4){var _0xd36ab0=_0x47e695,_0x7da550=_0x41f1a4['d'][_0xd36ab0(0x193)];if(_0x7da550[_0xd36ab0(0x179)]>0x0)for(var _0x5d3c17=0x0;_0x5d3c17<_0x7da550[_0xd36ab0(0x179)];_0x5d3c17++){_0x7da550[_0x5d3c17]['ID']!=_0x335e29&&(_0x4ca9e8=![]);}},'eror':function(_0x483bbd){var _0x2914e1=_0x47e695;console[_0x2914e1(0x161)](_0x2914e1(0x180));}}),_0x4ca9e8;}