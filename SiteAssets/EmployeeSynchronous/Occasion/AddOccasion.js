(function(_0x18e036,_0x2a8698){var _0x49f637=_0x1793,_0x49eafb=_0x18e036();while(!![]){try{var _0x1556f5=-parseInt(_0x49f637(0x98))/0x1*(-parseInt(_0x49f637(0x89))/0x2)+-parseInt(_0x49f637(0x9e))/0x3*(-parseInt(_0x49f637(0xac))/0x4)+parseInt(_0x49f637(0xbb))/0x5*(-parseInt(_0x49f637(0xc0))/0x6)+-parseInt(_0x49f637(0xcd))/0x7*(-parseInt(_0x49f637(0x8f))/0x8)+-parseInt(_0x49f637(0xd0))/0x9*(parseInt(_0x49f637(0xae))/0xa)+parseInt(_0x49f637(0xd3))/0xb+parseInt(_0x49f637(0xea))/0xc;if(_0x1556f5===_0x2a8698)break;else _0x49eafb['push'](_0x49eafb['shift']());}catch(_0x1ec537){_0x49eafb['push'](_0x49eafb['shift']());}}}(_0x3f34,0x58778));var currentCompanyid='',getCurrentCompanySiteURL='';function _0x1793(_0x497d00,_0x30960e){var _0x3f34de=_0x3f34();return _0x1793=function(_0x17931e,_0x207d9b){_0x17931e=_0x17931e-0x84;var _0x1f4be0=_0x3f34de[_0x17931e];return _0x1f4be0;},_0x1793(_0x497d00,_0x30960e);}$(document)['ready'](function(){var _0x414091=_0x1793;currentCompanyid=titanForWork[_0x414091(0xce)](_0x414091(0xe9));var _0x523776=new Array();_0x523776[_0x414091(0x9c)](_0x414091(0x8a));var _0x5198b0=UserExistInProcessApprover(currentCompanyid,'',_0x523776);for(var _0x44869=0x0;_0x44869<_0x5198b0[_0x414091(0x8b)];_0x44869++){if(_0x5198b0[_0x44869][_0x414091(0xba)]==_0x414091(0x8a))$(_0x414091(0xdc))['show']();else{}}$(_0x414091(0xdc))['is'](_0x414091(0xa2))==![]&&$(_0x414091(0xc5))[_0x414091(0xc9)](_0x414091(0xc2));$(_0x414091(0x87))[_0x414091(0x94)]({'changeMonth':!![],'changeYear':!![],'yearRange':_0x414091(0xd4)}),$(_0x414091(0x87))['datepicker'](_0x414091(0xca),_0x414091(0xd6),_0x414091(0xab));currentCompanyid!=null&&currentCompanyid!=''&&(currentCompanyid[_0x414091(0x85)]('#')!=-0x1&&(currentCompanyid=currentCompanyid[_0x414091(0xb5)]('#')[0x0]),currentCompanyid=currentCompanyid);GetCompanyEmployees(currentCompanyid,'BindDropDown'),$(_0x414091(0xa5))[_0x414091(0xa6)](function(){var _0x461171=_0x414091;GetCompanyEmployees($(this)[_0x461171(0x88)](),_0x461171(0xed));}),$(_0x414091(0x86))[_0x414091(0xb7)](function(){AddOccasion();}),$(_0x414091(0x9a))['click'](function(){redirectCancel();});var _0x428340=titanForWork[_0x414091(0xce)](_0x414091(0xaf)),_0xc9c16e=GetSiteUrl();getCurrentCompanySiteURL=_0xc9c16e,BindOccasiontype(),_0x428340!=''&&_0x428340!=null&&LoadOccasions(getCurrentCompanySiteURL,_0x428340);});function BindOccasiontype(){var _0x3934c3=_0x1793;$[_0x3934c3(0xb4)]({'url':_spPageContextInfo[_0x3934c3(0xbf)]+'/_api/web/lists/getbytitle(\x27OccasionMaster\x27)/items?$select=OccasionDefault,OccasionLang1,OccasionLang2,OccasionLang3,OccasionLang4,OccasionLang5,OccasionLang6,OccasionLang7,OccasionLang8,OccasionLang9,OccasionLang10','type':_0x3934c3(0xa0),'async':![],'headers':{'accept':_0x3934c3(0xe3)},'success':function(_0x507469){var _0x4216ef=_0x3934c3,_0x3f894e=_0x507469['d']['results'];for(var _0x49a545=0x0;_0x49a545<_0x3f894e[_0x4216ef(0x8b)];_0x49a545++){var _0x621b94=_0x3f894e[_0x49a545][_0x4216ef(0xdb)],_0x2fcfd8=_0x3f894e[_0x49a545]['OccasionLang1'];$('#ddlOccasionType')[_0x4216ef(0xdf)]($(_0x4216ef(0xe7))[_0x4216ef(0x8e)](_0x4216ef(0xa3),_0x621b94)['text'](_0x2fcfd8));}},'error':function(_0x39afcc){alert(JSON['stringify'](_0x39afcc));}});}function GetDateStandardFormat(_0x3b30b6){var _0x45e017=_0x1793,_0x431ca8=ConvertDateFormatToddMMyyyy(_0x3b30b6),_0xcd7a69=new Date(_0x431ca8),_0x1cd907=0x3c*0x3c*0x18*0x3e8,_0x25888a=new Date(_0xcd7a69['getTime']()),_0x36f111=_0x25888a[_0x45e017(0xe5)]();return _0x36f111;}function ConvertDateFormatToddMMyyyy(_0x3c6f36){var _0x735ad2=_0x1793,_0x350f2b=stringToDate(_0x3c6f36,_0x735ad2(0xeb),'/');return _0x350f2b;}function stringToDate(_0x81d1dc,_0x5890ff,_0x2315e0){var _0x1e6c9f=_0x1793,_0xfddd3=_0x5890ff['toLowerCase'](),_0x49e181=_0xfddd3['split'](_0x2315e0),_0x5cf423=_0x81d1dc[_0x1e6c9f(0xb5)](_0x2315e0),_0x567abc=_0x49e181[_0x1e6c9f(0x85)]('mm'),_0x445419=_0x49e181[_0x1e6c9f(0x85)]('dd'),_0x436141=_0x49e181[_0x1e6c9f(0x85)](_0x1e6c9f(0x8d)),_0x2d28dc=parseInt(_0x5cf423[_0x567abc]);_0x2d28dc-=0x1;var _0x2f9da9=new Date(_0x5cf423[_0x436141],_0x2d28dc,_0x5cf423[_0x445419]);return _0x2f9da9;}function AddOccasion(){var _0x266346=_0x1793,_0x176b36=$(_0x266346(0xa5))[_0x266346(0x88)]();if(_0x176b36!=0x0){var _0x10eab5=$('#ddlOccasionType')[_0x266346(0x88)](),_0x407acb='';if($(_0x266346(0x87))[_0x266346(0x88)]()==''||$(_0x266346(0x87))[_0x266346(0x88)]()==null){alert(_0x266346(0xd1));return;}else _0x407acb=GetDateStandardFormat($('#occasiondate')[_0x266346(0x88)]());if(_0x407acb==''||_0x407acb==null){alert(_0x266346(0xd1));return;}else{var _0x2b2dbc=titanForWork[_0x266346(0xce)]('itemId'),_0x5866a0=$(_0x266346(0xd8))[_0x266346(0x88)]();_0x2b2dbc==''||_0x2b2dbc==null?ValidateUserIsAlreadyExistthisOccasion(_0x10eab5,_0x407acb,_0x5866a0,'')==!![]?AddNewOccasionDetails(_0x176b36,_0x10eab5,_0x407acb,_0x5866a0,_0x2b2dbc):alert(_0x266346(0xcf)):ValidateUserIsAlreadyExistthisOccasion(_0x10eab5,_0x407acb,_0x5866a0,_0x2b2dbc)==!![]?AddNewOccasionDetails(_0x176b36,_0x10eab5,_0x407acb,_0x5866a0,_0x2b2dbc):alert(_0x266346(0xcf));}}else alert(_0x266346(0xd5));}function GetSiteUrl(){var _0x437883=_0x1793,_0x55c7d9='',_0x11fdc7='';return _0x55c7d9=_spPageContextInfo[_0x437883(0xbf)]+_0x437883(0xa8)+currentCompanyid+'\x27',$[_0x437883(0xb4)]({'url':_0x55c7d9,'headers':{'Accept':_0x437883(0xe3)},'async':![],'success':function(_0x42f1b2){var _0x572678=_0x437883,_0x2130d6=_0x42f1b2['d'][_0x572678(0xd9)];_0x2130d6[_0x572678(0x8b)]>0x0&&(_0x11fdc7=_0x2130d6[0x0]['SiteURL']);},'eror':function(_0x4417a8){var _0xd0a09b=_0x437883;console[_0xd0a09b(0xb2)](_0xd0a09b(0xe0));}}),_0x11fdc7;}function LoadOccasions(_0x32695b,_0x66f965){var _0x5487e2=_0x1793,_0x5c5f50=_0x32695b+'/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$filter=ID\x20eq\x20\x27'+_0x66f965+'\x27';$['ajax']({'url':_0x5c5f50,'headers':{'Accept':_0x5487e2(0xe3)},'async':![],'success':function(_0x3ea86b){var _0x18312e=_0x5487e2,_0x48e286=_0x3ea86b['d'][_0x18312e(0xd9)];if(_0x48e286[_0x18312e(0x8b)]>0x0){$(_0x18312e(0xa5))[_0x18312e(0x88)](_0x48e286[0x0][_0x18312e(0xdd)]);var _0x42c7bc=new Date(_0x48e286[0x0][_0x18312e(0x95)]),_0x2db66e='';_0x2db66e=$[_0x18312e(0x94)]['formatDate'](_0x18312e(0xab),_0x42c7bc),$(_0x18312e(0x87))['val'](_0x2db66e),$('#ddlOccasionType')[_0x18312e(0x88)](_0x48e286[0x0][_0x18312e(0xb3)]),GetCompanyEmployees(_0x48e286[0x0][_0x18312e(0xdd)],'LoadProfile');}},'eror':function(_0x24d993){var _0x17701b=_0x5487e2;console[_0x17701b(0xb2)](_0x17701b(0xe0));}});}function AddNewOccasionDetails(_0x11abaf,_0xd4b5d1,_0x1a25cf,_0x1fe1d1,_0x291651){var _0x16ef50=_0x1793,_0x27e116=getCurrentCompanySiteURL,_0x358084='OccasionDetails',_0x26fe06=GetItemTypeForListNameDetails(_0x358084),_0x9f33b2;_0x9f33b2={'__metadata':{'type':_0x26fe06},'EmployeeId':_0x11abaf,'OccasionType':_0xd4b5d1,'OccasionDate':_0x1a25cf,'Details':_0xd4b5d1,'Title':_0xd4b5d1,'UserNameId':parseInt(_0x1fe1d1)},_0x291651==''||_0x291651==null?$['when'](AddItemToList(_0x27e116,_0x358084,_0x9f33b2))[_0x16ef50(0xcb)](function(_0x2661a8){var _0x55bdd7=_0x16ef50;alert(_0x55bdd7(0xa9));}):$[_0x16ef50(0x99)](updateItemWithID(_0x27e116,_0x358084,_0x9f33b2,parseInt(_0x291651)))[_0x16ef50(0xcb)](function(_0x39f96d){var _0x117245=_0x16ef50;alert(_0x117245(0xd2));});}function redirectCancel(){var _0x47881c=_0x1793,_0x4df7e4=titanForWork[_0x47881c(0xce)](_0x47881c(0xbd)),_0x18cc4c=titanForWork[_0x47881c(0xce)](_0x47881c(0xb1)),_0x2be17d='';_0x18cc4c!=null&&_0x18cc4c!=''&&(_0x2be17d='&DepartmentId='+_0x18cc4c);var _0x23a7b4=_0x4df7e4+'?WebAppId='+currentCompanyid+_0x2be17d+'&undefinedstr=undefinedstr';$(location)[_0x47881c(0x8e)](_0x47881c(0xe6),_0x23a7b4);}function GetItemTypeForListNameDetails(_0x2d82cf){var _0x458680=_0x1793;return'SP.Data.'+_0x2d82cf[_0x458680(0x8c)](0x0)['toUpperCase']()+_0x2d82cf[_0x458680(0xb5)]('\x20')['join']('')[_0x458680(0xe1)](0x1)+_0x458680(0xe8);}function AddItemToList(_0x23cdc4,_0x1da7f2,_0x5a1274){var _0x4edec1=_0x1793,_0x2cbe2f=$['Deferred']();return $['ajax']({'url':_0x23cdc4+'/_api/web/lists/getbytitle(\x27'+_0x1da7f2+_0x4edec1(0xd7),'type':_0x4edec1(0x90),'async':![],'headers':{'accept':_0x4edec1(0xe3),'X-RequestDigest':$(_0x4edec1(0x9d))[_0x4edec1(0x88)](),'content-Type':'application/json;odata=verbose'},'data':JSON[_0x4edec1(0xec)](_0x5a1274),'success':function(_0x55103d){var _0x3442ff=_0x4edec1;_0x2cbe2f[_0x3442ff(0xad)](_0x55103d);},'error':function(_0x3571cf){var _0x5b4d5a=_0x4edec1;alert(JSON[_0x5b4d5a(0xec)](_0x3571cf)),_0x2cbe2f[_0x5b4d5a(0xda)](_0x3571cf);}}),_0x2cbe2f[_0x4edec1(0xaa)]();}function _0x3f34(){var _0xc52de6=['charAt','yyyy','attr','216mFckFs','POST','/_api/web/lists/getbytitle(\x27Employees\x27)/items?$select=','#empinformation','Email','datepicker','OccasionDate','UserName','DepartmentName','18737sznWeb','when','#btncancel','Title','push','#__REQUESTDIGEST','1410663hpDYVS','BindDropDown','GET','LogonName',':visible','value','\x27\x20and\x20OccasionType\x20eq\x20\x27','#ddlemployee','change','ID,LogonName/Title,LogonName/UserName,CompanyId&$expand=LogonName&$filter=CompanyId\x20eq\x20\x27','/_api/web/lists/getbytitle(\x27Companies\x27)/items?$select=ID,SiteURL&$filter=ID\x20eq\x20\x27','Occasion\x20has\x20been\x20added\x20successfully.','promise','dd/mm/yy','4TsOwcO','resolve','1100dxULrq','itemId','show','department','log','OccasionType','ajax','split','OfficeName','click','Department\x20:\x20','Manager','webPartName','3571780HmqTcH','OfficeLocation','sourcelocation','/_api/web/lists/getbytitle(\x27','webAbsoluteUrl','6lzqvLG','hide','You\x20are\x20not\x20authorized\x20to\x20access\x20this\x20page.','\x27\x20and\x20UserNameId\x20eq\x20\x27','Company','#messageNotAthorizedAcces','Deferred','/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$top=10','#spanEmailId','text','option','done','Department','9597eccbph','getQueryStringParameter','Occasion\x20is\x20already\x20added\x20for\x20this\x20date\x20and\x20employee.','31419sdEXWI','Please\x20select\x20Occasion\x20Date.','Occasion\x20has\x20been\x20updated\x20successfully.','3274458mdsiWr','-1:+0','Please\x20select\x20employee.','dateFormat','\x27)/items','#spanemplyeePeopleId','results','reject','OccasionDefault','#newOccasionbx','EmployeeId','<option\x20value=\x220\x22>-Select\x20Employee-</option>','append','error','slice','\x27\x20and\x20Status\x20eq\x20\x27Active\x27','application/json;odata=verbose','#spandepartment','toISOString','href','<option></option>','ListItem','CompanyId','6745500KqYbvM','dd/MM/yyyy','stringify','LoadProfile','\x27)/GetItemById(\x27','indexOf','#btnsubmit','#occasiondate','val','10IpbhZp','Occasion','length'];_0x3f34=function(){return _0xc52de6;};return _0x3f34();}function updateItemWithID(_0x529452,_0xce1290,_0x51ecb0,_0x2c9513){var _0x4dcfe3=_0x1793,_0x54a7a8=$[_0x4dcfe3(0xc6)]();return $[_0x4dcfe3(0xb4)]({'url':_0x529452+_0x4dcfe3(0xbe)+_0xce1290+_0x4dcfe3(0x84)+_0x2c9513+'\x27)','type':_0x4dcfe3(0x90),'headers':{'accept':'application/json;odata=verbose','X-RequestDigest':$('#__REQUESTDIGEST')[_0x4dcfe3(0x88)](),'content-Type':_0x4dcfe3(0xe3),'X-Http-Method':'PATCH','If-Match':'*'},'data':JSON['stringify'](_0x51ecb0),'async':![],'success':function(_0x1b3984){var _0x55dd8f=_0x4dcfe3;_0x54a7a8[_0x55dd8f(0xad)](!![]);},'error':function(_0x1cce10){var _0x4e8e28=_0x4dcfe3;alert(JSON[_0x4e8e28(0xec)](_0x1cce10)),_0x54a7a8['reject'](_0x1cce10);}}),_0x54a7a8['promise']();}function GetCompanyEmployees(_0xb8bd34,_0x8ab058){var _0x1bc155=_0x1793,_0x4f5f70='';_0x8ab058==_0x1bc155(0x9f)&&($(_0x1bc155(0xa5))['empty']()['append'](_0x1bc155(0xde)),_0x4f5f70=_0x1bc155(0xa7)+_0xb8bd34+_0x1bc155(0xe2));_0x8ab058==_0x1bc155(0xed)&&(_0x4f5f70='ID,JoiningDate,DateOfAnniversary,FullName,DateOfBirth,LogonName/Title,LogonName/ID,LogonName/UserName,OfficeLocation/OfficeName,Email,Department/DepartmentName,Designation,Company/CompanyName,Company/ID,Manager,MobileNumber&$expand=LogonName,Company,Department,OfficeLocation&$filter=ID\x20eq\x20\x27'+_0xb8bd34+_0x1bc155(0xe2));var _0x26d255=_spPageContextInfo[_0x1bc155(0xbf)]+_0x1bc155(0x91)+_0x4f5f70;$[_0x1bc155(0xb4)]({'url':_0x26d255,'headers':{'Accept':_0x1bc155(0xe3)},'async':![],'success':function(_0x5571d6){var _0x19b212=_0x1bc155,_0x4c7064=_0x5571d6['d'][_0x19b212(0xd9)];_0x4c7064[_0x19b212(0x8b)]==0x0&&$(_0x19b212(0x92))[_0x19b212(0xc1)]();for(var _0x1591d5=0x0;_0x1591d5<_0x4c7064[_0x19b212(0x8b)];_0x1591d5++){if(_0x8ab058==_0x19b212(0x9f)){var _0x4f57ff=_0x4c7064[_0x1591d5]['LogonName'][_0x19b212(0x9b)];(_0x4f57ff==null||_0x4f57ff=='')&&(_0x4f57ff='');var _0x4f1efe=_0x4c7064[_0x1591d5]['ID'];$(_0x19b212(0xa5))[_0x19b212(0xdf)]($(_0x19b212(0xe7))[_0x19b212(0x8e)](_0x19b212(0xa3),_0x4f1efe)[_0x19b212(0xc9)](_0x4f57ff));}if(_0x8ab058=='LoadProfile'){$(_0x19b212(0x92))[_0x19b212(0xb0)]();var _0x4f57ff=_0x4c7064[_0x1591d5][_0x19b212(0xa1)][_0x19b212(0x9b)];(_0x4f57ff==null||_0x4f57ff=='')&&(_0x4f57ff='');var _0x2e1169=_0x4c7064[_0x1591d5][_0x19b212(0xa1)][_0x19b212(0x96)];(_0x2e1169==null||_0x2e1169=='')&&(_0x2e1169='');var _0x1d712d=_0x4c7064[_0x1591d5][_0x19b212(0x93)];(_0x1d712d==null||_0x1d712d=='')&&(_0x1d712d='');var _0x527119=_0x4c7064[_0x1591d5][_0x19b212(0xa1)]['ID'];$(_0x19b212(0xd8))['val'](_0x527119),$(_0x19b212(0xc8))[_0x19b212(0xc9)](_0x1d712d);var _0x584b8d=_0x4c7064[_0x1591d5][_0x19b212(0xcc)][_0x19b212(0x97)];(_0x584b8d==null||_0x584b8d=='')&&(_0x584b8d='');$(_0x19b212(0xe4))[_0x19b212(0xc9)](_0x19b212(0xb8)+_0x584b8d);var _0x14c56a=_0x4c7064[_0x1591d5]['Designation'];(_0x14c56a==null||_0x14c56a=='')&&(_0x14c56a='');$('#spandesination')['text'](_0x14c56a);var _0x733b30=_0x4c7064[_0x1591d5][_0x19b212(0xc4)]['CompanyName'];(_0x733b30==null||_0x733b30=='')&&(_0x733b30='');var _0x6e5bd9=_0x4c7064[_0x1591d5][_0x19b212(0xb9)];(_0x6e5bd9==null||_0x6e5bd9=='')&&(_0x6e5bd9='');var _0xb34ccd=_0x4c7064[_0x1591d5]['MobileNumber'];(_0xb34ccd==null||_0xb34ccd=='')&&(_0xb34ccd='');var _0x27ce09=_0x4c7064[_0x1591d5][_0x19b212(0xbc)][_0x19b212(0xb6)];(_0x27ce09==null||_0x27ce09=='')&&(_0x27ce09=''),$('#spanarea')['text'](_0x27ce09);}}},'eror':function(_0x719a5b){var _0x4f3a59=_0x1bc155;console[_0x4f3a59(0xb2)](_0x4f3a59(0xe0));}});}function ValidateUserIsAlreadyExistthisOccasion(_0x2c049d,_0x5a3525,_0x2fc45c,_0x3df196){var _0x51aada=_0x1793,_0x107fda=!![],_0x469593='';_0x469593='&$filter=OccasionDate\x20eq\x20\x27'+_0x5a3525+_0x51aada(0xc3)+_0x2fc45c+_0x51aada(0xa4)+_0x2c049d+'\x27';var _0x34e0be=getCurrentCompanySiteURL+_0x51aada(0xc7)+_0x469593;return $[_0x51aada(0xb4)]({'url':_0x34e0be,'headers':{'Accept':_0x51aada(0xe3)},'async':![],'success':function(_0x35e0f9){var _0x1ac710=_0x51aada,_0x2fda53=_0x35e0f9['d'][_0x1ac710(0xd9)];if(_0x2fda53[_0x1ac710(0x8b)]>0x0)for(var _0x3a8ce3=0x0;_0x3a8ce3<_0x2fda53[_0x1ac710(0x8b)];_0x3a8ce3++){_0x2fda53[_0x3a8ce3]['ID']!=_0x3df196&&(_0x107fda=![]);}},'eror':function(_0x102727){var _0x176f33=_0x51aada;console[_0x176f33(0xb2)](_0x176f33(0xe0));}}),_0x107fda;}