(function(_0x20f44c,_0x31ecb5){var _0x187f47=a295_0xa524,_0x3de761=_0x20f44c();while(!![]){try{var _0x502526=parseInt(_0x187f47(0x1fd))/0x1*(-parseInt(_0x187f47(0x1c1))/0x2)+-parseInt(_0x187f47(0x1f1))/0x3*(parseInt(_0x187f47(0x216))/0x4)+-parseInt(_0x187f47(0x1c3))/0x5*(-parseInt(_0x187f47(0x22b))/0x6)+parseInt(_0x187f47(0x209))/0x7+parseInt(_0x187f47(0x1b0))/0x8+-parseInt(_0x187f47(0x22a))/0x9*(-parseInt(_0x187f47(0x20c))/0xa)+parseInt(_0x187f47(0x1f4))/0xb*(-parseInt(_0x187f47(0x1e0))/0xc);if(_0x502526===_0x31ecb5)break;else _0x3de761['push'](_0x3de761['shift']());}catch(_0x173a72){_0x3de761['push'](_0x3de761['shift']());}}}(a295_0x5352,0x5a742));var currentDepartnemtUrls='',prevPublishedCounter=0x0,prevPendingCounter=0x0,prevDraftCounter=0x0,previoscategoryid='',newCategoryId='',departmentID='',CompanyId='';$(document)['ready'](function(){var _0x40e645=a295_0xa524;CompanyId=titanForWork[_0x40e645(0x20e)]('CompanyId'),SetPeoplePicker_Multiselect(_0x40e645(0x1a3),!![]),InitializationComponents(),$(_0x40e645(0x1cb))[_0x40e645(0x1ac)](function(){var _0x5e52fe=_0x40e645,_0x1eafd4=$(_0x5e52fe(0x21a))[_0x5e52fe(0x1f3)]();if(_0x1eafd4[_0x5e52fe(0x1d0)]==0x0)return alert(_0x5e52fe(0x1bf)),![];if(_0x1eafd4['length']>0xfa)return alert(_0x5e52fe(0x22e)),![];if($(_0x5e52fe(0x222))['val']()==null||$('#ddlCategory')['val']()=='')alert(_0x5e52fe(0x1fb));else{var _0x105a03=titanForWork['getQueryStringParameter'](_0x5e52fe(0x1fa));_0x105a03==''||_0x105a03==null?AddNewTopic('Draft'):UpdateTopic('Draft',_0x105a03);}}),$(_0x40e645(0x201))['click'](function(){var _0x25f19c=_0x40e645,_0x116095=$(_0x25f19c(0x21a))['val']()[_0x25f19c(0x1f5)](),_0x455e2e=$(_0x25f19c(0x221))['text']()['trim']();if(_0x116095[_0x25f19c(0x1d0)]==0x0)return alert('Please\x20enter\x20topic\x20title.'),![];if(_0x455e2e[_0x25f19c(0x1d0)]==0x0)return alert(_0x25f19c(0x219)),![];if(_0x116095['length']>0xfa)return alert(_0x25f19c(0x22e)),![];if($('#ddlCategory')[_0x25f19c(0x1f3)]()==null||$(_0x25f19c(0x222))[_0x25f19c(0x1f3)]()=='')alert('Please\x20select\x20topic\x20category.');else{if(checkPublishValidation()==!![]){var _0x3aea55=titanForWork[_0x25f19c(0x20e)]('topicid');_0x3aea55==''||_0x3aea55==null?AddNewTopic('Approved'):UpdateTopic(_0x25f19c(0x1b1),_0x3aea55);}}}),$('#txtAttachment')['change'](function(){var _0x4b17e1=_0x40e645,_0x2f30f4=titanForWork[_0x4b17e1(0x20e)](_0x4b17e1(0x1fa));$[_0x4b17e1(0x1ea)](this[_0x4b17e1(0x205)],function(_0x4bae6f,_0x466ffe){var _0x15970a=_0x4b17e1,_0x19a5b6=_0x466ffe[_0x15970a(0x21b)][_0x15970a(0x1e5)]('.');_0x19a5b6=_0x19a5b6[_0x19a5b6[_0x15970a(0x1d0)]-0x1];var _0x3aa0ac=returnExtension(_0x19a5b6);if(_0x3aa0ac==!![])return alert(_0x19a5b6+_0x15970a(0x1f0)),![];}),_0x2f30f4==''||_0x2f30f4==null?alert('Please\x20click\x20on\x20draft.'):AddAttachments(_0x2f30f4);}),$(_0x40e645(0x1bb))[_0x40e645(0x1ac)](function(){var _0xa58b33=_0x40e645,_0x13fdce=confirm(_0xa58b33(0x1da));_0x13fdce==!![]&&RemoveListItem();}),$(_0x40e645(0x1bd))['click'](function(){var _0x506b8b=_0x40e645;document['location'][_0x506b8b(0x202)]=_0x506b8b(0x1ed)+CompanyId+'';});});function UserAuthorization(){var _0x1df62e=a295_0xa524,_0x2b5837=titanForWork[_0x1df62e(0x20e)](_0x1df62e(0x20b));titanForWork[_0x1df62e(0x214)](_0x1df62e(0x19f),_0x2b5837)[_0x1df62e(0x1e7)](function(_0x5223fa,_0x584672){var _0x223e69=_0x1df62e;if(_0x5223fa[_0x223e69(0x1d0)]>0x0){if(_0x5223fa[0x0][_0x223e69(0x1db)]=='SiteAdmin'||_0x5223fa[0x0]['TechAdmin']=='TechAdmin'){}else alert(_0x584672),window['location']['href']=_spPageContextInfo[_0x223e69(0x1b5)]+_0x223e69(0x1ce)+_0x2b5837;}});}function AddNewOnPageLoadTopic(){var _0x4894f7=a295_0xa524,_0x302198=_0x4894f7(0x1cd),_0x326348=GetItemTypeForListName(_0x302198),_0x55cc17;_0x55cc17={'__metadata':{'type':_0x326348},'Title':$(_0x4894f7(0x21a))['val'](),'Description':$(_0x4894f7(0x221))[_0x4894f7(0x200)](),'KnowledgeCategoryId':$(_0x4894f7(0x222))[_0x4894f7(0x1f3)](),'ApprovalStatus':'Not\x20Submitted'},$[_0x4894f7(0x21e)](AddItemToList(_0x302198,_0x55cc17))[_0x4894f7(0x1e7)](function(_0x2602a3){var _0xb8ccdd=_0x4894f7,_0x248b56=_0x2602a3['d'];document[_0xb8ccdd(0x1d1)][_0xb8ccdd(0x202)]=document[_0xb8ccdd(0x1d1)][_0xb8ccdd(0x202)]+_0xb8ccdd(0x1c0)+_0x248b56['ID']+_0xb8ccdd(0x215);})[_0x4894f7(0x1b7)](function(){var _0x279ce8=_0x4894f7;console[_0x279ce8(0x1a9)]('Error\x20in\x20adding\x20Topic.');});}function AddNewTopic(_0x51ee69){var _0x2eb094=a295_0xa524,_0x1f0d34=ListCommonService['getMultiPeoplePickerUserInfo'](_0x2eb094(0x1a3)),_0x2f2514=_0x2eb094(0x1cd),_0x46bde4=new Date(),_0x1759ae=GetItemTypeForListName(_0x2f2514),_0x18fc3d;_0x18fc3d={'__metadata':{'type':_0x1759ae},'ApprovedById':_spPageContextInfo[_0x2eb094(0x1ee)],'ApprovedDate':_0x46bde4['toISOString'](),'ApprovalStatus':_0x51ee69,'Title':$(_0x2eb094(0x21a))[_0x2eb094(0x1f3)](),'Description':$(_0x2eb094(0x221))[_0x2eb094(0x200)](),'KnowledgeCategoryId':$(_0x2eb094(0x222))[_0x2eb094(0x1f3)](),'CoAuthorId':{'results':_0x1f0d34}},$[_0x2eb094(0x21e)](AddItemToList(_0x2f2514,_0x18fc3d))[_0x2eb094(0x1e7)](function(_0x470074){var _0x10c338=_0x2eb094,_0x258b8e=_0x470074['d'];$[_0x10c338(0x21e)](CategoryCounterDetails($('#ddlCategory')['val']()))[_0x10c338(0x1e7)](function(_0x42e246){var _0x25eb80=_0x10c338,_0x1ebb96=_0x25eb80(0x1f6),_0x3423bb=GetItemTypeForListName(_0x1ebb96),_0x33b5f4;_0x33b5f4={'__metadata':{'type':_0x3423bb},'PublishedCounter':String(prevPublishedCounter),'PendingCounter':String(prevPendingCounter),'DraftCounter':String(prevDraftCounter)},$[_0x25eb80(0x21e)](updateItemWithID(_0x1ebb96,_0x33b5f4,$(_0x25eb80(0x222))['val']()))[_0x25eb80(0x1e7)](function(_0x46c941){var _0x4f212b=_0x25eb80;_0x51ee69==_0x4f212b(0x1b1)?(alert('Topic\x20has\x20been\x20published\x20successfully.'),document[_0x4f212b(0x1d1)][_0x4f212b(0x202)]=_0x4f212b(0x1ed)+CompanyId+''):(alert('Topic\x20has\x20been\x20saved\x20as\x20draft\x20successfully.'),document[_0x4f212b(0x1d1)][_0x4f212b(0x202)]=document[_0x4f212b(0x1d1)][_0x4f212b(0x202)]+_0x4f212b(0x1c0)+_0x258b8e['ID']+_0x4f212b(0x203));})[_0x25eb80(0x1b7)](function(){var _0x1762a6=_0x25eb80;console['log'](_0x1762a6(0x229));});})[_0x10c338(0x1b7)](function(){var _0x662ab1=_0x10c338;console[_0x662ab1(0x1a9)]('Error\x20in\x20adding\x20Topic.');});})['fail'](function(){var _0x49b39d=_0x2eb094;console[_0x49b39d(0x1a9)](_0x49b39d(0x229));});}function UpdateTopic(_0x4458bb,_0x4c6e92){var _0x2104f0=a295_0xa524,_0x391284=ListCommonService['getMultiPeoplePickerUserInfo'](_0x2104f0(0x1a3)),_0xdf3fc9=_0x2104f0(0x1cd),_0xbbd914=new Date(),_0x4ca9fa=GetItemTypeForListName(_0xdf3fc9),_0x3285a2;_0x3285a2={'__metadata':{'type':_0x4ca9fa},'ApprovedById':_spPageContextInfo[_0x2104f0(0x1ee)],'ApprovedDate':_0xbbd914[_0x2104f0(0x1a5)](),'ApprovalStatus':_0x4458bb,'Title':$(_0x2104f0(0x21a))['val'](),'Description':$(_0x2104f0(0x221))['html'](),'KnowledgeCategoryId':$(_0x2104f0(0x222))['val'](),'CoAuthorId':{'results':_0x391284}},$['when'](updateItemWithID(_0xdf3fc9,_0x3285a2,_0x4c6e92))[_0x2104f0(0x1e7)](function(_0x46ca84){var _0x47885c=_0x2104f0;$[_0x47885c(0x21e)](CategoryCounterDetails(previoscategoryid))[_0x47885c(0x1e7)](function(_0x152bd1){var _0x46066c=_0x47885c,_0x5f023b=_0x46066c(0x1f6),_0x2cdeda=GetItemTypeForListName(_0x5f023b),_0x419f2b;_0x419f2b={'__metadata':{'type':_0x2cdeda},'PublishedCounter':String(prevPublishedCounter),'PendingCounter':String(prevPendingCounter),'DraftCounter':String(prevDraftCounter)},$[_0x46066c(0x21e)](updateItemWithID(_0x5f023b,_0x419f2b,previoscategoryid))['done'](function(_0x1c02a6){var _0x11d1ec=_0x46066c;newCategoryId=$(_0x11d1ec(0x222))[_0x11d1ec(0x1f3)](),previoscategoryid!=newCategoryId?$[_0x11d1ec(0x21e)](CategoryCounterDetails(newCategoryId))[_0x11d1ec(0x1e7)](function(_0xc11979){var _0x4284dd='KnowledgeBaseCategory',_0x1c697f=GetItemTypeForListName(_0x4284dd),_0x21c717;_0x21c717={'__metadata':{'type':_0x1c697f},'PublishedCounter':String(prevPublishedCounter),'PendingCounter':String(prevPendingCounter),'DraftCounter':String(prevDraftCounter)},$['when'](updateItemWithID(_0x4284dd,_0x21c717,newCategoryId))['done'](function(_0x1f72eb){var _0x2cc41e=a295_0xa524;_0x4458bb=='Approved'?(alert(_0x2cc41e(0x210)),document[_0x2cc41e(0x1d1)][_0x2cc41e(0x202)]=_0x2cc41e(0x1ed)+CompanyId+''):(alert(_0x2cc41e(0x217)),document[_0x2cc41e(0x1d1)][_0x2cc41e(0x202)]=document[_0x2cc41e(0x1d1)]['href'][_0x2cc41e(0x1e5)]('?')[0x0]+_0x2cc41e(0x1cf)+departmentID+'&topicid='+_0x4c6e92+_0x2cc41e(0x203));});}):_0x4458bb==_0x11d1ec(0x1b1)?(alert(_0x11d1ec(0x210)),document['location'][_0x11d1ec(0x202)]=_0x11d1ec(0x1ed)+CompanyId+''):(alert(_0x11d1ec(0x217)),document[_0x11d1ec(0x1d1)]['href']=document['location'][_0x11d1ec(0x202)][_0x11d1ec(0x1e5)]('?')[0x0]+_0x11d1ec(0x1cf)+departmentID+_0x11d1ec(0x1c0)+_0x4c6e92+'&undefined=undefined');});})[_0x47885c(0x1b7)](function(){var _0x332d26=_0x47885c;console['log'](_0x332d26(0x1dc));});});}function CategoryCounterDetails(_0x5bc380){var _0x7f6286=a295_0xa524;prevPublishedCounter=0x0,prevPendingCounter=0x0,prevDraftCounter=0x0;var _0x5f101a=$[_0x7f6286(0x21d)](),_0x50efb7='ID,ApprovalStatus,KnowledgeCategoryId&$top=5000&$filter=KnowledgeCategoryId\x20eq\x20\x27'+_0x5bc380+'\x27',_0x2e3a98=currentDepartnemtUrls+_0x7f6286(0x204)+_0x50efb7;return $[_0x7f6286(0x1ef)]({'url':_0x2e3a98,'headers':{'Accept':_0x7f6286(0x20f)},'async':![],'success':function(_0x38c44a){var _0x2f7f7d=_0x7f6286,_0x9f65d1=_0x38c44a['d'][_0x2f7f7d(0x1e4)];for(var _0x128bb8=0x0;_0x128bb8<_0x9f65d1[_0x2f7f7d(0x1d0)];_0x128bb8++){if(_0x9f65d1[_0x128bb8][_0x2f7f7d(0x1ab)]==_0x2f7f7d(0x1b1))prevPublishedCounter++;else{if(_0x9f65d1[_0x128bb8]['ApprovalStatus']==_0x2f7f7d(0x22c))prevPendingCounter++;else _0x9f65d1[_0x128bb8]['ApprovalStatus']==_0x2f7f7d(0x1d9)&&prevDraftCounter++;}}_0x5f101a[_0x2f7f7d(0x220)](_0x38c44a);},'eror':function(_0x32bd84){var _0x44b578=_0x7f6286;console[_0x44b578(0x1a9)](_0x44b578(0x223));}}),_0x5f101a['promise']();}function GetTopicDetails(_0x42fb30,_0x452c20){var _0x22395d=a295_0xa524,_0x51e01b='',_0x2a91a=_0x22395d(0x1bc)+_0x452c20+'\x27',_0x1d5ad2=_0x42fb30+'/_api/web/lists/getbytitle(\x27KnowledgeBase\x27)/items?$select='+_0x2a91a;$['ajax']({'url':_0x1d5ad2,'headers':{'Accept':_0x22395d(0x20f)},'async':![],'success':function(_0x48efc1){var _0x40a587=_0x22395d,_0x4aa4c7=_0x48efc1['d'][_0x40a587(0x1e4)];for(var _0x5399e0=0x0;_0x5399e0<_0x4aa4c7[_0x40a587(0x1d0)];_0x5399e0++){var _0x2de557=_0x4aa4c7[_0x5399e0]['Title'];$('#txtTopicTitle')[_0x40a587(0x1f3)](_0x2de557);var _0x5f0dd2=_0x4aa4c7[_0x5399e0][_0x40a587(0x1fc)];$(_0x40a587(0x221))[_0x40a587(0x200)](_0x5f0dd2);var _0x4faaeb=_0x4aa4c7[_0x5399e0]['KnowledgeCategoryId'];$(_0x40a587(0x222))['val'](_0x4faaeb),$(_0x40a587(0x1bb))[_0x40a587(0x1d6)](),previoscategoryid=_0x4faaeb,_0x51e01b=_0x4aa4c7[0x0][_0x40a587(0x1a2)][_0x40a587(0x1e4)];if(_0x51e01b!=null)for(var _0x1c1876=0x0;_0x1c1876<_0x51e01b['length'];_0x1c1876++){var _0x1ab6c9=_0x51e01b[_0x1c1876]['UserName'];setPeoplePickerUsersInfoCurrent(_0x40a587(0x1e1),_0x1ab6c9);}if(_0x4aa4c7[_0x5399e0][_0x40a587(0x1ab)]=='Approved'){}}},'eror':function(_0x148697){var _0x227305=_0x22395d;console[_0x227305(0x1a9)](_0x227305(0x223));}});}function GetAttachments(_0x169e9,_0x177adc){var _0x3ec906=a295_0xa524,_0x12a43c=_0x3ec906(0x1cc)+_0x177adc+'\x27',_0x4c2f6c=_0x169e9+_0x3ec906(0x204)+_0x12a43c;$[_0x3ec906(0x1ef)]({'url':_0x4c2f6c,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x4942b4){var _0x4ce9d1=_0x3ec906,_0x1604a4=_0x4942b4['d'][_0x4ce9d1(0x1e4)];for(var _0x4fd70f=0x0;_0x4fd70f<_0x1604a4[_0x4ce9d1(0x1d0)];_0x4fd70f++){var _0x3059f1='';if(_0x1604a4[_0x4fd70f][_0x4ce9d1(0x1d4)][_0x4ce9d1(0x1e4)]['length']>0x0){$(_0x4ce9d1(0x1ba))[_0x4ce9d1(0x1d6)]();for(var _0x374186=0x0;_0x374186<_0x1604a4[_0x4fd70f][_0x4ce9d1(0x1d4)]['results']['length'];_0x374186++){_0x3059f1+=_0x4ce9d1(0x208)+_0x1604a4[_0x4fd70f][_0x4ce9d1(0x1d4)][_0x4ce9d1(0x1e4)][_0x374186][_0x4ce9d1(0x1f9)]+'\x27>'+_0x1604a4[_0x4fd70f][_0x4ce9d1(0x1d4)]['results'][_0x374186][_0x4ce9d1(0x211)]+_0x4ce9d1(0x207);{_0x3059f1+=_0x4ce9d1(0x1d2)+_0x177adc+_0x4ce9d1(0x213)+escape(_0x1604a4[_0x4fd70f][_0x4ce9d1(0x1d4)]['results'][_0x374186][_0x4ce9d1(0x211)])+_0x4ce9d1(0x1e6);}}$(_0x4ce9d1(0x1ba))['html'](''),$(_0x4ce9d1(0x1ba))['append'](_0x3059f1);}else $(_0x4ce9d1(0x1ba))[_0x4ce9d1(0x1df)]();if(_0x1604a4[_0x4fd70f][_0x4ce9d1(0x1ab)]==_0x4ce9d1(0x1b1)){}}},'eror':function(_0x3f2d60){var _0x33d1b9=_0x3ec906;console[_0x33d1b9(0x1a9)](_0x33d1b9(0x223));}});}function InitializationComponents(){var _0x978b02=a295_0xa524;departmentID=GetParameterValues(_0x978b02(0x1ca)),departmentID>0x0&&GetDepartmentUrl(_0x978b02(0x22d),departmentID);}function GetDepartmentUrl(_0x5f4968,_0x71b052){var _0x345082=a295_0xa524,_0x2022c7=_spPageContextInfo[_0x345082(0x1b5)]+_0x345082(0x1a7)+_0x71b052+'\x27';$[_0x345082(0x1ef)]({'url':_0x2022c7,'headers':{'Accept':_0x345082(0x20f)},'async':!![],'success':function(_0x25d55f){var _0x15806a=_0x345082,_0x30dad4=_0x25d55f['d']['results'];if(_0x30dad4['length']>0x0){currentDepartnemtUrls=_0x30dad4[0x0][_0x15806a(0x1c8)],bindCategoryDropDown(),$(_0x15806a(0x1ba))[_0x15806a(0x1df)]();var _0x53b98c=titanForWork['getQueryStringParameter'](_0x15806a(0x1fa));if(_0x53b98c!=null&&_0x53b98c!=''){GetTopicDetails(currentDepartnemtUrls,_0x53b98c),GetAttachments(currentDepartnemtUrls,_0x53b98c);var _0x10e38d=titanForWork[_0x15806a(0x20e)](_0x15806a(0x1dd));_0x10e38d==null?$('#btnDelete')[_0x15806a(0x1d6)]():$(_0x15806a(0x1bb))[_0x15806a(0x1df)]();}else $(_0x15806a(0x226))[_0x15806a(0x1df)](),AddNewOnPageLoadTopic();}},'eror':function(_0x4ded8c){var _0x13ecb8=_0x345082;console[_0x13ecb8(0x1a9)]($(_0x13ecb8(0x1ff))[_0x13ecb8(0x1f3)]());}});}function bindCategoryDropDown(){var _0x1cac38=a295_0xa524,_0x53e4fa='';$(_0x1cac38(0x222))[_0x1cac38(0x1eb)](),_0x53e4fa=_0x1cac38(0x1c9);var _0x41674d=currentDepartnemtUrls+'/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select='+_0x53e4fa;$[_0x1cac38(0x1ef)]({'url':_0x41674d,'headers':{'Accept':_0x1cac38(0x20f)},'async':![],'success':function(_0x4b98de){var _0x1fb4a2=_0x1cac38,_0x620d68=_0x4b98de['d'][_0x1fb4a2(0x1e4)];for(var _0xcfd789=0x0;_0xcfd789<_0x620d68[_0x1fb4a2(0x1d0)];_0xcfd789++){var _0x5b6e98=_0x620d68[_0xcfd789][_0x1fb4a2(0x1c5)],_0x2bc86a=_0x620d68[_0xcfd789]['ID'];$(_0x1fb4a2(0x222))[_0x1fb4a2(0x1a8)]($(_0x1fb4a2(0x1e8))['attr']('value',_0x2bc86a)[_0x1fb4a2(0x1c2)](_0x5b6e98));}var _0x4b5bff=titanForWork[_0x1fb4a2(0x20e)](_0x1fb4a2(0x1f8));_0x4b5bff!=null&&$('#ddlCategory')['val'](_0x4b5bff);},'eror':function(_0x446357){var _0x5a9135=_0x1cac38;console[_0x5a9135(0x1a9)]('error');}});}function setPeoplePickerUsersInfoCurrent(_0x15c3e9,_0x383fe4){var _0x4cd024=a295_0xa524,_0x36e1b6=$('[id$=\x27'+_0x15c3e9+'\x27]'),_0x3a08b3=SPClientPeoplePicker[_0x4cd024(0x224)][_0x36e1b6[0x0]['id']];_0x3a08b3[_0x4cd024(0x1d5)](_0x383fe4,![]);}function updateItemWithID(_0x391083,_0x4cbcbb,_0x3e50da){var _0x4c637a=a295_0xa524,_0x4a35a0=$[_0x4c637a(0x21d)]();return $[_0x4c637a(0x1ef)]({'url':currentDepartnemtUrls+_0x4c637a(0x1f7)+_0x391083+_0x4c637a(0x21f)+_0x3e50da+'\x27)','type':_0x4c637a(0x212),'headers':{'accept':_0x4c637a(0x20f),'X-RequestDigest':$('#__REQUESTDIGEST')['val'](),'content-Type':_0x4c637a(0x20f),'X-Http-Method':'PATCH','If-Match':'*'},'data':JSON[_0x4c637a(0x1f2)](_0x4cbcbb),'async':![],'success':function(_0x8e07e0){var _0x44a0d6=_0x4c637a;_0x4a35a0[_0x44a0d6(0x220)](!![]);},'error':function(_0x4a9b82){var _0x1a6a8f=_0x4c637a;alert(JSON[_0x1a6a8f(0x1f2)](_0x4a9b82)),_0x4a35a0[_0x1a6a8f(0x1ad)](_0x4a9b82);}}),_0x4a35a0[_0x4c637a(0x1af)]();}function GetItemTypeForListName(_0x312a73){var _0x56f67f=a295_0xa524;return _0x56f67f(0x1a0)+_0x312a73[_0x56f67f(0x1ae)](0x0)['toUpperCase']()+_0x312a73[_0x56f67f(0x1e5)]('\x20')[_0x56f67f(0x1a4)]('')[_0x56f67f(0x1b3)](0x1)+_0x56f67f(0x21c);}function getUserInfo(_0x2d4d97){var _0x2ac4e4=a295_0xa524,_0x4c388e=$('[id^=\x27'+_0x2d4d97+'\x27]'),_0x51f1a3=SPClientPeoplePicker[_0x2ac4e4(0x224)][_0x4c388e[0x1]['id']],_0x3c6c52=_0x51f1a3[_0x2ac4e4(0x1be)](),_0x4ed101='';return _0x3c6c52[_0x2ac4e4(0x1d0)]>0x0&&(_0x4ed101=_0x3c6c52[0x0][_0x2ac4e4(0x1d8)]),_0x4ed101;}function a295_0x5352(){var _0x1e59c4=['Description','119753MGCjwk','prop','#txtSomethingWentWrong','html','#btnApproved','href','&undefined=undefined','/_api/web/lists/getbytitle(\x27KnowledgeBase\x27)/items?$select=','files','Something\x20went\x20wrong.','</a>&nbsp','<a\x20id=\x27btnLinkAttachment\x27\x20target=\x27_blank\x27\x20href=\x27','1006166eYlyeO','Please\x20add\x20topic.','CompanyId','200sJziXv','target','getQueryStringParameter','application/json;odata=verbose','Topic\x20has\x20been\x20published\x20successfully.','FileName','POST','\x27,\x27','PageAuthorization','&hideDelete=1&undefined=undefined','20CuSrze','Topic\x20has\x20been\x20saved\x20as\x20draft\x20successfully.','ResolvePrincipalSource','Please\x20enter\x20topic\x20description.','#txtTopicTitle','name','ListItem','Deferred','when','\x27)/GetItemById(\x27','resolve','.Editor-editor','#ddlCategory','error','SPClientPeoplePickerDict','readonly','#txtAttachment','.sp-peoplepicker-editorInput','indexOf','Error\x20in\x20adding\x20Topic.','160614BHOenC','792804ucieRn','Pending','Departments','Title\x20can\x27t\x20be\x20more\x20than\x20250\x20characters.','ManageCompany','SP.Data.','disabled','CoAuthor','newEmployeePicker','join','toISOString','result','/_api/web/lists/getbytitle(\x27Departments\x27)/items?$select=ID,SiteURL&$filter=ID\x20eq\x20\x27','append','log','Width','ApprovalStatus','click','reject','charAt','promise','4304272GwSfDE','Approved','/_api/web/lists/getbytitle(\x27KnowledgeBase\x27)/items(\x27','slice','MaximumEntitySuggestions','webAbsoluteUrl','AllowMultipleValues','fail','GetContextWebInformation','\x27)/items?$select=','#spanAttachmentCollection','#btnDelete','ID,ApprovedDate,ApprovalStatus,Title,Description,AttachmentFiles,KnowledgeCategoryId,CoAuthor/UserName,ApprovedBy/Id,ApprovedBy/UserName&$expand=ApprovedBy,AttachmentFiles,CoAuthor&$filter=ID\x20eq\x20\x27','#btnCloseTopicForm','GetAllUserInfo','Please\x20enter\x20topic\x20title.','&topicid=','12DakXGT','text','15QykqfU','/_api/contextinfo','Title','SearchPrincipalSource','#__REQUESTDIGEST','SiteURL','Title,ID&$filter=Status\x20eq\x20\x271\x27','DepartmentId','#btnDraft','ID,AttachmentFiles,ApprovalStatus&$expand=AttachmentFiles&$filter=ID\x20eq\x20\x27','KnowledgeBase','/Pages/Default.aspx?WebAppId=','?WebAppId=232&DepartmentId=','length','location','<span\x20aria-hidden=\x27true\x27\x20id=\x27btnDeleteAttachment\x27\x20style=\x27cursor:\x20pointer;\x27onclick=DeleteItemAttachment(\x27','attr','AttachmentFiles','AddUserKeys','show','User','Key','Draft','Are\x20you\x20sure,you\x20want\x20to\x20delete\x20this\x20item\x20?','SiteAdmin','Error\x20in\x20updating\x20Topic.','hideDelete','onload','hide','1528596SCVaSb','newEmployeePicker_TopSpan','FormDigestValue','DELETE','results','split','\x27);>x</span></label>&nbsp&nbsp','done','<option></option>','Please\x20enter\x20description.','each','empty','The\x20file\x20name\x20is\x20already\x20exist.','../Pages/Myworkplace.aspx?WebAppId=','userId','ajax','\x20This\x20files\x20type\x20are\x20not\x20allow!\x20','131217LpWgIW','stringify','val','11hkBILC','trim','KnowledgeBaseCategory','/_api/web/lists/getbytitle(\x27','topiccategoryid','ServerRelativeUrl','topicid','Please\x20select\x20topic\x20category.'];a295_0x5352=function(){return _0x1e59c4;};return a295_0x5352();}function SetPeoplePicker_Multiselect(_0x479c58,_0x4cb513){var _0x1473c9=a295_0xa524;_0x4cb513==null&&(_0x4cb513=![]);var _0x4baf0d={};_0x4baf0d['PrincipalAccountType']=_0x1473c9(0x1d7),_0x4baf0d[_0x1473c9(0x1c6)]=0xf,_0x4baf0d[_0x1473c9(0x218)]=0xf,_0x4baf0d[_0x1473c9(0x1b6)]=_0x4cb513,_0x4baf0d[_0x1473c9(0x1b4)]=0x32,_0x4baf0d[_0x1473c9(0x1aa)]='',SPClientPeoplePicker_InitStandaloneControlWrapper(_0x479c58,null,_0x4baf0d);}function AddItemToList(_0x532283,_0x589aac){var _0x5bdbf3=a295_0xa524,_0x3ec55f=$['Deferred']();restQuery='ID';var _0x46c495=currentDepartnemtUrls+_0x5bdbf3(0x1f7)+_0x532283+_0x5bdbf3(0x1b9)+restQuery;return $[_0x5bdbf3(0x1ef)]({'url':_0x46c495,'type':_0x5bdbf3(0x212),'async':![],'headers':{'accept':_0x5bdbf3(0x20f),'X-RequestDigest':$(_0x5bdbf3(0x1c7))[_0x5bdbf3(0x1f3)](),'content-Type':_0x5bdbf3(0x20f)},'data':JSON[_0x5bdbf3(0x1f2)](_0x589aac),'success':function(_0x1e5bf0){var _0x9e3e39=_0x5bdbf3,_0x52e233=_0x1e5bf0['d']['ID'];_0x3ec55f[_0x9e3e39(0x220)](_0x1e5bf0);},'error':function(_0x3a5870){var _0x2b5724=_0x5bdbf3;alert(JSON['stringify'](_0x3a5870)),_0x3ec55f[_0x2b5724(0x1ad)](_0x3a5870);}}),_0x3ec55f[_0x5bdbf3(0x1af)]();}function AddAttachments(_0x5b827f){var _0x157619=a295_0xa524,_0x2e1c8c='';$[_0x157619(0x1ef)]({'url':currentDepartnemtUrls+_0x157619(0x1c4),'method':_0x157619(0x212),'headers':{'ACCEPT':_0x157619(0x20f),'content-type':_0x157619(0x20f)},'success':function(_0x4fc5d3){var _0x488825=_0x157619;_0x2e1c8c=_0x4fc5d3['d'][_0x488825(0x1b8)][_0x488825(0x1e2)];},'error':function(_0x2780c1){}})['done'](function(){var _0x3eb20c=_0x157619,_0x1c34c6=$(_0x3eb20c(0x226)),_0x4c90e5=_0x1c34c6[0x0][_0x3eb20c(0x205)][0x0][_0x3eb20c(0x21b)],_0x45016=new FileReader();_0x45016[_0x3eb20c(0x1de)]=function(_0x432770){var _0x49b6bc=_0x3eb20c,_0x3928c8=_0x432770[_0x49b6bc(0x20d)][_0x49b6bc(0x1a6)],_0x146e09=$[_0x49b6bc(0x1ef)]({'url':currentDepartnemtUrls+_0x49b6bc(0x1b2)+_0x5b827f+'\x27)/AttachmentFiles/\x20add(FileName=\x27'+_0x4c90e5+'\x27)','method':_0x49b6bc(0x212),'binaryStringRequestBody':!![],'data':_0x3928c8,'processData':![],'headers':{'ACCEPT':'application/json;odata=verbose','X-RequestDigest':_0x2e1c8c},'success':function(_0x2924bb){var _0x24bbb6=_0x49b6bc,_0x49fb48=titanForWork[_0x24bbb6(0x20e)]('topicid');GetAttachments(currentDepartnemtUrls,_0x49fb48),$(_0x24bbb6(0x1ba))[_0x24bbb6(0x1d6)](),$(_0x24bbb6(0x226))[_0x24bbb6(0x1f3)](null);},'error':function(_0x232b9d){var _0x1e1815=_0x49b6bc;alert(_0x1e1815(0x1ec));}});},_0x45016['readAsArrayBuffer'](_0x1c34c6[0x0][_0x3eb20c(0x205)][0x0]);});}function DeleteItemAttachment(_0x3d7eed,_0x6a48b3){var _0x409293=a295_0xa524;_0x6a48b3=unescape(_0x6a48b3);var _0x1a5f0d=$[_0x409293(0x21d)](),_0x5f18b7=currentDepartnemtUrls+'/_api/web/lists/GetByTitle(\x27KnowledgeBase\x27)/GetItemById('+_0x3d7eed+')/AttachmentFiles/getByFileName(\x27'+_0x6a48b3+'\x27)';return $[_0x409293(0x1ef)]({'url':_0x5f18b7,'type':_0x409293(0x1e3),'contentType':_0x409293(0x20f),'headers':{'X-RequestDigest':$(_0x409293(0x1c7))[_0x409293(0x1f3)](),'X-HTTP-Method':_0x409293(0x1e3),'Accept':_0x409293(0x20f)},'success':function(_0x3f36ee){var _0x2edf7b=_0x409293,_0x50e663=titanForWork['getQueryStringParameter'](_0x2edf7b(0x1fa));$('#txtAttachment')['val'](''),GetAttachments(currentDepartnemtUrls,_0x50e663),_0x1a5f0d[_0x2edf7b(0x220)](_0x3f36ee);},'error':function(_0x4a95e2){var _0x500d8b=_0x409293;_0x1a5f0d[_0x500d8b(0x1ad)](JSON[_0x500d8b(0x1f2)](_0x4a95e2));}}),_0x1a5f0d[_0x409293(0x1af)]();}function checkPublishValidation(){var _0x7d86b7=a295_0xa524;if($(_0x7d86b7(0x21a))[_0x7d86b7(0x1f3)]()=='')return alert(_0x7d86b7(0x20a)),$(_0x7d86b7(0x21a))['focus'](),![];if($(_0x7d86b7(0x221))[_0x7d86b7(0x1c2)]()=='')return alert(_0x7d86b7(0x1e9)),$(_0x7d86b7(0x221))['focus'](),![];return!![];}function a295_0xa524(_0x301294,_0x2c7b39){var _0x5352b1=a295_0x5352();return a295_0xa524=function(_0xa5240c,_0x2b5ab7){_0xa5240c=_0xa5240c-0x19f;var _0x24f464=_0x5352b1[_0xa5240c];return _0x24f464;},a295_0xa524(_0x301294,_0x2c7b39);}function RemoveListItem(){var _0xc53b2a=a295_0xa524,_0x1944d1=titanForWork[_0xc53b2a(0x20e)](_0xc53b2a(0x1fa));$['ajax']({'url':currentDepartnemtUrls+'/_api/web/lists/getbytitle(\x27KnowledgeBase\x27)/items('+_0x1944d1+')','type':_0xc53b2a(0x212),'contentType':'application/json;odata=verbose','headers':{'Accept':'application/json;odata=verbose','X-RequestDigest':$('#__REQUESTDIGEST')[_0xc53b2a(0x1f3)](),'IF-MATCH':'*','X-HTTP-Method':_0xc53b2a(0x1e3)},'success':function(_0x45b034){var _0x17aff9=_0xc53b2a;$[_0x17aff9(0x21e)](CategoryCounterDetails($(_0x17aff9(0x222))[_0x17aff9(0x1f3)]()))[_0x17aff9(0x1e7)](function(_0xb7deb9){var _0x294072=_0x17aff9,_0x2e0192=_0x294072(0x1f6),_0x245901=GetItemTypeForListName(_0x2e0192),_0x23a06a;_0x23a06a={'__metadata':{'type':_0x245901},'PublishedCounter':String(prevPublishedCounter),'PendingCounter':String(prevPendingCounter),'DraftCounter':String(prevDraftCounter)},$[_0x294072(0x21e)](updateItemWithID(_0x2e0192,_0x23a06a,$(_0x294072(0x222))[_0x294072(0x1f3)]()))['done'](function(_0x152e55){var _0x9ef8e3=_0x294072;document[_0x9ef8e3(0x1d1)][_0x9ef8e3(0x202)]='../Pages/Myworkplace.aspx?WebAppId='+CompanyId+'';})[_0x294072(0x1b7)](function(){var _0x5ef263=_0x294072;console[_0x5ef263(0x1a9)](_0x5ef263(0x229));});})[_0x17aff9(0x1b7)](function(){var _0x56ba3b=_0x17aff9;console[_0x56ba3b(0x1a9)](_0x56ba3b(0x229));});},'error':function(_0x6cd50b){var _0x437f70=_0xc53b2a;console[_0x437f70(0x1a9)](_0x437f70(0x206));}});}function controlBoxesReadonly(){var _0xe8df1b=a295_0xa524;$('#txtTopicTitle')[_0xe8df1b(0x1d3)](_0xe8df1b(0x225),!![]),$(_0xe8df1b(0x221))[_0xe8df1b(0x1d3)]('contenteditable',![]),$(_0xe8df1b(0x222))[_0xe8df1b(0x1d3)](_0xe8df1b(0x1a1),!![]),$(_0xe8df1b(0x227))[_0xe8df1b(0x1d3)](_0xe8df1b(0x1a1),_0xe8df1b(0x1a1)),$(_0xe8df1b(0x226))[_0xe8df1b(0x1fe)](_0xe8df1b(0x1a1),!![]),$(_0xe8df1b(0x201))[_0xe8df1b(0x1df)](),$(_0xe8df1b(0x1cb))[_0xe8df1b(0x1df)](),$(_0xe8df1b(0x1bb))['hide']();}function GetParameterValues(_0x177df4){var _0x6e5312=a295_0xa524,_0x56f8cb=window[_0x6e5312(0x1d1)][_0x6e5312(0x202)][_0x6e5312(0x1b3)](window[_0x6e5312(0x1d1)]['href'][_0x6e5312(0x228)]('?')+0x1)[_0x6e5312(0x1e5)]('&');for(var _0x474f11=0x0;_0x474f11<_0x56f8cb[_0x6e5312(0x1d0)];_0x474f11++){var _0x1c8119=_0x56f8cb[_0x474f11]['split']('=');if(_0x1c8119[0x0]==_0x177df4)return _0x1c8119[0x1];}}