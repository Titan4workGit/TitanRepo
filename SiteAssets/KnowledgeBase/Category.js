var a282_0x3ebf31=a282_0x404c;(function(_0x3a4863,_0x9c43e6){var _0x3fee42=a282_0x404c,_0x30d6d2=_0x3a4863();while(!![]){try{var _0x4f7ffc=-parseInt(_0x3fee42(0xca))/0x1+-parseInt(_0x3fee42(0xb9))/0x2*(-parseInt(_0x3fee42(0xbc))/0x3)+-parseInt(_0x3fee42(0xc3))/0x4*(parseInt(_0x3fee42(0xbe))/0x5)+-parseInt(_0x3fee42(0xf2))/0x6*(parseInt(_0x3fee42(0x10f))/0x7)+-parseInt(_0x3fee42(0xda))/0x8*(parseInt(_0x3fee42(0x119))/0x9)+-parseInt(_0x3fee42(0xfa))/0xa*(-parseInt(_0x3fee42(0xb7))/0xb)+parseInt(_0x3fee42(0x10e))/0xc*(parseInt(_0x3fee42(0x118))/0xd);if(_0x4f7ffc===_0x9c43e6)break;else _0x30d6d2['push'](_0x30d6d2['shift']());}catch(_0x31a53a){_0x30d6d2['push'](_0x30d6d2['shift']());}}}(a282_0x5b12,0xc9ca6));var currentDepartnemtUrls='',categoryId='',departmentID='',isCurrentUserAuthorizedtoKnowledgeAdmin=![];function a282_0x5b12(){var _0x5aa8d6=['</tr>','<span\x20class=\x22action-delete-button\x22><a\x20onclick=DeleteItemCategory(\x22','../Pages/Topics.aspx?WebAppId=232&DepartmentId=','unbind','append','toUpperCase','show','Please\x20enter\x20category.','Category\x20name\x20is\x20already\x20exist.','application/json;odata=verbose','3888JJGEIe','14rrcsuo','click','resolve','#btnAddCateg','fail','<label\x20class=\x22switch\x22>','prop','Title','promise','101569glUbme','9tCiAcP','<td>','<thead>','Are\x20you\x20sure,You\x20want\x20to\x20delete\x20this\x20category\x20?','CompanyId','/_api/web/lists/getbytitle(\x27','ID,Modified,Status,Title&$filter=Title\x20eq\x20\x27','<tr>','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Status\x22>Status</th>','join','\x22)><i\x20class=\x22fa\x20fa-trash\x22></i></a></span>','#myModal','#btnAddNewTopic','3245USUYSv','reject','2518pOqaHk','log','stringify','45lErVXj','when','1782465FbBYNS','&undefined=undefined','</tbody>','Error\x20in\x20Category\x20Topic.','#__REQUESTDIGEST','8ZGzMYe','&topiccategoryid=','val','length','webAbsoluteUrl','DELETE','push','1144502xwTNzL','ready','Departments','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Published\x22>Published</th>','POST','hide','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22LastUpdated\x22>Last\x20Updated</th>','done','ajax','<td><span\x20class=\x22action-edit-button\x22><a\x20onclick=OpenUpdateModalPopup(\x22',')\x22>','Knowledge','#categoryListItems','\x22,\x22','html','../Pages/AddKnowledge.aspx?WebAppId=232&DepartmentId=','1068792WSCaYG','getQueryStringParameter','Modified','</td>','/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select=','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Action\x22>Action</th>','PendingCounter','<td><a\x20style=\x22cursor:pointer\x22\x20onclick=\x22RedirectOnCategoryTopics(','error','\x22\x20type=\x22checkbox\x22\x20','modal','Deferred','#txtSomethingWentWrong','ListItem','trim','#deptName','Description','#txtCategory','slice','href','results','input[id^=\x27chkItemStatus_\x27]','<a></td>','Category\x20has\x20been\x20updated\x20successfully.','1122018GmqpKD','PATCH','\x27)/items?$select=','indexOf','checked','remove','split','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Category\x22>Category</th>','21740ZTTolZ','</table>','location','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Draft\x22>Draft</th>','KnowledgeBaseCategory','ajaxSetup','charAt','DepartmentId','<span\x20class=\x22slider\x20round\x22></span></label></td>','\x22)><i\x20class=\x22fa\x20fa-edit\x22></i></a></span>'];a282_0x5b12=function(){return _0x5aa8d6;};return a282_0x5b12();}$(document)[a282_0x3ebf31(0xcb)](function(){var _0x5617e5=a282_0x3ebf31;userActivityNotificationEntry(_spPageContextInfo['userId'],window[_0x5617e5(0xfc)]),$[_0x5617e5(0xff)]({'cache':![]}),departmentID=GetParameterValues(_0x5617e5(0x101));Logged_DepartmentId==departmentID?$('#btnAddNewTopic')[_0x5617e5(0x10a)]():$(_0x5617e5(0xb6))[_0x5617e5(0xcf)]();var _0x27dfa6=titanForWork[_0x5617e5(0xdb)](_0x5617e5(0xae)),_0x2ae527=new Array();_0x2ae527[_0x5617e5(0xc9)]('Knowledge');var _0x409f80=UserExistInProcessApprover(_0x27dfa6,departmentID,_0x2ae527);for(var _0x10cdbe=0x0;_0x10cdbe<_0x409f80[_0x5617e5(0xc6)];_0x10cdbe++){_0x409f80[_0x10cdbe]['webPartName']==_0x5617e5(0xd5)&&(isCurrentUserAuthorizedtoKnowledgeAdmin=!![]);}InitializationComponents(),$(_0x5617e5(0x112))['click'](function(){var _0xbac865=_0x5617e5;$('#txtCategory')[_0xbac865(0xc5)](''),$(_0xbac865(0xb5))[_0xbac865(0xe4)](_0xbac865(0x10a));}),$('#btnAddUpdateCategory')[_0x5617e5(0x110)](function(){var _0x1b2afe=_0x5617e5,_0x5a0516=$(_0x1b2afe(0xeb))['val']()[_0x1b2afe(0xe8)]();if(_0x5a0516!=''&&_0x5a0516!=null){var _0x4c1e83=categoryId;CategoryNameValidation(_0x5a0516,_0x4c1e83)==0x0?_0x4c1e83==''||_0x4c1e83==null?AddNewCategory():UpdateCategory(_0x4c1e83):alert(_0x1b2afe(0x10c));}else alert(_0x1b2afe(0x10b));}),$(_0x5617e5(0xb6))[_0x5617e5(0x110)](function(){var _0x105840=_0x5617e5;departmentID>0x0&&(document['location'][_0x105840(0xed)]=_0x105840(0xd9)+departmentID+'&undefined=undefined');}),isCurrentUserAuthorizedtoKnowledgeAdmin==![]&&$('#btnAddCateg')[_0x5617e5(0xf7)]();});function a282_0x404c(_0x4da78e,_0x114bbf){var _0x5b125c=a282_0x5b12();return a282_0x404c=function(_0x404c14,_0x4b238a){_0x404c14=_0x404c14-0xad;var _0x3b1855=_0x5b125c[_0x404c14];return _0x3b1855;},a282_0x404c(_0x4da78e,_0x114bbf);}function InitializationComponents(){var _0x205e0b=a282_0x3ebf31;departmentID>0x0&&GetDepartmentUrl(_0x205e0b(0xcc),departmentID);}function BindStatusChangeEvent(){var _0x2e8c5b=a282_0x3ebf31;$(_0x2e8c5b(0xef))[_0x2e8c5b(0x107)]()['change'](function(){var _0x1cf785=_0x2e8c5b,_0x2f0cad=$(this)['attr']('id'),_0x4ed22e=_0x2f0cad['split']('_')[0x1];$(this)[_0x1cf785(0x115)](_0x1cf785(0xf6))?UpdateCategoryStatus(_0x4ed22e,!![]):UpdateCategoryStatus(_0x4ed22e,![]);});}function AddNewCategory(_0x32444d){var _0x20cec7=a282_0x3ebf31,_0x3fd035='KnowledgeBaseCategory',_0x371ed5=GetItemTypeForListName(_0x3fd035),_0x4b18ee;_0x4b18ee={'__metadata':{'type':_0x371ed5},'Status':!![],'Title':$('#txtCategory')[_0x20cec7(0xc5)]()[_0x20cec7(0xe8)](),'PublishedCounter':'0','PendingCounter':'0','DraftCounter':'0'},$['when'](AddItemToList(_0x3fd035,_0x4b18ee))[_0x20cec7(0xd1)](function(_0x46ede8){var _0x3932fd=_0x20cec7;$(_0x3932fd(0xb5))[_0x3932fd(0xe4)](_0x3932fd(0xcf)),$(_0x3932fd(0xeb))[_0x3932fd(0xc5)](''),GetAllCategory(currentDepartnemtUrls),alert('Category\x20has\x20been\x20added\x20successfully.');})[_0x20cec7(0x113)](function(){var _0xd4accf=_0x20cec7;console['log'](_0xd4accf(0xc1));});;}function UpdateCategory(_0x370f41){var _0xf650b9=a282_0x3ebf31,_0x2db9b5='KnowledgeBaseCategory',_0x268441=GetItemTypeForListName(_0x2db9b5),_0x99934;_0x99934={'__metadata':{'type':_0x268441},'Title':$(_0xf650b9(0xeb))[_0xf650b9(0xc5)]()[_0xf650b9(0xe8)]()},$[_0xf650b9(0xbd)](updateItemWithID(_0x2db9b5,_0x99934,_0x370f41))[_0xf650b9(0xd1)](function(_0x2206e3){var _0x31c252=_0xf650b9;$('#myModal')[_0x31c252(0xe4)](_0x31c252(0xcf)),$(_0x31c252(0xeb))['val'](''),GetAllCategory(currentDepartnemtUrls),alert(_0x31c252(0xf1));})[_0xf650b9(0x113)](function(){var _0x38ce39=_0xf650b9;console[_0x38ce39(0xba)]('Error\x20in\x20Category\x20Topic.');});;}function UpdateCategoryStatus(_0x8df9c5,_0xc74027){var _0x80a007=a282_0x3ebf31,_0x5a77c2=_0x80a007(0xfe),_0xae767=GetItemTypeForListName(_0x5a77c2),_0x4fdb53;_0x4fdb53={'__metadata':{'type':_0xae767},'Status':_0xc74027},$[_0x80a007(0xbd)](updateItemWithID(_0x5a77c2,_0x4fdb53,_0x8df9c5))['done'](function(_0x50bb66){})[_0x80a007(0x113)](function(){var _0x564dd7=_0x80a007;console[_0x564dd7(0xba)]('Error\x20in\x20Category\x20Topic.');});;}function CategoryNameValidation(_0x197b29,_0x11ec5e){var _0x56f91a=a282_0x3ebf31,_0x2a94bd=0x0,_0x5c4464='';_0x11ec5e==''||_0x11ec5e==null?_0x5c4464=_0x56f91a(0xb0)+_0x197b29+'\x27':_0x5c4464='ID,Modified,Status,Title&$filter=Title\x20eq\x20\x27'+_0x197b29+'\x27\x20and\x20ID\x20ne\x20\x27'+_0x11ec5e+'\x27';var _0x469489=currentDepartnemtUrls+_0x56f91a(0xde)+_0x5c4464;return $[_0x56f91a(0xd2)]({'url':_0x469489,'headers':{'Accept':_0x56f91a(0x10d)},'async':![],'success':function(_0x4dfe79){var _0x30afe0=_0x56f91a,_0x546321=_0x4dfe79['d'][_0x30afe0(0xee)];_0x2a94bd=_0x546321[_0x30afe0(0xc6)];},'eror':function(_0xa53a10){var _0x40f489=_0x56f91a;console[_0x40f489(0xba)](_0x40f489(0xe2));}}),_0x2a94bd;}function GetAllCategory(_0x3eb6c5){var _0x96070=a282_0x3ebf31,_0x388407='ID,Modified,Status,Title,PublishedCounter,PendingCounter,DraftCounter&$top=5000&$orderby=Modified\x20desc';isCurrentUserAuthorizedtoKnowledgeAdmin!=!![]&&(_0x388407=_0x388407+'&$filter=Status\x20eq\x20\x271\x27');var _0x458852=_0x3eb6c5+'/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select='+_0x388407;$['ajax']({'url':_0x458852,'headers':{'Accept':_0x96070(0x10d)},'async':![],'success':function(_0x43c2e3){var _0x505027=_0x96070,_0x2070e8=_0x43c2e3['d'][_0x505027(0xee)],_0x33107e='';_0x33107e+='<table\x20class=\x22table\x20table2\x22>',_0x33107e+=_0x505027(0x11b),_0x33107e+=_0x505027(0xb1),_0x33107e+=_0x505027(0xf9),_0x33107e+=_0x505027(0xcd),_0x33107e+=_0x505027(0xfd),_0x33107e+=_0x505027(0xd0);isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0x33107e+=_0x505027(0xb2),_0x33107e+=_0x505027(0xdf));_0x33107e+=_0x505027(0x104),_0x33107e+='</thead>',_0x33107e+='<tbody\x20id=\x22listCollection\x22>';for(var _0x514f4e=0x0;_0x514f4e<_0x2070e8[_0x505027(0xc6)];_0x514f4e++){var _0x4cbe75=_0x2070e8[_0x514f4e][_0x505027(0x116)],_0x5bc353=_0x2070e8[_0x514f4e]['Status'],_0x307ce6='';_0x5bc353==!![]&&(_0x307ce6=_0x505027(0xf6));var _0xf869d6=new Date(_0x2070e8[_0x514f4e][_0x505027(0xdc)]),_0x49917=_0x2070e8[_0x514f4e]['PublishedCounter'];_0x49917==null&&(_0x49917=0x0);var _0x27606b=_0x2070e8[_0x514f4e]['DraftCounter'];_0x27606b==null&&(_0x27606b=0x0);var _0x476c52=_0x2070e8[_0x514f4e][_0x505027(0xe0)];_0x476c52==null&&(_0x476c52=0x0);var _0x4b655a=_0x2070e8[_0x514f4e][_0x505027(0xea)];_0x33107e+=_0x505027(0xb1),_0x33107e+=_0x505027(0xe1)+_0x2070e8[_0x514f4e]['ID']+_0x505027(0xd4)+_0x4cbe75+_0x505027(0xf0),_0x33107e+=_0x505027(0x11a)+_0x49917+_0x505027(0xdd),_0x33107e+=_0x505027(0x11a)+_0x27606b+'</td>',_0x49917+_0x27606b+_0x476c52==0x0?_0x33107e+='<td></td>':_0x33107e+=_0x505027(0x11a)+ShowCommonDateFormat(_0xf869d6)+_0x505027(0xdd),isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0x33107e+='<td>',_0x33107e+=_0x505027(0x114),_0x33107e+='<input\x20id=\x22chkItemStatus_'+_0x2070e8[_0x514f4e]['ID']+_0x505027(0xe3)+_0x307ce6+'>',_0x33107e+=_0x505027(0x102),_0x33107e+=_0x505027(0xd3)+_0x2070e8[_0x514f4e]['ID']+_0x505027(0xd7)+escape(_0x4cbe75)+_0x505027(0x103),_0x49917+_0x27606b+_0x476c52==0x0&&(_0x33107e+=_0x505027(0x105)+_0x2070e8[_0x514f4e]['ID']+_0x505027(0xb4)),_0x33107e+=_0x505027(0xdd)),_0x33107e+=_0x505027(0x104);}_0x33107e+=_0x505027(0xc0),_0x33107e+=_0x505027(0xfb),$(_0x505027(0xd6))[_0x505027(0xd8)](''),$(_0x505027(0xd6))[_0x505027(0x108)](_0x33107e),BindStatusChangeEvent();},'eror':function(_0x46c0ab){var _0xdd2f00=_0x96070;console['log'](_0xdd2f00(0xe2));}});}function GetDepartmentUrl(_0x40ee7e,_0x4f9900){var _0x4e44f0=a282_0x3ebf31,_0x4b4564=_spPageContextInfo[_0x4e44f0(0xc7)]+'/_api/web/lists/getbytitle(\x27Departments\x27)/items?$select=ID,SiteURL,DepartmentName&$filter=ID\x20eq\x20\x27'+_0x4f9900+'\x27';$[_0x4e44f0(0xd2)]({'url':_0x4b4564,'headers':{'Accept':'application/json;odata=verbose'},'async':!![],'success':function(_0x145397){var _0x5b2723=_0x4e44f0,_0x2b29fb=_0x145397['d'][_0x5b2723(0xee)];if(_0x2b29fb[_0x5b2723(0xc6)]>0x0){currentDepartnemtUrls=_0x2b29fb[0x0]['SiteURL'];var _0x3193dc=_0x2b29fb[0x0]['DepartmentName'];$(_0x5b2723(0xe9))[_0x5b2723(0xd8)](_0x3193dc),GetAllCategory(currentDepartnemtUrls);}},'eror':function(_0x5ab0fc){var _0x235dd8=_0x4e44f0;console['log']($(_0x235dd8(0xe6))[_0x235dd8(0xc5)]());}});}function updateItemWithID(_0x3f96f1,_0x17f1c4,_0x19c686){var _0x25da37=a282_0x3ebf31,_0x2d0b26=$[_0x25da37(0xe5)]();return $[_0x25da37(0xd2)]({'url':currentDepartnemtUrls+_0x25da37(0xaf)+_0x3f96f1+'\x27)/GetItemById(\x27'+_0x19c686+'\x27)','type':_0x25da37(0xce),'headers':{'accept':_0x25da37(0x10d),'X-RequestDigest':$(_0x25da37(0xc2))[_0x25da37(0xc5)](),'content-Type':_0x25da37(0x10d),'X-Http-Method':_0x25da37(0xf3),'If-Match':'*'},'data':JSON[_0x25da37(0xbb)](_0x17f1c4),'async':![],'success':function(_0x59e4e5){var _0x1084b2=_0x25da37;_0x2d0b26[_0x1084b2(0x111)](!![]);},'error':function(_0x4e5c94){var _0x5e6153=_0x25da37;alert(JSON[_0x5e6153(0xbb)](_0x4e5c94)),_0x2d0b26[_0x5e6153(0xb8)](_0x4e5c94);}}),_0x2d0b26[_0x25da37(0x117)]();}function GetItemTypeForListName(_0x3d77bc){var _0x302c6d=a282_0x3ebf31;return'SP.Data.'+_0x3d77bc[_0x302c6d(0x100)](0x0)[_0x302c6d(0x109)]()+_0x3d77bc['split']('\x20')[_0x302c6d(0xb3)]('')[_0x302c6d(0xec)](0x1)+_0x302c6d(0xe7);}function AddItemToList(_0x118bc3,_0x187380){var _0x594c62=a282_0x3ebf31,_0x4aa4b9=$[_0x594c62(0xe5)]();restQuery='ID';var _0xd27b91=currentDepartnemtUrls+'/_api/web/lists/getbytitle(\x27'+_0x118bc3+_0x594c62(0xf4)+restQuery;return $['ajax']({'url':_0xd27b91,'type':_0x594c62(0xce),'async':![],'headers':{'accept':_0x594c62(0x10d),'X-RequestDigest':$(_0x594c62(0xc2))['val'](),'content-Type':'application/json;odata=verbose'},'data':JSON[_0x594c62(0xbb)](_0x187380),'success':function(_0xb7f32b){var _0x3cd675=_0x594c62,_0xbb661=_0xb7f32b['d']['ID'];_0x4aa4b9[_0x3cd675(0x111)](_0xb7f32b);},'error':function(_0x1f38ea){var _0xe68eb6=_0x594c62;alert(JSON['stringify'](_0x1f38ea)),_0x4aa4b9[_0xe68eb6(0xb8)](_0x1f38ea);}}),_0x4aa4b9[_0x594c62(0x117)]();}function DeleteItemCategory(_0x2edc49){var _0x3aabf7=a282_0x3ebf31,_0x55123b=confirm(_0x3aabf7(0xad));if(_0x55123b==!![]){var _0xc7cf2e=$[_0x3aabf7(0xe5)](),_0x3db45f=currentDepartnemtUrls+'/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items('+_0x2edc49+')';return $[_0x3aabf7(0xd2)]({'url':_0x3db45f,'type':'DELETE','contentType':_0x3aabf7(0x10d),'headers':{'Accept':_0x3aabf7(0x10d),'X-RequestDigest':$(_0x3aabf7(0xc2))[_0x3aabf7(0xc5)](),'IF-MATCH':'*','X-HTTP-Method':_0x3aabf7(0xc8)},'success':function(_0x308583){var _0x6b58d6=_0x3aabf7;GetAllCategory(currentDepartnemtUrls),_0xc7cf2e[_0x6b58d6(0x111)](_0x308583);},'error':function(_0x2dc50e){var _0x1158f7=_0x3aabf7;_0xc7cf2e[_0x1158f7(0xb8)](JSON[_0x1158f7(0xbb)](_0x2dc50e));}}),_0xc7cf2e[_0x3aabf7(0x117)]();}}function OpenUpdateModalPopup(_0x9d5073,_0x601cea){var _0x209ead=a282_0x3ebf31;categoryId=_0x9d5073,_0x601cea=unescape(_0x601cea),$('#txtCategory')[_0x209ead(0xc5)](_0x601cea),$(_0x209ead(0xb5))[_0x209ead(0xe4)](_0x209ead(0x10a));}function RedirectOnCategoryTopics(_0x442e78){var _0x231b8d=a282_0x3ebf31;departmentID>0x0&&(document['location'][_0x231b8d(0xed)]=_0x231b8d(0x106)+departmentID+_0x231b8d(0xc4)+_0x442e78+_0x231b8d(0xbf));}function GetParameterValues(_0x530981){var _0x14ec96=a282_0x3ebf31,_0x106242=window[_0x14ec96(0xfc)][_0x14ec96(0xed)]['slice'](window[_0x14ec96(0xfc)]['href'][_0x14ec96(0xf5)]('?')+0x1)[_0x14ec96(0xf8)]('&');for(var _0x43f0ba=0x0;_0x43f0ba<_0x106242[_0x14ec96(0xc6)];_0x43f0ba++){var _0x1c1516=_0x106242[_0x43f0ba][_0x14ec96(0xf8)]('=');if(_0x1c1516[0x0]==_0x530981)return _0x1c1516[0x1];}}