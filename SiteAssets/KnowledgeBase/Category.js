var a296_0xfffba0=a296_0x4211;(function(_0x597ce1,_0xb31687){var _0x218bf9=a296_0x4211,_0x3d0043=_0x597ce1();while(!![]){try{var _0xd9c451=parseInt(_0x218bf9(0x173))/0x1*(parseInt(_0x218bf9(0x1bb))/0x2)+parseInt(_0x218bf9(0x18b))/0x3+-parseInt(_0x218bf9(0x14f))/0x4+-parseInt(_0x218bf9(0x185))/0x5+-parseInt(_0x218bf9(0x194))/0x6*(parseInt(_0x218bf9(0x162))/0x7)+-parseInt(_0x218bf9(0x17f))/0x8*(-parseInt(_0x218bf9(0x1ae))/0x9)+-parseInt(_0x218bf9(0x1b6))/0xa*(-parseInt(_0x218bf9(0x1ba))/0xb);if(_0xd9c451===_0xb31687)break;else _0x3d0043['push'](_0x3d0043['shift']());}catch(_0x2ae60b){_0x3d0043['push'](_0x3d0043['shift']());}}}(a296_0x3337,0x696ec));var currentDepartnemtUrls='',categoryId='',departmentID='',isCurrentUserAuthorizedtoKnowledgeAdmin=![];$(document)[a296_0xfffba0(0x163)](function(){var _0x3e6939=a296_0xfffba0;userActivityNotificationEntry(_spPageContextInfo[_0x3e6939(0x17b)],window[_0x3e6939(0x1a4)]),$[_0x3e6939(0x186)]({'cache':![]}),departmentID=GetParameterValues(_0x3e6939(0x150));Logged_DepartmentId==departmentID?$(_0x3e6939(0x159))[_0x3e6939(0x14b)]():$(_0x3e6939(0x159))[_0x3e6939(0x179)]();var _0x3fb846=titanForWork[_0x3e6939(0x15b)](_0x3e6939(0x1a2)),_0x24d02f=new Array();_0x24d02f['push'](_0x3e6939(0x183));var _0x225553=UserExistInProcessApprover(_0x3fb846,departmentID,_0x24d02f);for(var _0x22a355=0x0;_0x22a355<_0x225553['length'];_0x22a355++){_0x225553[_0x22a355][_0x3e6939(0x15d)]==_0x3e6939(0x183)&&(isCurrentUserAuthorizedtoKnowledgeAdmin=!![]);}InitializationComponents(),$(_0x3e6939(0x191))[_0x3e6939(0x17d)](function(){var _0xf97e23=_0x3e6939;$(_0xf97e23(0x14e))[_0xf97e23(0x195)](''),$(_0xf97e23(0x197))[_0xf97e23(0x1bd)](_0xf97e23(0x14b));}),$(_0x3e6939(0x170))[_0x3e6939(0x17d)](function(){var _0x4dc822=_0x3e6939,_0x188c9a=$(_0x4dc822(0x14e))['val']()[_0x4dc822(0x19d)]();if(_0x188c9a!=''&&_0x188c9a!=null){var _0x139f35=categoryId;CategoryNameValidation(_0x188c9a,_0x139f35)==0x0?_0x139f35==''||_0x139f35==null?AddNewCategory():UpdateCategory(_0x139f35):alert(_0x4dc822(0x1af));}else alert(_0x4dc822(0x17e));}),$(_0x3e6939(0x159))[_0x3e6939(0x17d)](function(){var _0xa4edcc=_0x3e6939;departmentID>0x0&&(document[_0xa4edcc(0x1a4)]['href']=_0xa4edcc(0x1b0)+departmentID+_0xa4edcc(0x1bc));}),isCurrentUserAuthorizedtoKnowledgeAdmin==![]&&$('#btnAddCateg')[_0x3e6939(0x1a9)]();});function InitializationComponents(){var _0x385e1d=a296_0xfffba0;departmentID>0x0&&GetDepartmentUrl(_0x385e1d(0x169),departmentID);}function BindStatusChangeEvent(){var _0x5f42a1=a296_0xfffba0;$(_0x5f42a1(0x16f))[_0x5f42a1(0x187)]()['change'](function(){var _0x3fe60a=_0x5f42a1,_0x4a5f6a=$(this)[_0x3fe60a(0x193)]('id'),_0x44e310=_0x4a5f6a['split']('_')[0x1];$(this)[_0x3fe60a(0x16c)](_0x3fe60a(0x152))?UpdateCategoryStatus(_0x44e310,!![]):UpdateCategoryStatus(_0x44e310,![]);});}function AddNewCategory(_0x42d6c8){var _0x248f08=a296_0xfffba0,_0x245696=_0x248f08(0x16d),_0x445d16=GetItemTypeForListName(_0x245696),_0x75f378;_0x75f378={'__metadata':{'type':_0x445d16},'Status':!![],'Title':$(_0x248f08(0x14e))[_0x248f08(0x195)]()['trim'](),'PublishedCounter':'0','PendingCounter':'0','DraftCounter':'0'},$[_0x248f08(0x161)](AddItemToList(_0x245696,_0x75f378))['done'](function(_0x2475c0){var _0x4b0ae9=_0x248f08;$('#myModal')[_0x4b0ae9(0x1bd)](_0x4b0ae9(0x179)),$(_0x4b0ae9(0x14e))[_0x4b0ae9(0x195)](''),GetAllCategory(currentDepartnemtUrls),alert('Category\x20has\x20been\x20added\x20successfully.');})[_0x248f08(0x1ab)](function(){var _0x1ac56b=_0x248f08;console[_0x1ac56b(0x192)](_0x1ac56b(0x153));});;}function UpdateCategory(_0x4e304f){var _0x44f7bd=a296_0xfffba0,_0x476425=_0x44f7bd(0x16d),_0xcc49af=GetItemTypeForListName(_0x476425),_0x1fb155;_0x1fb155={'__metadata':{'type':_0xcc49af},'Title':$(_0x44f7bd(0x14e))[_0x44f7bd(0x195)]()[_0x44f7bd(0x19d)]()},$[_0x44f7bd(0x161)](updateItemWithID(_0x476425,_0x1fb155,_0x4e304f))[_0x44f7bd(0x1b8)](function(_0x2af624){var _0x2595ce=_0x44f7bd;$(_0x2595ce(0x197))[_0x2595ce(0x1bd)](_0x2595ce(0x179)),$(_0x2595ce(0x14e))[_0x2595ce(0x195)](''),GetAllCategory(currentDepartnemtUrls),alert(_0x2595ce(0x1b5));})['fail'](function(){var _0x17d027=_0x44f7bd;console[_0x17d027(0x192)](_0x17d027(0x153));});;}function a296_0x4211(_0x36b0be,_0x44034){var _0x333729=a296_0x3337();return a296_0x4211=function(_0x421182,_0x260f83){_0x421182=_0x421182-0x14b;var _0x58834f=_0x333729[_0x421182];return _0x58834f;},a296_0x4211(_0x36b0be,_0x44034);}function a296_0x3337(){var _0x452c2a=['<td>','&topiccategoryid=','27cxTtpL','Category\x20name\x20is\x20already\x20exist.','../Pages/AddKnowledge.aspx?WebAppId=232&DepartmentId=','</table>','slice','<tr>','ListItem','Category\x20has\x20been\x20updated\x20successfully.','10LHGZKF','PublishedCounter','done','Are\x20you\x20sure,You\x20want\x20to\x20delete\x20this\x20category\x20?','1304105BYvPjj','2FbyQYt','&undefined=undefined','modal','SP.Data.','<td><span\x20class=\x22action-edit-button\x22><a\x20onclick=OpenUpdateModalPopup(\x22','<tbody\x20id=\x22listCollection\x22>','Title','show','\x27)/GetItemById(\x27','href','#txtCategory','1189672IVTyMa','DepartmentId','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Category\x22>Category</th>','checked','Error\x20in\x20Category\x20Topic.','#__REQUESTDIGEST','webAbsoluteUrl','</td>','DELETE','<input\x20id=\x22chkItemStatus_','#btnAddNewTopic','DepartmentName','getQueryStringParameter','<table\x20class=\x22table\x20table2\x22>','webPartName','join','<a></td>','error','when','63vnJYbm','ready','charAt','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Published\x22>Published</th>','POST','\x22\x20type=\x22checkbox\x22\x20','\x27)/items?$select=','Departments','<label\x20class=\x22switch\x22>','#txtSomethingWentWrong','prop','KnowledgeBaseCategory','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22LastUpdated\x22>Last\x20Updated</th>','input[id^=\x27chkItemStatus_\x27]','#btnAddUpdateCategory','resolve','stringify','126254kcCgrv','\x22)><i\x20class=\x22fa\x20fa-edit\x22></i></a></span>','promise','#categoryListItems','html','/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items(','hide','DraftCounter','userId','length','click','Please\x20enter\x20category.','1678648jKZrZs','SiteURL','../Pages/Topics.aspx?WebAppId=232&DepartmentId=','Modified','Knowledge','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Action\x22>Action</th>','1992550nJTlIl','ajaxSetup','unbind','#deptName','ajax','Deferred','1574160ZMGzXn','<td></td>','\x22,\x22','</tr>','ID,Modified,Status,Title&$filter=Title\x20eq\x20\x27','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Status\x22>Status</th>','#btnAddCateg','log','attr','180828wEJRHO','val','Status','#myModal','reject','PendingCounter','<span\x20class=\x22slider\x20round\x22></span></label></td>','<td><a\x20style=\x22cursor:pointer\x22\x20onclick=\x22RedirectOnCategoryTopics(','application/json;odata=verbose','trim','/_api/web/lists/getbytitle(\x27Departments\x27)/items?$select=ID,SiteURL,DepartmentName&$filter=ID\x20eq\x20\x27',')\x22>','Description','/_api/web/lists/getbytitle(\x27','CompanyId','</tbody>','location','<thead>','append','\x27\x20and\x20ID\x20ne\x20\x27','results','remove','split','fail'];a296_0x3337=function(){return _0x452c2a;};return a296_0x3337();}function UpdateCategoryStatus(_0x2cb6cb,_0x52c8af){var _0x55e468=a296_0xfffba0,_0x2aa299=_0x55e468(0x16d),_0x38d1e4=GetItemTypeForListName(_0x2aa299),_0x3af830;_0x3af830={'__metadata':{'type':_0x38d1e4},'Status':_0x52c8af},$[_0x55e468(0x161)](updateItemWithID(_0x2aa299,_0x3af830,_0x2cb6cb))[_0x55e468(0x1b8)](function(_0x3132dd){})[_0x55e468(0x1ab)](function(){var _0x153b81=_0x55e468;console[_0x153b81(0x192)]('Error\x20in\x20Category\x20Topic.');});;}function CategoryNameValidation(_0x4f1df8,_0x2b9d4d){var _0x3a9ee4=a296_0xfffba0,_0x3d2138=0x0,_0x39dc95='';_0x2b9d4d==''||_0x2b9d4d==null?_0x39dc95=_0x3a9ee4(0x18f)+_0x4f1df8+'\x27':_0x39dc95=_0x3a9ee4(0x18f)+_0x4f1df8+_0x3a9ee4(0x1a7)+_0x2b9d4d+'\x27';var _0x171660=currentDepartnemtUrls+'/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select='+_0x39dc95;return $[_0x3a9ee4(0x189)]({'url':_0x171660,'headers':{'Accept':_0x3a9ee4(0x19c)},'async':![],'success':function(_0xd8a327){var _0x41f819=_0x3a9ee4,_0x2439e2=_0xd8a327['d'][_0x41f819(0x1a8)];_0x3d2138=_0x2439e2[_0x41f819(0x17c)];},'eror':function(_0x36eb37){var _0x3164a8=_0x3a9ee4;console[_0x3164a8(0x192)](_0x3164a8(0x160));}}),_0x3d2138;}function GetAllCategory(_0xf6772c){var _0x31caf5=a296_0xfffba0,_0x2f55cb='ID,Modified,Status,Title,PublishedCounter,PendingCounter,DraftCounter&$top=5000&$orderby=Modified\x20desc';isCurrentUserAuthorizedtoKnowledgeAdmin!=!![]&&(_0x2f55cb=_0x2f55cb+'&$filter=Status\x20eq\x20\x271\x27');var _0x2b81c8=_0xf6772c+'/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select='+_0x2f55cb;$[_0x31caf5(0x189)]({'url':_0x2b81c8,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x2d0d4b){var _0x32443b=_0x31caf5,_0x49dc71=_0x2d0d4b['d'][_0x32443b(0x1a8)],_0x20c75b='';_0x20c75b+=_0x32443b(0x15c),_0x20c75b+=_0x32443b(0x1a5),_0x20c75b+=_0x32443b(0x1b3),_0x20c75b+=_0x32443b(0x151),_0x20c75b+=_0x32443b(0x165),_0x20c75b+='<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Draft\x22>Draft</th>',_0x20c75b+=_0x32443b(0x16e);isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0x20c75b+=_0x32443b(0x190),_0x20c75b+=_0x32443b(0x184));_0x20c75b+=_0x32443b(0x18e),_0x20c75b+='</thead>',_0x20c75b+=_0x32443b(0x1c0);for(var _0x389c82=0x0;_0x389c82<_0x49dc71[_0x32443b(0x17c)];_0x389c82++){var _0x4823e5=_0x49dc71[_0x389c82][_0x32443b(0x1c1)],_0x2a6b84=_0x49dc71[_0x389c82][_0x32443b(0x196)],_0x5ca151='';_0x2a6b84==!![]&&(_0x5ca151=_0x32443b(0x152));var _0x127c86=new Date(_0x49dc71[_0x389c82][_0x32443b(0x182)]),_0x3fde87=_0x49dc71[_0x389c82][_0x32443b(0x1b7)];_0x3fde87==null&&(_0x3fde87=0x0);var _0xfdb8d2=_0x49dc71[_0x389c82][_0x32443b(0x17a)];_0xfdb8d2==null&&(_0xfdb8d2=0x0);var _0x248755=_0x49dc71[_0x389c82][_0x32443b(0x199)];_0x248755==null&&(_0x248755=0x0);var _0x108e87=_0x49dc71[_0x389c82][_0x32443b(0x1a0)];_0x20c75b+='<tr>',_0x20c75b+=_0x32443b(0x19b)+_0x49dc71[_0x389c82]['ID']+_0x32443b(0x19f)+_0x4823e5+_0x32443b(0x15f),_0x20c75b+='<td>'+_0x3fde87+'</td>',_0x20c75b+=_0x32443b(0x1ac)+_0xfdb8d2+_0x32443b(0x156),_0x3fde87+_0xfdb8d2+_0x248755==0x0?_0x20c75b+=_0x32443b(0x18c):_0x20c75b+='<td>'+ShowCommonDateFormat(_0x127c86)+_0x32443b(0x156),isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0x20c75b+=_0x32443b(0x1ac),_0x20c75b+=_0x32443b(0x16a),_0x20c75b+=_0x32443b(0x158)+_0x49dc71[_0x389c82]['ID']+_0x32443b(0x167)+_0x5ca151+'>',_0x20c75b+=_0x32443b(0x19a),_0x20c75b+=_0x32443b(0x1bf)+_0x49dc71[_0x389c82]['ID']+_0x32443b(0x18d)+escape(_0x4823e5)+_0x32443b(0x174),_0x3fde87+_0xfdb8d2+_0x248755==0x0&&(_0x20c75b+='<span\x20class=\x22action-delete-button\x22><a\x20onclick=DeleteItemCategory(\x22'+_0x49dc71[_0x389c82]['ID']+'\x22)><i\x20class=\x22fa\x20fa-trash\x22></i></a></span>'),_0x20c75b+=_0x32443b(0x156)),_0x20c75b+=_0x32443b(0x18e);}_0x20c75b+=_0x32443b(0x1a3),_0x20c75b+=_0x32443b(0x1b1),$(_0x32443b(0x176))[_0x32443b(0x177)](''),$(_0x32443b(0x176))[_0x32443b(0x1a6)](_0x20c75b),BindStatusChangeEvent();},'eror':function(_0x4c05ce){var _0x53c7d0=_0x31caf5;console[_0x53c7d0(0x192)]('error');}});}function GetDepartmentUrl(_0x1e636a,_0x1979ad){var _0xdae136=a296_0xfffba0,_0x54c464=_spPageContextInfo[_0xdae136(0x155)]+_0xdae136(0x19e)+_0x1979ad+'\x27';$[_0xdae136(0x189)]({'url':_0x54c464,'headers':{'Accept':_0xdae136(0x19c)},'async':!![],'success':function(_0x2abdfd){var _0xe2a72=_0xdae136,_0x5a9ba1=_0x2abdfd['d'][_0xe2a72(0x1a8)];if(_0x5a9ba1[_0xe2a72(0x17c)]>0x0){currentDepartnemtUrls=_0x5a9ba1[0x0][_0xe2a72(0x180)];var _0x1cc4e3=_0x5a9ba1[0x0][_0xe2a72(0x15a)];$(_0xe2a72(0x188))[_0xe2a72(0x177)](_0x1cc4e3),GetAllCategory(currentDepartnemtUrls);}},'eror':function(_0x83f82c){var _0x41b1f7=_0xdae136;console[_0x41b1f7(0x192)]($(_0x41b1f7(0x16b))[_0x41b1f7(0x195)]());}});}function updateItemWithID(_0x2d6aab,_0x49fbf1,_0x4728ec){var _0x549865=a296_0xfffba0,_0x17ea2c=$[_0x549865(0x18a)]();return $[_0x549865(0x189)]({'url':currentDepartnemtUrls+'/_api/web/lists/getbytitle(\x27'+_0x2d6aab+_0x549865(0x14c)+_0x4728ec+'\x27)','type':_0x549865(0x166),'headers':{'accept':'application/json;odata=verbose','X-RequestDigest':$(_0x549865(0x154))[_0x549865(0x195)](),'content-Type':_0x549865(0x19c),'X-Http-Method':'PATCH','If-Match':'*'},'data':JSON[_0x549865(0x172)](_0x49fbf1),'async':![],'success':function(_0x523f78){var _0xfd32b=_0x549865;_0x17ea2c[_0xfd32b(0x171)](!![]);},'error':function(_0x302a31){var _0x120ddc=_0x549865;alert(JSON[_0x120ddc(0x172)](_0x302a31)),_0x17ea2c[_0x120ddc(0x198)](_0x302a31);}}),_0x17ea2c[_0x549865(0x175)]();}function GetItemTypeForListName(_0x3b32f7){var _0x14d1c3=a296_0xfffba0;return _0x14d1c3(0x1be)+_0x3b32f7[_0x14d1c3(0x164)](0x0)['toUpperCase']()+_0x3b32f7[_0x14d1c3(0x1aa)]('\x20')[_0x14d1c3(0x15e)]('')['slice'](0x1)+_0x14d1c3(0x1b4);}function AddItemToList(_0x30fcc7,_0x5b18c4){var _0x10fbda=a296_0xfffba0,_0x50533c=$['Deferred']();restQuery='ID';var _0x25ee6c=currentDepartnemtUrls+_0x10fbda(0x1a1)+_0x30fcc7+_0x10fbda(0x168)+restQuery;return $['ajax']({'url':_0x25ee6c,'type':_0x10fbda(0x166),'async':![],'headers':{'accept':_0x10fbda(0x19c),'X-RequestDigest':$('#__REQUESTDIGEST')['val'](),'content-Type':_0x10fbda(0x19c)},'data':JSON[_0x10fbda(0x172)](_0x5b18c4),'success':function(_0x53c734){var _0x54115a=_0x53c734['d']['ID'];_0x50533c['resolve'](_0x53c734);},'error':function(_0x5171a9){var _0x17958b=_0x10fbda;alert(JSON[_0x17958b(0x172)](_0x5171a9)),_0x50533c[_0x17958b(0x198)](_0x5171a9);}}),_0x50533c[_0x10fbda(0x175)]();}function DeleteItemCategory(_0x4c7adc){var _0x6675c6=a296_0xfffba0,_0xbb200b=confirm(_0x6675c6(0x1b9));if(_0xbb200b==!![]){var _0x15e40c=$[_0x6675c6(0x18a)](),_0x38a46d=currentDepartnemtUrls+_0x6675c6(0x178)+_0x4c7adc+')';return $[_0x6675c6(0x189)]({'url':_0x38a46d,'type':_0x6675c6(0x157),'contentType':_0x6675c6(0x19c),'headers':{'Accept':'application/json;odata=verbose','X-RequestDigest':$(_0x6675c6(0x154))['val'](),'IF-MATCH':'*','X-HTTP-Method':_0x6675c6(0x157)},'success':function(_0xcd5491){var _0x334743=_0x6675c6;GetAllCategory(currentDepartnemtUrls),_0x15e40c[_0x334743(0x171)](_0xcd5491);},'error':function(_0x19e520){var _0x24a312=_0x6675c6;_0x15e40c[_0x24a312(0x198)](JSON['stringify'](_0x19e520));}}),_0x15e40c[_0x6675c6(0x175)]();}}function OpenUpdateModalPopup(_0x3effbb,_0x3aab8){var _0x2b35bf=a296_0xfffba0;categoryId=_0x3effbb,_0x3aab8=unescape(_0x3aab8),$(_0x2b35bf(0x14e))[_0x2b35bf(0x195)](_0x3aab8),$(_0x2b35bf(0x197))[_0x2b35bf(0x1bd)](_0x2b35bf(0x14b));}function RedirectOnCategoryTopics(_0x232cbf){var _0x2fb1e5=a296_0xfffba0;departmentID>0x0&&(document[_0x2fb1e5(0x1a4)][_0x2fb1e5(0x14d)]=_0x2fb1e5(0x181)+departmentID+_0x2fb1e5(0x1ad)+_0x232cbf+'&undefined=undefined');}function GetParameterValues(_0x3bb568){var _0x36c7f7=a296_0xfffba0,_0x5ccf0d=window[_0x36c7f7(0x1a4)][_0x36c7f7(0x14d)][_0x36c7f7(0x1b2)](window[_0x36c7f7(0x1a4)]['href']['indexOf']('?')+0x1)['split']('&');for(var _0x4e831a=0x0;_0x4e831a<_0x5ccf0d['length'];_0x4e831a++){var _0x4b66ae=_0x5ccf0d[_0x4e831a]['split']('=');if(_0x4b66ae[0x0]==_0x3bb568)return _0x4b66ae[0x1];}}