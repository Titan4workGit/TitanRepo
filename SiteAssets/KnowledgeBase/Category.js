var a1_0x5ac098=a1_0x27f3;(function(_0x408906,_0xa94db6){var _0x5b33bb=a1_0x27f3,_0x31d939=_0x408906();while(!![]){try{var _0x47649b=parseInt(_0x5b33bb(0x18c))/0x1*(parseInt(_0x5b33bb(0x16d))/0x2)+parseInt(_0x5b33bb(0x182))/0x3*(parseInt(_0x5b33bb(0x190))/0x4)+parseInt(_0x5b33bb(0x170))/0x5+parseInt(_0x5b33bb(0x19d))/0x6*(-parseInt(_0x5b33bb(0x13f))/0x7)+-parseInt(_0x5b33bb(0x187))/0x8*(-parseInt(_0x5b33bb(0x17f))/0x9)+-parseInt(_0x5b33bb(0x15f))/0xa*(-parseInt(_0x5b33bb(0x150))/0xb)+-parseInt(_0x5b33bb(0x197))/0xc*(parseInt(_0x5b33bb(0x199))/0xd);if(_0x47649b===_0xa94db6)break;else _0x31d939['push'](_0x31d939['shift']());}catch(_0x251b2e){_0x31d939['push'](_0x31d939['shift']());}}}(a1_0x4872,0xa6651));var currentDepartnemtUrls='',categoryId='',departmentID='',isCurrentUserAuthorizedtoKnowledgeAdmin=![];$(document)[a1_0x5ac098(0x17b)](function(){var _0x1d5a59=a1_0x5ac098;userActivityNotificationEntry(_spPageContextInfo[_0x1d5a59(0x172)],window[_0x1d5a59(0x147)]),$[_0x1d5a59(0x194)]({'cache':![]}),departmentID=GetParameterValues(_0x1d5a59(0x18a));Logged_DepartmentId==departmentID?$(_0x1d5a59(0x178))[_0x1d5a59(0x1a9)]():$('#btnAddNewTopic')[_0x1d5a59(0x169)]();var _0x299089=titanForWork[_0x1d5a59(0x17e)]('CompanyId'),_0x5935a3=new Array();_0x5935a3[_0x1d5a59(0x180)]('Knowledge');var _0x5d7d59=UserExistInProcessApprover(_0x299089,departmentID,_0x5935a3);for(var _0x1ca43e=0x0;_0x1ca43e<_0x5d7d59[_0x1d5a59(0x189)];_0x1ca43e++){_0x5d7d59[_0x1ca43e][_0x1d5a59(0x15d)]=='Knowledge'&&(isCurrentUserAuthorizedtoKnowledgeAdmin=!![]);}InitializationComponents(),$(_0x1d5a59(0x146))[_0x1d5a59(0x175)](function(){var _0x560fe0=_0x1d5a59;$(_0x560fe0(0x19a))[_0x560fe0(0x193)](''),$(_0x560fe0(0x17a))[_0x560fe0(0x139)](_0x560fe0(0x1a9));}),$(_0x1d5a59(0x19f))['click'](function(){var _0x4f9971=_0x1d5a59,_0x521969=$(_0x4f9971(0x19a))[_0x4f9971(0x193)]()['trim']();if(_0x521969!=''&&_0x521969!=null){var _0x1b6473=categoryId;CategoryNameValidation(_0x521969,_0x1b6473)==0x0?_0x1b6473==''||_0x1b6473==null?AddNewCategory():UpdateCategory(_0x1b6473):alert(_0x4f9971(0x1a3));}else alert(_0x4f9971(0x141));}),$(_0x1d5a59(0x178))[_0x1d5a59(0x175)](function(){var _0x273f90=_0x1d5a59;departmentID>0x0&&(document[_0x273f90(0x147)][_0x273f90(0x176)]=_0x273f90(0x1aa)+departmentID+'&undefined=undefined');}),isCurrentUserAuthorizedtoKnowledgeAdmin==![]&&$(_0x1d5a59(0x146))[_0x1d5a59(0x155)]();});function InitializationComponents(){var _0x2ef88a=a1_0x5ac098;departmentID>0x0&&GetDepartmentUrl(_0x2ef88a(0x1a5),departmentID);}function a1_0x4872(){var _0x1acb8f=['<td></td>','<thead>','click','href','PendingCounter','#btnAddNewTopic','results','#myModal','ready','/_api/web/lists/getbytitle(\x27','\x27)/items?$select=','getQueryStringParameter','3470589xIvUaA','push','\x27\x20and\x20ID\x20ne\x20\x27','136233RXxbwB','toUpperCase','#__REQUESTDIGEST','trim','error','16cCfPbe','DepartmentName','length','DepartmentId','</thead>','334bYtZYf','ID,Modified,Status,Title&$filter=Title\x20eq\x20\x27','<span\x20class=\x22action-delete-button\x22><a\x20onclick=DeleteItemCategory(\x22','append','4pxuzye','Category\x20has\x20been\x20added\x20successfully.','Category\x20has\x20been\x20updated\x20successfully.','val','ajaxSetup','join','fail','92244tyuEme','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Action\x22>Action</th>','247mrIKWH','#txtCategory','SP.Data.','SiteURL','5562822gRLjkx','</td>','#btnAddUpdateCategory','../Pages/Topics.aspx?WebAppId=232&DepartmentId=','done','KnowledgeBaseCategory','Category\x20name\x20is\x20already\x20exist.','ListItem','Departments','Are\x20you\x20sure,You\x20want\x20to\x20delete\x20this\x20category\x20?','<tbody\x20id=\x22listCollection\x22>','log','show','../Pages/AddKnowledge.aspx?WebAppId=232&DepartmentId=','<td><span\x20class=\x22action-edit-button\x22><a\x20onclick=OpenUpdateModalPopup(\x22','charAt','PATCH','modal','/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select=','promise','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Draft\x22>Draft</th>','stringify','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Published\x22>Published</th>','7QZYjaa','DraftCounter','Please\x20enter\x20category.','/_api/web/lists/getbytitle(\x27Departments\x27)/items?$select=ID,SiteURL,DepartmentName&$filter=ID\x20eq\x20\x27','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22LastUpdated\x22>Last\x20Updated</th>','when','<td>','#btnAddCateg','location','<td><a\x20style=\x22cursor:pointer\x22\x20onclick=\x22RedirectOnCategoryTopics(','split','\x22)><i\x20class=\x22fa\x20fa-trash\x22></i></a></span>','\x27)/GetItemById(\x27','webAbsoluteUrl','POST','reject','</table>','36927WfkwVL','ajax','</tbody>','html','Description','remove','DELETE','resolve','Error\x20in\x20Category\x20Topic.',')\x22>','indexOf','\x22,\x22','slice','webPartName','#deptName','20coennK','</tr>','unbind','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Status\x22>Status</th>','attr','checked','application/json;odata=verbose','input[id^=\x27chkItemStatus_\x27]','#txtSomethingWentWrong','<a></td>','hide','<label\x20class=\x22switch\x22>','Title','Deferred','1022bOutTo','<input\x20id=\x22chkItemStatus_','PublishedCounter','3803510WNJdzb','/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items(','userId'];a1_0x4872=function(){return _0x1acb8f;};return a1_0x4872();}function BindStatusChangeEvent(){var _0x379668=a1_0x5ac098;$(_0x379668(0x166))[_0x379668(0x161)]()['change'](function(){var _0x34a40f=_0x379668,_0x25b3c6=$(this)[_0x34a40f(0x163)]('id'),_0x1b05d2=_0x25b3c6['split']('_')[0x1];$(this)['prop'](_0x34a40f(0x164))?UpdateCategoryStatus(_0x1b05d2,!![]):UpdateCategoryStatus(_0x1b05d2,![]);});}function AddNewCategory(_0x421ec7){var _0x186e2a=a1_0x5ac098,_0xfeda73='KnowledgeBaseCategory',_0x3b510f=GetItemTypeForListName(_0xfeda73),_0x218400;_0x218400={'__metadata':{'type':_0x3b510f},'Status':!![],'Title':$(_0x186e2a(0x19a))[_0x186e2a(0x193)]()[_0x186e2a(0x185)](),'PublishedCounter':'0','PendingCounter':'0','DraftCounter':'0'},$[_0x186e2a(0x144)](AddItemToList(_0xfeda73,_0x218400))[_0x186e2a(0x1a1)](function(_0x463bb4){var _0x3e97c8=_0x186e2a;$(_0x3e97c8(0x17a))['modal'](_0x3e97c8(0x169)),$(_0x3e97c8(0x19a))[_0x3e97c8(0x193)](''),GetAllCategory(currentDepartnemtUrls),alert(_0x3e97c8(0x191));})[_0x186e2a(0x196)](function(){var _0x150986=_0x186e2a;console[_0x150986(0x1a8)](_0x150986(0x158));});;}function UpdateCategory(_0x2f04d8){var _0x5a4929=a1_0x5ac098,_0x341756=_0x5a4929(0x1a2),_0x350315=GetItemTypeForListName(_0x341756),_0x3211b9;_0x3211b9={'__metadata':{'type':_0x350315},'Title':$(_0x5a4929(0x19a))['val']()[_0x5a4929(0x185)]()},$[_0x5a4929(0x144)](updateItemWithID(_0x341756,_0x3211b9,_0x2f04d8))['done'](function(_0x1ac25e){var _0x49c427=_0x5a4929;$(_0x49c427(0x17a))[_0x49c427(0x139)](_0x49c427(0x169)),$(_0x49c427(0x19a))[_0x49c427(0x193)](''),GetAllCategory(currentDepartnemtUrls),alert(_0x49c427(0x192));})[_0x5a4929(0x196)](function(){var _0x32a6a6=_0x5a4929;console[_0x32a6a6(0x1a8)](_0x32a6a6(0x158));});;}function UpdateCategoryStatus(_0x427234,_0x4071dd){var _0x406428=a1_0x5ac098,_0x4dd7ea=_0x406428(0x1a2),_0x5117d4=GetItemTypeForListName(_0x4dd7ea),_0x373eeb;_0x373eeb={'__metadata':{'type':_0x5117d4},'Status':_0x4071dd},$[_0x406428(0x144)](updateItemWithID(_0x4dd7ea,_0x373eeb,_0x427234))[_0x406428(0x1a1)](function(_0x569633){})[_0x406428(0x196)](function(){var _0xc29a75=_0x406428;console[_0xc29a75(0x1a8)](_0xc29a75(0x158));});;}function a1_0x27f3(_0x6df0,_0x40150b){var _0x48727a=a1_0x4872();return a1_0x27f3=function(_0x27f36b,_0x2f6db1){_0x27f36b=_0x27f36b-0x136;var _0x1c940b=_0x48727a[_0x27f36b];return _0x1c940b;},a1_0x27f3(_0x6df0,_0x40150b);}function CategoryNameValidation(_0x350f79,_0x52d686){var _0x816b6c=a1_0x5ac098,_0x6ba440=0x0,_0x73cf16='';_0x52d686==''||_0x52d686==null?_0x73cf16='ID,Modified,Status,Title&$filter=Title\x20eq\x20\x27'+_0x350f79+'\x27':_0x73cf16=_0x816b6c(0x18d)+_0x350f79+_0x816b6c(0x181)+_0x52d686+'\x27';var _0x2bda7c=currentDepartnemtUrls+'/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select='+_0x73cf16;return $[_0x816b6c(0x151)]({'url':_0x2bda7c,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x2fdda4){var _0x5d167a=_0x816b6c,_0x3a2bf2=_0x2fdda4['d'][_0x5d167a(0x179)];_0x6ba440=_0x3a2bf2[_0x5d167a(0x189)];},'eror':function(_0x294132){var _0x2a70a7=_0x816b6c;console[_0x2a70a7(0x1a8)](_0x2a70a7(0x186));}}),_0x6ba440;}function GetAllCategory(_0x288eea){var _0x1a3769=a1_0x5ac098,_0x1d5371='ID,Modified,Status,Title,PublishedCounter,PendingCounter,DraftCounter&$top=5000&$orderby=Modified\x20desc';isCurrentUserAuthorizedtoKnowledgeAdmin!=!![]&&(_0x1d5371=_0x1d5371+'&$filter=Status\x20eq\x20\x271\x27');var _0x7ec3fc=_0x288eea+_0x1a3769(0x13a)+_0x1d5371;$[_0x1a3769(0x151)]({'url':_0x7ec3fc,'headers':{'Accept':_0x1a3769(0x165)},'async':![],'success':function(_0x268b81){var _0x3921ca=_0x1a3769,_0x136874=_0x268b81['d'][_0x3921ca(0x179)],_0xbb78e3='';_0xbb78e3+='<table\x20class=\x22table\x20table2\x22>',_0xbb78e3+=_0x3921ca(0x174),_0xbb78e3+='<tr>',_0xbb78e3+='<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Category\x22>Category</th>',_0xbb78e3+=_0x3921ca(0x13e),_0xbb78e3+=_0x3921ca(0x13c),_0xbb78e3+=_0x3921ca(0x143);isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0xbb78e3+=_0x3921ca(0x162),_0xbb78e3+=_0x3921ca(0x198));_0xbb78e3+='</tr>',_0xbb78e3+=_0x3921ca(0x18b),_0xbb78e3+=_0x3921ca(0x1a7);for(var _0x44826c=0x0;_0x44826c<_0x136874[_0x3921ca(0x189)];_0x44826c++){var _0x15e2e7=_0x136874[_0x44826c][_0x3921ca(0x16b)],_0x189100=_0x136874[_0x44826c]['Status'],_0xa2abc9='';_0x189100==!![]&&(_0xa2abc9='checked');var _0x3a4c1d=new Date(_0x136874[_0x44826c]['Modified']),_0x456552=_0x136874[_0x44826c][_0x3921ca(0x16f)];_0x456552==null&&(_0x456552=0x0);var _0x5d28e8=_0x136874[_0x44826c][_0x3921ca(0x140)];_0x5d28e8==null&&(_0x5d28e8=0x0);var _0x242a6f=_0x136874[_0x44826c][_0x3921ca(0x177)];_0x242a6f==null&&(_0x242a6f=0x0);var _0x583069=_0x136874[_0x44826c][_0x3921ca(0x154)];_0xbb78e3+='<tr>',_0xbb78e3+=_0x3921ca(0x148)+_0x136874[_0x44826c]['ID']+_0x3921ca(0x159)+_0x15e2e7+_0x3921ca(0x168),_0xbb78e3+=_0x3921ca(0x145)+_0x456552+_0x3921ca(0x19e),_0xbb78e3+='<td>'+_0x5d28e8+_0x3921ca(0x19e),_0x456552+_0x5d28e8+_0x242a6f==0x0?_0xbb78e3+=_0x3921ca(0x173):_0xbb78e3+=_0x3921ca(0x145)+ShowCommonDateFormat(_0x3a4c1d)+_0x3921ca(0x19e),isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0xbb78e3+=_0x3921ca(0x145),_0xbb78e3+=_0x3921ca(0x16a),_0xbb78e3+=_0x3921ca(0x16e)+_0x136874[_0x44826c]['ID']+'\x22\x20type=\x22checkbox\x22\x20'+_0xa2abc9+'>',_0xbb78e3+='<span\x20class=\x22slider\x20round\x22></span></label></td>',_0xbb78e3+=_0x3921ca(0x136)+_0x136874[_0x44826c]['ID']+_0x3921ca(0x15b)+escape(_0x15e2e7)+'\x22)><i\x20class=\x22fa\x20fa-edit\x22></i></a></span>',_0x456552+_0x5d28e8+_0x242a6f==0x0&&(_0xbb78e3+=_0x3921ca(0x18e)+_0x136874[_0x44826c]['ID']+_0x3921ca(0x14a)),_0xbb78e3+=_0x3921ca(0x19e)),_0xbb78e3+=_0x3921ca(0x160);}_0xbb78e3+=_0x3921ca(0x152),_0xbb78e3+=_0x3921ca(0x14f),$('#categoryListItems')[_0x3921ca(0x153)](''),$('#categoryListItems')[_0x3921ca(0x18f)](_0xbb78e3),BindStatusChangeEvent();},'eror':function(_0x34e8ee){var _0x417fe3=_0x1a3769;console[_0x417fe3(0x1a8)](_0x417fe3(0x186));}});}function GetDepartmentUrl(_0x137d1a,_0x17c514){var _0x53dcfb=a1_0x5ac098,_0x2da59c=_spPageContextInfo[_0x53dcfb(0x14c)]+_0x53dcfb(0x142)+_0x17c514+'\x27';$[_0x53dcfb(0x151)]({'url':_0x2da59c,'headers':{'Accept':_0x53dcfb(0x165)},'async':!![],'success':function(_0x2a859f){var _0x48cd1a=_0x53dcfb,_0x2fbc9b=_0x2a859f['d'][_0x48cd1a(0x179)];if(_0x2fbc9b[_0x48cd1a(0x189)]>0x0){currentDepartnemtUrls=_0x2fbc9b[0x0][_0x48cd1a(0x19c)];var _0xf53f03=_0x2fbc9b[0x0][_0x48cd1a(0x188)];$(_0x48cd1a(0x15e))['html'](_0xf53f03),GetAllCategory(currentDepartnemtUrls);}},'eror':function(_0x2aa20c){var _0x6ecedc=_0x53dcfb;console[_0x6ecedc(0x1a8)]($(_0x6ecedc(0x167))[_0x6ecedc(0x193)]());}});}function updateItemWithID(_0x8611f4,_0x33a742,_0x18fbdb){var _0x232335=a1_0x5ac098,_0x144831=$['Deferred']();return $[_0x232335(0x151)]({'url':currentDepartnemtUrls+_0x232335(0x17c)+_0x8611f4+_0x232335(0x14b)+_0x18fbdb+'\x27)','type':'POST','headers':{'accept':_0x232335(0x165),'X-RequestDigest':$(_0x232335(0x184))[_0x232335(0x193)](),'content-Type':_0x232335(0x165),'X-Http-Method':_0x232335(0x138),'If-Match':'*'},'data':JSON[_0x232335(0x13d)](_0x33a742),'async':![],'success':function(_0x259c03){var _0xe242a6=_0x232335;_0x144831[_0xe242a6(0x157)](!![]);},'error':function(_0x36363d){var _0x43cada=_0x232335;alert(JSON['stringify'](_0x36363d)),_0x144831[_0x43cada(0x14e)](_0x36363d);}}),_0x144831['promise']();}function GetItemTypeForListName(_0x59231f){var _0x1e6462=a1_0x5ac098;return _0x1e6462(0x19b)+_0x59231f[_0x1e6462(0x137)](0x0)[_0x1e6462(0x183)]()+_0x59231f[_0x1e6462(0x149)]('\x20')[_0x1e6462(0x195)]('')[_0x1e6462(0x15c)](0x1)+_0x1e6462(0x1a4);}function AddItemToList(_0x223f13,_0xe27485){var _0x14508a=a1_0x5ac098,_0x2d762b=$['Deferred']();restQuery='ID';var _0x3a9d52=currentDepartnemtUrls+_0x14508a(0x17c)+_0x223f13+_0x14508a(0x17d)+restQuery;return $[_0x14508a(0x151)]({'url':_0x3a9d52,'type':_0x14508a(0x14d),'async':![],'headers':{'accept':_0x14508a(0x165),'X-RequestDigest':$(_0x14508a(0x184))[_0x14508a(0x193)](),'content-Type':_0x14508a(0x165)},'data':JSON['stringify'](_0xe27485),'success':function(_0x476c11){var _0x34d664=_0x14508a,_0x29c684=_0x476c11['d']['ID'];_0x2d762b[_0x34d664(0x157)](_0x476c11);},'error':function(_0x3faf7d){var _0x5d5577=_0x14508a;alert(JSON['stringify'](_0x3faf7d)),_0x2d762b[_0x5d5577(0x14e)](_0x3faf7d);}}),_0x2d762b[_0x14508a(0x13b)]();}function DeleteItemCategory(_0x13ba0b){var _0xddbd93=a1_0x5ac098,_0x11c4cd=confirm(_0xddbd93(0x1a6));if(_0x11c4cd==!![]){var _0x4c6447=$[_0xddbd93(0x16c)](),_0x5d85a8=currentDepartnemtUrls+_0xddbd93(0x171)+_0x13ba0b+')';return $[_0xddbd93(0x151)]({'url':_0x5d85a8,'type':_0xddbd93(0x156),'contentType':_0xddbd93(0x165),'headers':{'Accept':_0xddbd93(0x165),'X-RequestDigest':$(_0xddbd93(0x184))[_0xddbd93(0x193)](),'IF-MATCH':'*','X-HTTP-Method':_0xddbd93(0x156)},'success':function(_0x55e58a){var _0x5a861b=_0xddbd93;GetAllCategory(currentDepartnemtUrls),_0x4c6447[_0x5a861b(0x157)](_0x55e58a);},'error':function(_0x531b95){var _0xf3dde1=_0xddbd93;_0x4c6447['reject'](JSON[_0xf3dde1(0x13d)](_0x531b95));}}),_0x4c6447[_0xddbd93(0x13b)]();}}function OpenUpdateModalPopup(_0x3f4181,_0x15dc21){var _0x14ea8e=a1_0x5ac098;categoryId=_0x3f4181,_0x15dc21=unescape(_0x15dc21),$(_0x14ea8e(0x19a))[_0x14ea8e(0x193)](_0x15dc21),$('#myModal')[_0x14ea8e(0x139)](_0x14ea8e(0x1a9));}function RedirectOnCategoryTopics(_0x295ae9){var _0x44ac6a=a1_0x5ac098;departmentID>0x0&&(document[_0x44ac6a(0x147)][_0x44ac6a(0x176)]=_0x44ac6a(0x1a0)+departmentID+'&topiccategoryid='+_0x295ae9+'&undefined=undefined');}function GetParameterValues(_0x5f26c9){var _0x5cbb97=a1_0x5ac098,_0x4f8058=window[_0x5cbb97(0x147)][_0x5cbb97(0x176)]['slice'](window[_0x5cbb97(0x147)]['href'][_0x5cbb97(0x15a)]('?')+0x1)['split']('&');for(var _0x5bf420=0x0;_0x5bf420<_0x4f8058['length'];_0x5bf420++){var _0x107d0e=_0x4f8058[_0x5bf420][_0x5cbb97(0x149)]('=');if(_0x107d0e[0x0]==_0x5f26c9)return _0x107d0e[0x1];}}