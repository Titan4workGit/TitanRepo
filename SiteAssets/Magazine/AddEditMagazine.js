function a309_0x43c3(_0x3f65ea,_0xe09d53){var _0x3fb013=a309_0x3fb0();return a309_0x43c3=function(_0x43c3b5,_0x1968aa){_0x43c3b5=_0x43c3b5-0x1b8;var _0x4f2f32=_0x3fb013[_0x43c3b5];return _0x4f2f32;},a309_0x43c3(_0x3f65ea,_0xe09d53);}var a309_0x17f7f2=a309_0x43c3;(function(_0x576cd6,_0x29eda7){var _0x26ec08=a309_0x43c3,_0x21ce32=_0x576cd6();while(!![]){try{var _0x3d48d0=parseInt(_0x26ec08(0x1e0))/0x1*(parseInt(_0x26ec08(0x1de))/0x2)+parseInt(_0x26ec08(0x1da))/0x3*(parseInt(_0x26ec08(0x20b))/0x4)+parseInt(_0x26ec08(0x1c3))/0x5+parseInt(_0x26ec08(0x1f7))/0x6+parseInt(_0x26ec08(0x20e))/0x7+parseInt(_0x26ec08(0x1be))/0x8*(-parseInt(_0x26ec08(0x1f6))/0x9)+parseInt(_0x26ec08(0x1c8))/0xa*(-parseInt(_0x26ec08(0x1d4))/0xb);if(_0x3d48d0===_0x29eda7)break;else _0x21ce32['push'](_0x21ce32['shift']());}catch(_0x418de8){_0x21ce32['push'](_0x21ce32['shift']());}}}(a309_0x3fb0,0xb38d5));var itemid='';$(document)[a309_0x17f7f2(0x1ff)](function(){var _0x40fe05=a309_0x17f7f2;$(_0x40fe05(0x1dd))[_0x40fe05(0x1e7)](function(){FindDuplicate();});});function FindDuplicate(){var _0x5cff88=a309_0x17f7f2,_0x52f609=titanForWork[_0x5cff88(0x1f5)](_0x5cff88(0x204)),_0x421553=![],_0x169225=$(_0x5cff88(0x1cd))[_0x5cff88(0x1d1)](),_0x433a27=$('#input1')[_0x5cff88(0x1d1)](),_0x5c09dc=$(_0x5cff88(0x1e8))['val']();if(_0x169225[_0x5cff88(0x1fb)]()[_0x5cff88(0x1bf)]==0x0||_0x433a27[_0x5cff88(0x1fb)]()[_0x5cff88(0x1bf)]==0x0)return alert(_0x5cff88(0x206)),![];var _0x4c4501=_0x52f609+_0x5cff88(0x1c9)+_0x169225+_0x5cff88(0x1e9)+_0x433a27+_0x5cff88(0x200);return itemid!=null&&(_0x4c4501=_0x52f609+_0x5cff88(0x1c9)+_0x169225+_0x5cff88(0x1e9)+_0x433a27+'\x27))and\x20ID\x20ne\x20\x27'+itemid+_0x5cff88(0x1fa)),$[_0x5cff88(0x201)]({'url':_0x4c4501,'type':_0x5cff88(0x1b8),'cache':!![],'async':![],'headers':{'ACCEPT':'application/json;odata=verbose'},'success':function(_0x29be0b){var _0x284397=_0x5cff88;$(_0x29be0b['d'][_0x284397(0x1cf)])[_0x284397(0x1bf)]==0x0?(_0x421553=!![],AddCurrentUserasTechAdmin()):alert(_0x284397(0x1d7));},'error':function(){}}),_0x421553;}function AddCurrentUserasTechAdmin(){var _0x6f75e6=a309_0x17f7f2,_0x5434da=$(_0x6f75e6(0x1cd))['val']()[_0x6f75e6(0x1fb)](),_0x278b95=$(_0x6f75e6(0x1e1))[_0x6f75e6(0x1d1)](),_0x3783fa=$(_0x6f75e6(0x1e8))[_0x6f75e6(0x1d1)]()[_0x6f75e6(0x1fb)](),_0x30908a=new Date(_0x278b95),_0x31fb8e=_0x30908a[_0x6f75e6(0x1f0)](),_0x2370d2=_0x30908a[_0x6f75e6(0x1ba)]()+0x1,_0x1fc840=_0x30908a[_0x6f75e6(0x1ed)](),_0x528773=new Array();_0x528773[_0x6f75e6(0x1c6)]();(_0x5434da==''||_0x278b95=='')&&alert('Fill\x20all\x20mandatory\x20fields!');var _0x5c1ac0=_0x6f75e6(0x205),_0x130886,_0x4c4c80=_0x6f75e6(0x1fd);_0x130886={'__metadata':{'type':_0x4c4c80},'Title':_0x5434da,'Publish_Date':_0x278b95,'Volume':_0x3783fa,'Month':_0x2370d2['toString'](),'Year':_0x1fc840[_0x6f75e6(0x1cc)]()};if(itemid==''){if($(_0x6f75e6(0x209))['val']()=='')return alert('Please\x20attach\x20a\x20cover.\x20'),![];if($(_0x6f75e6(0x1e3))[_0x6f75e6(0x1d1)]()=='')return alert(_0x6f75e6(0x20a)),![];$[_0x6f75e6(0x1f8)](AddItemToList(_0x5c1ac0,_0x130886))[_0x6f75e6(0x210)](function(_0x524627){var _0x14cd4b=_0x6f75e6;AddAttachments(_0x524627['d']['Id']),alert(_0x14cd4b(0x1d2)),$(_0x14cd4b(0x1cd))['val'](''),$(_0x14cd4b(0x1e1))[_0x14cd4b(0x1d1)](''),$(_0x14cd4b(0x1e8))[_0x14cd4b(0x1d1)](''),location['href']=_0x14cd4b(0x1e5);});}else $[_0x6f75e6(0x1f8)](updateMagazineItemWithID(_0x5c1ac0,_0x130886,itemid))[_0x6f75e6(0x210)](function(_0x5c7d2e){var _0x31ceac=_0x6f75e6;checkFileExists(itemid),alert(_0x31ceac(0x1eb)),$(_0x31ceac(0x1f1))['hide'](),$(_0x31ceac(0x1cd))[_0x31ceac(0x1d1)](''),$('#input1')[_0x31ceac(0x1d1)](''),$(_0x31ceac(0x1e8))[_0x31ceac(0x1d1)](''),location[_0x31ceac(0x1e2)]=_0x31ceac(0x1e5);});}function updateMagazineItemWithID(_0x23a6e9,_0x59b6e8,_0xdf9600){var _0x42411d=a309_0x17f7f2,_0x4aeff0=titanForWork[_0x42411d(0x1f5)]('CompanySiteUrl'),_0x1c587b=$[_0x42411d(0x1d6)]();return $['ajax']({'url':_0x4aeff0+_0x42411d(0x203)+_0x23a6e9+_0x42411d(0x1d5)+_0xdf9600+'\x27)','type':_0x42411d(0x1ca),'headers':{'accept':_0x42411d(0x1e6),'X-RequestDigest':$(_0x42411d(0x1bc))['val'](),'content-Type':_0x42411d(0x1e6),'X-Http-Method':_0x42411d(0x20c),'If-Match':'*'},'data':JSON[_0x42411d(0x1cb)](_0x59b6e8),'async':![],'success':function(_0x3cfe51){var _0xbb1cc1=_0x42411d;_0x1c587b[_0xbb1cc1(0x1f9)](!![]);},'error':function(_0x3691df){var _0x54627a=_0x42411d;alert(JSON[_0x54627a(0x1cb)](_0x3691df)),_0x1c587b[_0x54627a(0x207)](_0x3691df);}}),_0x1c587b[_0x42411d(0x1df)]();}function AddItemToList(_0xe959da,_0x462172){var _0x17e2fa=a309_0x17f7f2,_0x5dbd58=titanForWork[_0x17e2fa(0x1f5)]('CompanySiteUrl'),_0x34926d=$[_0x17e2fa(0x1d6)]();return $[_0x17e2fa(0x201)]({'url':_0x5dbd58+_0x17e2fa(0x203)+_0xe959da+_0x17e2fa(0x1ce),'type':_0x17e2fa(0x1ca),'async':![],'headers':{'accept':_0x17e2fa(0x1e6),'X-RequestDigest':$(_0x17e2fa(0x1bc))['val'](),'content-Type':'application/json;odata=verbose'},'data':JSON['stringify'](_0x462172),'success':function(_0x434751){var _0x501987=_0x17e2fa;console[_0x501987(0x1c1)](_0xe959da),_0x34926d[_0x501987(0x1f9)](_0x434751);},'error':function(_0x2a9315){var _0x188fe0=_0x17e2fa;alert('Failure\x20:\x20'+JSON[_0x188fe0(0x1cb)](_0x2a9315)),_0x34926d[_0x188fe0(0x207)](_0x2a9315);}}),_0x34926d[_0x17e2fa(0x1df)]();}function AddAttachments(_0x91a40d){var _0x50546b=a309_0x17f7f2,_0x1090a6=titanForWork[_0x50546b(0x1f5)](_0x50546b(0x204)),_0x48f2fd='';$['ajax']({'url':_spPageContextInfo['webAbsoluteUrl']+_0x50546b(0x1f3),'method':_0x50546b(0x1ca),'async':![],'headers':{'ACCEPT':_0x50546b(0x1e6),'content-type':_0x50546b(0x1e6)},'success':function(_0x3de470){var _0x2aa383=_0x50546b;_0x48f2fd=_0x3de470['d']['GetContextWebInformation'][_0x2aa383(0x1c2)];},'error':function(_0x1b2136){}})[_0x50546b(0x210)](function(){var _0x913ec8=_0x50546b,_0x8729a7=$(_0x913ec8(0x209)),_0x312384=$(_0x913ec8(0x209))[_0x913ec8(0x1d1)]();if(_0x312384[_0x913ec8(0x1bf)]>0x0){var _0x166e9f=_0x8729a7[0x0][_0x913ec8(0x1ea)][0x0][_0x913ec8(0x20d)],_0x21f7be=new FileReader();_0x21f7be[_0x913ec8(0x1ef)]=function(_0x24f687){var _0x31bcf2=_0x913ec8,_0x1f0039=_0x24f687['target'][_0x31bcf2(0x1db)],_0x1a73bf=$['ajax']({'url':_0x1090a6+'/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27'+_0x91a40d+'\x27)/AttachmentFiles/\x20add(FileName=\x27'+_0x166e9f+'\x27)','method':'POST','binaryStringRequestBody':!![],'data':_0x1f0039,'processData':![],'async':![],'headers':{'ACCEPT':_0x31bcf2(0x1e6),'X-RequestDigest':_0x48f2fd},'success':function(_0x51f1c6){console['log']('Save\x20img');},'error':function(_0x1e1199){var _0x2466bb=_0x31bcf2;alert(_0x2466bb(0x1bb)+_0x1e1199['responseText']);}});};};_0x312384['length']>0x1&&_0x21f7be[_0x913ec8(0x1d3)](_0x8729a7[0x0][_0x913ec8(0x1ea)][0x0]);})[_0x50546b(0x210)](function(){var _0x56d5e7=_0x50546b;debugger;var _0x4a9be5=$(_0x56d5e7(0x1e3)),_0x2bd37a=$(_0x56d5e7(0x1e3))[_0x56d5e7(0x1d1)]();if(_0x2bd37a[_0x56d5e7(0x1bf)]>0x1){var _0x5106ab=_0x4a9be5[0x0][_0x56d5e7(0x1ea)][0x0]['name'],_0x55216c=new FileReader();_0x55216c[_0x56d5e7(0x1ef)]=function(_0x2ba86e){var _0x2806ff=_0x56d5e7,_0x4332f5=_0x2ba86e['target'][_0x2806ff(0x1db)],_0x115842=$['ajax']({'url':_0x1090a6+_0x2806ff(0x1fc)+_0x91a40d+'\x27)/AttachmentFiles/\x20add(FileName=\x27'+_0x5106ab+'\x27)','method':_0x2806ff(0x1ca),'binaryStringRequestBody':!![],'data':_0x4332f5,'processData':![],'async':![],'headers':{'ACCEPT':_0x2806ff(0x1e6),'X-RequestDigest':_0x48f2fd},'success':function(_0x21aa18){var _0x313b1a=_0x2806ff;console['log'](_0x313b1a(0x208)+_0x21aa18);},'error':function(_0x4671a1){var _0x9dc8b7=_0x2806ff;alert('Error\x20occured.'+_0x4671a1[_0x9dc8b7(0x20f)]);}});};};_0x2bd37a[_0x56d5e7(0x1bf)]>0x1&&_0x55216c['readAsArrayBuffer'](_0x4a9be5[0x0]['files'][0x0]);});}function BindMagazine(_0x522922){var _0x2d187f=a309_0x17f7f2;debugger;$(_0x2d187f(0x1f1))[_0x2d187f(0x1f2)](),itemid=_0x522922;var _0x18376b=titanForWork[_0x2d187f(0x1f5)](_0x2d187f(0x204)),_0x12cff1='';_0x12cff1=_0x2d187f(0x1c0)+itemid+'\x27';var _0x155b31=_0x18376b+_0x2d187f(0x1ee)+_0x12cff1;$[_0x2d187f(0x201)]({'url':_0x155b31,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x351625){var _0x1bb6fc=_0x2d187f,_0x591c86=_0x351625['d'][_0x1bb6fc(0x1cf)];for(var _0x396ec2=0x0;_0x396ec2<_0x591c86[_0x1bb6fc(0x1bf)];_0x396ec2++){var _0x4410ee=new Date(_0x591c86[_0x396ec2][_0x1bb6fc(0x1c5)]),_0x10dc60=_0x4410ee[_0x1bb6fc(0x1f0)](),_0x45a0d3=_0x4410ee['getMonth']()+0x1,_0x33fa04=_0x4410ee[_0x1bb6fc(0x1ed)](),_0x1c0735=_0x45a0d3+'/'+_0x10dc60+'/'+_0x33fa04,_0x5c0050=_0x591c86[_0x396ec2]['Title'],_0x4c71f7=_0x1c0735['toString'](),_0x1cb50c=_0x591c86[_0x396ec2]['Volume'];$(_0x1bb6fc(0x1cd))[_0x1bb6fc(0x1d1)](_0x5c0050),$(_0x1bb6fc(0x1e1))['val'](_0x4c71f7),$(_0x1bb6fc(0x1e8))[_0x1bb6fc(0x1d1)](_0x1cb50c);}},'eror':function(_0x212cfc){var _0x10312f=_0x2d187f;console[_0x10312f(0x1c1)](_0x10312f(0x1fe));}});}function checkFileExists(_0x395e24){var _0x4c5d78=a309_0x17f7f2;Handler=this;var _0x4ac34c='',_0x27fd36=titanForWork[_0x4c5d78(0x1f5)](_0x4c5d78(0x204));$[_0x4c5d78(0x201)]({'url':_0x27fd36+_0x4c5d78(0x202)+_0x395e24+'\x27)?$select=*&$expand=AttachmentFiles','method':_0x4c5d78(0x1b8),'headers':{'Accept':_0x4c5d78(0x1c7)},'async':![],'success':function(_0x469842){var _0x136673=_0x4c5d78,_0x6f63ca=_0x469842['d'];if(_0x469842['d'][_0x136673(0x1b9)]==!![])for(var _0x12ed92=0x0;_0x12ed92<_0x469842['d'][_0x136673(0x1dc)]['results']['length'];_0x12ed92++){var _0x4d7836=$(_0x136673(0x209))[_0x136673(0x1d1)](),_0x3de107=$(_0x136673(0x1e3))[_0x136673(0x1d1)](),_0x5440a7=_0x469842['d']['AttachmentFiles'][_0x136673(0x1cf)][_0x12ed92][_0x136673(0x1d8)],_0x2187a2=_0x5440a7[_0x136673(0x1c4)]('.')[_0x136673(0x1d9)]();_0x2187a2==_0x136673(0x1f4)?_0x3de107['length']>0x0&&DeleteFile(_0x395e24,_0x469842['d'][_0x136673(0x1dc)][_0x136673(0x1cf)][_0x12ed92]['FileName']):_0x4d7836['length']>0x0&&DeleteFile(_0x395e24,_0x469842['d'][_0x136673(0x1dc)][_0x136673(0x1cf)][_0x12ed92]['FileName']);}AddAttachments(_0x395e24);},'error':function(_0x4a2243){}});}function a309_0x3fb0(){var _0x1157cc=['POST','stringify','toString','#input2','\x27)/items','results','DELETE','val','Added\x20successfully.','readAsArrayBuffer','66HVmzxL','\x27)/GetItemById(\x27','Deferred','Duplicate\x20Magazine\x20found.','FileName','pop','886902bmhUJc','result','AttachmentFiles','#Submit','1130902ceVaho','promise','2EDvGtk','#input1','href','#file2','getElementById','../Pages/MagazineViewAll.aspx?WebAppId=12','application/json;odata=verbose','click','#input','\x27)\x20and\x20(Publish_Date\x20eq\x20\x27','files','Updated\x20successfully.',')/AttachmentFiles/getByFileName(\x27','getFullYear','/_api/web/lists/getbytitle(\x27Magazine_items\x27)/items?$select=','onload','getDate','#mazinemodle','modal','/_api/contextinfo','pdf','getQueryStringParameter','3222OVoNrc','852672ZrRnnC','when','resolve','\x27&$expand=AttachmentFiles','trim','/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27','SP.Data.Magazine_x005f_ItemsListItem','error','ready','\x27))&$expand=AttachmentFiles','ajax','/_api/web/Lists/GetByTitle(\x27Magazine_items\x27)/Items(\x27','/_api/web/lists/getbytitle(\x27','CompanySiteUrl','Magazine_Items','Please\x20fill\x20all\x20required\x20fields.','reject','Save\x20pdf','#file1','Please\x20attach\x20a\x20magazine.\x20','4Kokmsv','PATCH','name','5750829eaxffD','responseText','done','GET','Attachments','getMonth','Error\x20occured.','#__REQUESTDIGEST','Magazine_items','30584qywKTS','length','ID,Title,Publish_Date,Volume,Month,Year&$filter=ID\x20eq\x20\x27','log','FormDigestValue','6709890vahtpq','split','Publish_Date','push','application/json;\x20odata=verbose','2713490VDZphD','/_api/Web/Lists/getbytitle(\x27Magazine_items\x27)/Items?$filter=((Title\x20eq\x20\x27'];a309_0x3fb0=function(){return _0x1157cc;};return a309_0x3fb0();}function DeleteFile(_0x36d5ed,_0x27f3b6){var _0x33f527=a309_0x17f7f2;Handler=this;var _0xacf20f=_0x33f527(0x1bd),_0x2612fd=titanForWork['getQueryStringParameter']('CompanySiteUrl');$[_0x33f527(0x201)]({'url':_0x2612fd+'/_api/web/lists/GetByTitle(\x27'+_0xacf20f+'\x27)/GetItemById('+_0x36d5ed+_0x33f527(0x1ec)+_0x27f3b6+'\x27)\x20\x20','method':_0x33f527(0x1d0),'async':![],'headers':{'X-RequestDigest':document[_0x33f527(0x1e4)]('__REQUESTDIGEST')['value']},'success':function(_0x42b9f5){},'error':function(_0x1ea6d3){}});}function ClearFields(){var _0x181552=a309_0x17f7f2;$(_0x181552(0x1cd))[_0x181552(0x1d1)](''),$('#input1')[_0x181552(0x1d1)](''),$(_0x181552(0x1e8))['val']('');}