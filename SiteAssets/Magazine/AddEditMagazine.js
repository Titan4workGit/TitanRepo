var _0x206ab1=_0x30b1;(function(_0x34dcdf,_0xea8b19){var _0x293940=_0x30b1,_0x48a197=_0x34dcdf();while(!![]){try{var _0x151d96=-parseInt(_0x293940(0xfc))/0x1*(parseInt(_0x293940(0xf7))/0x2)+-parseInt(_0x293940(0xe0))/0x3+parseInt(_0x293940(0xc9))/0x4*(parseInt(_0x293940(0xea))/0x5)+-parseInt(_0x293940(0xb0))/0x6*(parseInt(_0x293940(0xc1))/0x7)+parseInt(_0x293940(0xf8))/0x8+parseInt(_0x293940(0xce))/0x9+parseInt(_0x293940(0xf1))/0xa;if(_0x151d96===_0xea8b19)break;else _0x48a197['push'](_0x48a197['shift']());}catch(_0x259fb9){_0x48a197['push'](_0x48a197['shift']());}}}(_0x8d96,0x52952));var itemid='';function _0x30b1(_0x129973,_0x11ce1d){var _0x8d96b1=_0x8d96();return _0x30b1=function(_0x30b16e,_0x1d90d7){_0x30b16e=_0x30b16e-0xaa;var _0x5b9bc3=_0x8d96b1[_0x30b16e];return _0x5b9bc3;},_0x30b1(_0x129973,_0x11ce1d);}$(document)[_0x206ab1(0x102)](function(){var _0x1a0eac=_0x206ab1;$(_0x1a0eac(0xc7))[_0x1a0eac(0xeb)](function(){FindDuplicate();});});function _0x8d96(){var _0x2b2a2f=['toString','ready','Save\x20img','ID,Title,Publish_Date,Volume,Month,Year&$filter=ID\x20eq\x20\x27','#input','Save\x20pdf','#input1','done','getFullYear','/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27','pdf','18cMTfsG','value','Magazine_items','Please\x20attach\x20a\x20magazine.\x20','result','when','../Pages/MagazineViewAll.aspx?WebAppId=12','\x27)\x20and\x20(Publish_Date\x20eq\x20\x27','trim','target','length','SP.Data.Magazine_x005f_ItemsListItem','files','/_api/Web/Lists/getbytitle(\x27Magazine_items\x27)/Items?$filter=((Title\x20eq\x20\x27','Duplicate\x20Magazine\x20found.','/_api/web/lists/getbytitle(\x27','log','1222319rMtRAu','application/json;\x20odata=verbose','readAsArrayBuffer','results','FormDigestValue','#mazinemodle','#Submit','ajax','1646548yeTmwH','val','POST','application/json;odata=verbose','DELETE','391050VWqtnz','getDate','\x27&$expand=AttachmentFiles','stringify','#__REQUESTDIGEST','AttachmentFiles','Deferred','Please\x20fill\x20all\x20required\x20fields.','resolve','pop','Volume','responseText','promise','/_api/web/Lists/GetByTitle(\x27Magazine_items\x27)/Items(\x27','GetContextWebInformation','href','Attachments','FileName','1985328bejnVR','reject','hide','Title',')/AttachmentFiles/getByFileName(\x27','Failure\x20:\x20','/_api/contextinfo','error','#file1','/_api/web/lists/GetByTitle(\x27','5ureHGV','click','name','__REQUESTDIGEST','modal','\x27))and\x20ID\x20ne\x20\x27','\x27)?$select=*&$expand=AttachmentFiles','8830160hPMbLw','CompanySiteUrl','\x27)/AttachmentFiles/\x20add(FileName=\x27','onload','GET','#file2','6PNzTJN','3762296gmZYKD','#input2','/_api/web/lists/getbytitle(\x27Magazine_items\x27)/items?$select=','Magazine_Items','94835SbgeEa','Error\x20occured.','Fill\x20all\x20mandatory\x20fields!','getQueryStringParameter','getMonth'];_0x8d96=function(){return _0x2b2a2f;};return _0x8d96();}function FindDuplicate(){var _0x38b9b7=_0x206ab1,_0x14172f=titanForWork[_0x38b9b7(0xff)](_0x38b9b7(0xf2)),_0x43fa04=![],_0x331a81=$('#input2')[_0x38b9b7(0xca)](),_0x3d6bfb=$('#input1')[_0x38b9b7(0xca)](),_0x526009=$(_0x38b9b7(0x105))['val']();if(_0x331a81[_0x38b9b7(0xb8)]()['length']==0x0||_0x3d6bfb['trim']()['length']==0x0)return alert(_0x38b9b7(0xd5)),![];if(_0x526009=='')return alert('Please\x20enter\x20Volume\x20!'),![];var _0x38fd8e=_0x14172f+_0x38b9b7(0xbd)+_0x331a81+_0x38b9b7(0xb7)+_0x3d6bfb+'\x27))&$expand=AttachmentFiles';return itemid!=null&&(_0x38fd8e=_0x14172f+'/_api/Web/Lists/getbytitle(\x27Magazine_items\x27)/Items?$filter=((Title\x20eq\x20\x27'+_0x331a81+_0x38b9b7(0xb7)+_0x3d6bfb+_0x38b9b7(0xef)+itemid+_0x38b9b7(0xd0)),$['ajax']({'url':_0x38fd8e,'type':_0x38b9b7(0xf5),'cache':!![],'async':![],'headers':{'ACCEPT':_0x38b9b7(0xcc)},'success':function(_0xf29eae){var _0x339528=_0x38b9b7;$(_0xf29eae['d'][_0x339528(0xc4)])[_0x339528(0xba)]==0x0?(_0x43fa04=!![],AddCurrentUserasTechAdmin()):alert(_0x339528(0xbe));},'error':function(){}}),_0x43fa04;}function AddCurrentUserasTechAdmin(){var _0x1804e7=_0x206ab1,_0x29f77b=$(_0x1804e7(0xf9))[_0x1804e7(0xca)]()[_0x1804e7(0xb8)](),_0x1e7d54=$('#input1')[_0x1804e7(0xca)](),_0x578cbc=$(_0x1804e7(0x105))['val']()[_0x1804e7(0xb8)](),_0x34077a=new Date(_0x1e7d54),_0x31ebab=_0x34077a[_0x1804e7(0xcf)](),_0x38d70f=_0x34077a[_0x1804e7(0x100)]()+0x1,_0x3de8d1=_0x34077a[_0x1804e7(0xad)](),_0x5b5291=new Array();_0x5b5291['push']();(_0x29f77b==''||_0x1e7d54=='')&&alert(_0x1804e7(0xfe));var _0x3bd8ad=_0x1804e7(0xfb),_0x2b943d,_0x52b9a8=_0x1804e7(0xbb);_0x2b943d={'__metadata':{'type':_0x52b9a8},'Title':_0x29f77b,'Publish_Date':_0x1e7d54,'Volume':_0x578cbc,'Month':_0x38d70f[_0x1804e7(0x101)](),'Year':_0x3de8d1[_0x1804e7(0x101)]()};if(itemid==''){if($('#file1')[_0x1804e7(0xca)]()=='')return alert('Please\x20attach\x20a\x20cover.\x20'),![];if($('#file2')[_0x1804e7(0xca)]()=='')return alert(_0x1804e7(0xb3)),![];$['when'](AddItemToList(_0x3bd8ad,_0x2b943d))[_0x1804e7(0xac)](function(_0x45baf2){var _0x5df775=_0x1804e7;AddAttachments(_0x45baf2['d']['Id']),alert('Added\x20successfully.'),$('#input2')[_0x5df775(0xca)](''),$(_0x5df775(0xab))[_0x5df775(0xca)](''),$(_0x5df775(0x105))['val'](''),location[_0x5df775(0xdd)]=_0x5df775(0xb6);});}else $[_0x1804e7(0xb5)](updateMagazineItemWithID(_0x3bd8ad,_0x2b943d,itemid))['done'](function(_0x4db8fe){var _0xddd30d=_0x1804e7;checkFileExists(itemid),alert('Updated\x20successfully.'),$(_0xddd30d(0xc6))[_0xddd30d(0xe2)](),$('#input2')['val'](''),$(_0xddd30d(0xab))[_0xddd30d(0xca)](''),$(_0xddd30d(0x105))[_0xddd30d(0xca)](''),location[_0xddd30d(0xdd)]=_0xddd30d(0xb6);});}function updateMagazineItemWithID(_0x26b78c,_0x5688a0,_0x3c6e7){var _0x2441ff=_0x206ab1,_0x33da69=titanForWork[_0x2441ff(0xff)](_0x2441ff(0xf2)),_0x2fbaa0=$[_0x2441ff(0xd4)]();return $[_0x2441ff(0xc8)]({'url':_0x33da69+'/_api/web/lists/getbytitle(\x27'+_0x26b78c+'\x27)/GetItemById(\x27'+_0x3c6e7+'\x27)','type':'POST','headers':{'accept':_0x2441ff(0xcc),'X-RequestDigest':$('#__REQUESTDIGEST')[_0x2441ff(0xca)](),'content-Type':_0x2441ff(0xcc),'X-Http-Method':'PATCH','If-Match':'*'},'data':JSON['stringify'](_0x5688a0),'async':![],'success':function(_0x2863c2){var _0x4c066d=_0x2441ff;_0x2fbaa0[_0x4c066d(0xd6)](!![]);},'error':function(_0x4ebb0e){var _0x38995a=_0x2441ff;alert(JSON[_0x38995a(0xd1)](_0x4ebb0e)),_0x2fbaa0['reject'](_0x4ebb0e);}}),_0x2fbaa0[_0x2441ff(0xda)]();}function AddItemToList(_0x4ffb5d,_0x3bc83c){var _0x2f8fa0=_0x206ab1,_0x250700=titanForWork[_0x2f8fa0(0xff)](_0x2f8fa0(0xf2)),_0x1a3a37=$['Deferred']();return $[_0x2f8fa0(0xc8)]({'url':_0x250700+_0x2f8fa0(0xbf)+_0x4ffb5d+'\x27)/items','type':_0x2f8fa0(0xcb),'async':![],'headers':{'accept':_0x2f8fa0(0xcc),'X-RequestDigest':$(_0x2f8fa0(0xd2))[_0x2f8fa0(0xca)](),'content-Type':_0x2f8fa0(0xcc)},'data':JSON['stringify'](_0x3bc83c),'success':function(_0x286b17){var _0x292c6d=_0x2f8fa0;console[_0x292c6d(0xc0)](_0x4ffb5d),_0x1a3a37[_0x292c6d(0xd6)](_0x286b17);},'error':function(_0x3456e0){var _0x30c47f=_0x2f8fa0;alert(_0x30c47f(0xe5)+JSON['stringify'](_0x3456e0)),_0x1a3a37[_0x30c47f(0xe1)](_0x3456e0);}}),_0x1a3a37['promise']();}function AddAttachments(_0x15f1f2){var _0x4949f7=_0x206ab1,_0x3f6335=titanForWork['getQueryStringParameter'](_0x4949f7(0xf2)),_0x388d30='';$[_0x4949f7(0xc8)]({'url':_spPageContextInfo['webAbsoluteUrl']+_0x4949f7(0xe6),'method':'POST','async':![],'headers':{'ACCEPT':_0x4949f7(0xcc),'content-type':'application/json;odata=verbose'},'success':function(_0x4e0fd8){var _0x5c11a4=_0x4949f7;_0x388d30=_0x4e0fd8['d'][_0x5c11a4(0xdc)][_0x5c11a4(0xc5)];},'error':function(_0x83afb7){}})[_0x4949f7(0xac)](function(){var _0x15cdd9=_0x4949f7,_0x3df694=$(_0x15cdd9(0xe8)),_0x4efc62=$(_0x15cdd9(0xe8))['val']();if(_0x4efc62['length']>0x0){var _0x2749e2=_0x3df694[0x0][_0x15cdd9(0xbc)][0x0][_0x15cdd9(0xec)],_0x11c5f1=new FileReader();_0x11c5f1['onload']=function(_0x5244a4){var _0x1a6003=_0x15cdd9,_0x232515=_0x5244a4[_0x1a6003(0xb9)][_0x1a6003(0xb4)],_0x4b79c8=$['ajax']({'url':_0x3f6335+_0x1a6003(0xae)+_0x15f1f2+_0x1a6003(0xf3)+_0x2749e2+'\x27)','method':'POST','binaryStringRequestBody':!![],'data':_0x232515,'processData':![],'async':![],'headers':{'ACCEPT':'application/json;odata=verbose','X-RequestDigest':_0x388d30},'success':function(_0xe24787){var _0x46e68f=_0x1a6003;console[_0x46e68f(0xc0)](_0x46e68f(0x103));},'error':function(_0x528786){var _0x245ba2=_0x1a6003;alert(_0x245ba2(0xfd)+_0x528786[_0x245ba2(0xd9)]);}});};};_0x4efc62[_0x15cdd9(0xba)]>0x1&&_0x11c5f1['readAsArrayBuffer'](_0x3df694[0x0][_0x15cdd9(0xbc)][0x0]);})['done'](function(){var _0xf5ea47=_0x4949f7;debugger;var _0x2207fd=$(_0xf5ea47(0xf6)),_0x3fe39b=$(_0xf5ea47(0xf6))['val']();if(_0x3fe39b[_0xf5ea47(0xba)]>0x1){var _0x111688=_0x2207fd[0x0]['files'][0x0]['name'],_0x2e4260=new FileReader();_0x2e4260[_0xf5ea47(0xf4)]=function(_0x16b0c6){var _0x5543d2=_0xf5ea47,_0x589d32=_0x16b0c6[_0x5543d2(0xb9)]['result'],_0x2c7929=$['ajax']({'url':_0x3f6335+'/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27'+_0x15f1f2+_0x5543d2(0xf3)+_0x111688+'\x27)','method':_0x5543d2(0xcb),'binaryStringRequestBody':!![],'data':_0x589d32,'processData':![],'async':![],'headers':{'ACCEPT':'application/json;odata=verbose','X-RequestDigest':_0x388d30},'success':function(_0x5aa8ac){var _0x2adfa2=_0x5543d2;console[_0x2adfa2(0xc0)](_0x2adfa2(0xaa)+_0x5aa8ac);},'error':function(_0x277dbd){var _0x124c34=_0x5543d2;alert('Error\x20occured.'+_0x277dbd[_0x124c34(0xd9)]);}});};};_0x3fe39b[_0xf5ea47(0xba)]>0x1&&_0x2e4260[_0xf5ea47(0xc3)](_0x2207fd[0x0][_0xf5ea47(0xbc)][0x0]);});}function BindMagazine(_0x2e5f26){var _0x265f2a=_0x206ab1;debugger;$(_0x265f2a(0xc6))[_0x265f2a(0xee)](),itemid=_0x2e5f26;var _0x2e7353=titanForWork[_0x265f2a(0xff)](_0x265f2a(0xf2)),_0x48ec35='';_0x48ec35=_0x265f2a(0x104)+itemid+'\x27';var _0x1b77d7=_0x2e7353+_0x265f2a(0xfa)+_0x48ec35;$[_0x265f2a(0xc8)]({'url':_0x1b77d7,'headers':{'Accept':_0x265f2a(0xcc)},'async':![],'success':function(_0x649a9f){var _0x16c9a3=_0x265f2a,_0x3eaa24=_0x649a9f['d'][_0x16c9a3(0xc4)];for(var _0x59dce3=0x0;_0x59dce3<_0x3eaa24[_0x16c9a3(0xba)];_0x59dce3++){var _0x4796b0=new Date(_0x3eaa24[_0x59dce3]['Publish_Date']),_0x3e90f3=_0x4796b0['getDate'](),_0x539019=_0x4796b0[_0x16c9a3(0x100)]()+0x1,_0x3ac0fb=_0x4796b0[_0x16c9a3(0xad)](),_0xd71ab8=_0x539019+'/'+_0x3e90f3+'/'+_0x3ac0fb,_0x5d5a7f=_0x3eaa24[_0x59dce3][_0x16c9a3(0xe3)],_0x23897f=_0xd71ab8['toString'](),_0x10cb58=_0x3eaa24[_0x59dce3][_0x16c9a3(0xd8)];$(_0x16c9a3(0xf9))[_0x16c9a3(0xca)](_0x5d5a7f),$(_0x16c9a3(0xab))[_0x16c9a3(0xca)](_0x23897f),$(_0x16c9a3(0x105))[_0x16c9a3(0xca)](_0x10cb58);}},'eror':function(_0x32a592){var _0x5522f8=_0x265f2a;console[_0x5522f8(0xc0)](_0x5522f8(0xe7));}});}function checkFileExists(_0x53d137){var _0x415941=_0x206ab1;Handler=this;var _0x4fd94c='',_0x4e317f=titanForWork[_0x415941(0xff)](_0x415941(0xf2));$[_0x415941(0xc8)]({'url':_0x4e317f+_0x415941(0xdb)+_0x53d137+_0x415941(0xf0),'method':_0x415941(0xf5),'headers':{'Accept':_0x415941(0xc2)},'async':![],'success':function(_0x53a77b){var _0x21f0f7=_0x415941,_0x48f907=_0x53a77b['d'];if(_0x53a77b['d'][_0x21f0f7(0xde)]==!![])for(var _0x61d71a=0x0;_0x61d71a<_0x53a77b['d']['AttachmentFiles'][_0x21f0f7(0xc4)]['length'];_0x61d71a++){var _0x3b52a0=$('#file1')[_0x21f0f7(0xca)](),_0x372b09=$(_0x21f0f7(0xf6))[_0x21f0f7(0xca)](),_0x4c9b34=_0x53a77b['d'][_0x21f0f7(0xd3)][_0x21f0f7(0xc4)][_0x61d71a][_0x21f0f7(0xdf)],_0xfe3205=_0x4c9b34['split']('.')[_0x21f0f7(0xd7)]();_0xfe3205==_0x21f0f7(0xaf)?_0x372b09[_0x21f0f7(0xba)]>0x0&&DeleteFile(_0x53d137,_0x53a77b['d'][_0x21f0f7(0xd3)]['results'][_0x61d71a]['FileName']):_0x3b52a0[_0x21f0f7(0xba)]>0x0&&DeleteFile(_0x53d137,_0x53a77b['d'][_0x21f0f7(0xd3)][_0x21f0f7(0xc4)][_0x61d71a][_0x21f0f7(0xdf)]);}AddAttachments(_0x53d137);},'error':function(_0x10b1b7){}});}function DeleteFile(_0xae5411,_0xb2df3a){var _0x46fb10=_0x206ab1;Handler=this;var _0x3cb43d=_0x46fb10(0xb2),_0x5da1bb=titanForWork[_0x46fb10(0xff)](_0x46fb10(0xf2));$[_0x46fb10(0xc8)]({'url':_0x5da1bb+_0x46fb10(0xe9)+_0x3cb43d+'\x27)/GetItemById('+_0xae5411+_0x46fb10(0xe4)+_0xb2df3a+'\x27)\x20\x20','method':_0x46fb10(0xcd),'async':![],'headers':{'X-RequestDigest':document['getElementById'](_0x46fb10(0xed))[_0x46fb10(0xb1)]},'success':function(_0x1edca5){},'error':function(_0xc14e90){}});}function ClearFields(){var _0x514e3e=_0x206ab1;$(_0x514e3e(0xf9))[_0x514e3e(0xca)](''),$(_0x514e3e(0xab))[_0x514e3e(0xca)](''),$(_0x514e3e(0x105))[_0x514e3e(0xca)]('');}