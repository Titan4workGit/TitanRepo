(function(_0x3defa1,_0x28f070){var _0x36e76c=a0_0x136f,_0x564fb0=_0x3defa1();while(!![]){try{var _0x20e9bb=-parseInt(_0x36e76c(0x12a))/0x1+-parseInt(_0x36e76c(0x139))/0x2*(-parseInt(_0x36e76c(0x10d))/0x3)+parseInt(_0x36e76c(0xf0))/0x4+-parseInt(_0x36e76c(0xed))/0x5*(parseInt(_0x36e76c(0x120))/0x6)+-parseInt(_0x36e76c(0xe6))/0x7*(-parseInt(_0x36e76c(0x114))/0x8)+parseInt(_0x36e76c(0x130))/0x9*(parseInt(_0x36e76c(0x136))/0xa)+parseInt(_0x36e76c(0x126))/0xb;if(_0x20e9bb===_0x28f070)break;else _0x564fb0['push'](_0x564fb0['shift']());}catch(_0x2018bb){_0x564fb0['push'](_0x564fb0['shift']());}}}(a0_0x11bb,0x7c9e3));var itemid='';$(document)['ready'](function(){$('#Submit')['click'](function(){FindDuplicate();});});function a0_0x11bb(){var _0x5f4894=['results','pop','78rCGqog','when','value','readAsArrayBuffer','getFullYear','target','modal','128VqdHav','href','Magazine_items','Please\x20fill\x20all\x20required\x20fields.','SP.Data.Magazine_x005f_ItemsListItem','Volume','#file2','\x27))and\x20ID\x20ne\x20\x27','/_api/contextinfo','__REQUESTDIGEST','Publish_Date','#input','306654GicZxW','Magazine_Items','files','getElementById','Save\x20img','resolve','2057264ASbcAy','/_api/web/lists/getbytitle(\x27Magazine_items\x27)/items?$select=','Save\x20pdf','Duplicate\x20Magazine\x20found.','773729OxiqOc','onload','hide','reject','result','\x27)\x20and\x20(Publish_Date\x20eq\x20\x27','22131kLEpPJ','GET','Error\x20occured.','#mazinemodle','FileName','#input2','490eFeFrk','Deferred','ajax','24692DkselS','log','FormDigestValue','/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27','push','\x27)/GetItemById(\x27','/_api/web/lists/GetByTitle(\x27','trim','split','responseText','Added\x20successfully.','webAbsoluteUrl','/_api/Web/Lists/getbytitle(\x27Magazine_items\x27)/Items?$filter=((Title\x20eq\x20\x27','error','128303OvQFps','Updated\x20successfully.','\x27)/items','application/json;\x20odata=verbose','Title','\x27&$expand=AttachmentFiles','application/json;odata=verbose','25FUaCTo','/_api/web/Lists/GetByTitle(\x27Magazine_items\x27)/Items(\x27','promise','2471736ltKAxF','Please\x20attach\x20a\x20magazine.\x20','val','Please\x20attach\x20a\x20cover.\x20','pdf','DELETE','#__REQUESTDIGEST','#file1','Attachments',')/AttachmentFiles/getByFileName(\x27','#input1','/_api/web/lists/getbytitle(\x27','toString','CompanySiteUrl','done','POST','getQueryStringParameter','length','\x27)/AttachmentFiles/\x20add(FileName=\x27','PATCH','../Pages/MagazineViewAll.aspx?WebAppId=12','stringify','getDate','\x27)\x20\x20','Fill\x20all\x20mandatory\x20fields!','\x27))&$expand=AttachmentFiles','AttachmentFiles'];a0_0x11bb=function(){return _0x5f4894;};return a0_0x11bb();}function FindDuplicate(){var _0x8ba686=a0_0x136f,_0x1fdd4e=titanForWork[_0x8ba686(0x100)](_0x8ba686(0xfd)),_0x1217c7=![],_0x2f33dc=$(_0x8ba686(0x135))[_0x8ba686(0xf2)](),_0x5b6ee3=$(_0x8ba686(0xfa))[_0x8ba686(0xf2)](),_0x5ca045=$(_0x8ba686(0x11f))[_0x8ba686(0xf2)]();if(_0x2f33dc['trim']()[_0x8ba686(0x101)]==0x0||_0x5b6ee3[_0x8ba686(0xdf)]()['length']==0x0)return alert(_0x8ba686(0x117)),![];var _0x13074e=_0x1fdd4e+_0x8ba686(0xe4)+_0x2f33dc+_0x8ba686(0x12f)+_0x5b6ee3+_0x8ba686(0x109);return itemid!=null&&(_0x13074e=_0x1fdd4e+_0x8ba686(0xe4)+_0x2f33dc+_0x8ba686(0x12f)+_0x5b6ee3+_0x8ba686(0x11b)+itemid+_0x8ba686(0xeb)),$[_0x8ba686(0x138)]({'url':_0x13074e,'type':_0x8ba686(0x131),'cache':!![],'async':![],'headers':{'ACCEPT':_0x8ba686(0xec)},'success':function(_0x1fc88b){var _0x43d5f0=_0x8ba686;$(_0x1fc88b['d'][_0x43d5f0(0x10b)])[_0x43d5f0(0x101)]==0x0?(_0x1217c7=!![],AddCurrentUserasTechAdmin()):alert(_0x43d5f0(0x129));},'error':function(){}}),_0x1217c7;}function a0_0x136f(_0x49bd41,_0x12eae0){var _0x11bb4a=a0_0x11bb();return a0_0x136f=function(_0x136f7f,_0x587303){_0x136f7f=_0x136f7f-0xdc;var _0x390c08=_0x11bb4a[_0x136f7f];return _0x390c08;},a0_0x136f(_0x49bd41,_0x12eae0);}function AddCurrentUserasTechAdmin(){var _0x5f30b5=a0_0x136f,_0x1b0cbc=$(_0x5f30b5(0x135))[_0x5f30b5(0xf2)]()['trim'](),_0x417916=$(_0x5f30b5(0xfa))[_0x5f30b5(0xf2)](),_0x2485c4=$('#input')[_0x5f30b5(0xf2)]()['trim'](),_0x4f6c90=new Date(_0x417916),_0x239ab3=_0x4f6c90[_0x5f30b5(0x106)](),_0x288113=_0x4f6c90['getMonth']()+0x1,_0x21662c=_0x4f6c90[_0x5f30b5(0x111)](),_0x5ac6a0=new Array();_0x5ac6a0[_0x5f30b5(0xdc)]();(_0x1b0cbc==''||_0x417916=='')&&alert(_0x5f30b5(0x108));var _0xb1f81a=_0x5f30b5(0x121),_0x5cf9ab,_0x5b0efa=_0x5f30b5(0x118);_0x5cf9ab={'__metadata':{'type':_0x5b0efa},'Title':_0x1b0cbc,'Publish_Date':_0x417916,'Volume':_0x2485c4,'Month':_0x288113['toString'](),'Year':_0x21662c[_0x5f30b5(0xfc)]()};if(itemid==''){if($(_0x5f30b5(0xf7))[_0x5f30b5(0xf2)]()=='')return alert(_0x5f30b5(0xf3)),![];if($(_0x5f30b5(0x11a))[_0x5f30b5(0xf2)]()=='')return alert(_0x5f30b5(0xf1)),![];$[_0x5f30b5(0x10e)](AddItemToList(_0xb1f81a,_0x5cf9ab))[_0x5f30b5(0xfe)](function(_0x2c6480){var _0x5550c2=_0x5f30b5;AddAttachments(_0x2c6480['d']['Id']),alert(_0x5550c2(0xe2)),$('#input2')['val'](''),$(_0x5550c2(0xfa))[_0x5550c2(0xf2)](''),$('#input')[_0x5550c2(0xf2)](''),location['href']=_0x5550c2(0x104);});}else $[_0x5f30b5(0x10e)](updateMagazineItemWithID(_0xb1f81a,_0x5cf9ab,itemid))[_0x5f30b5(0xfe)](function(_0x1c33be){var _0x262280=_0x5f30b5;checkFileExists(itemid),alert(_0x262280(0xe7)),$(_0x262280(0x133))[_0x262280(0x12c)](),$(_0x262280(0x135))['val'](''),$('#input1')['val'](''),$(_0x262280(0x11f))['val'](''),location[_0x262280(0x115)]=_0x262280(0x104);});}function updateMagazineItemWithID(_0x20b76d,_0x399d11,_0x470092){var _0x3a5f16=a0_0x136f,_0x491165=titanForWork[_0x3a5f16(0x100)](_0x3a5f16(0xfd)),_0x22548b=$[_0x3a5f16(0x137)]();return $[_0x3a5f16(0x138)]({'url':_0x491165+_0x3a5f16(0xfb)+_0x20b76d+_0x3a5f16(0xdd)+_0x470092+'\x27)','type':'POST','headers':{'accept':_0x3a5f16(0xec),'X-RequestDigest':$('#__REQUESTDIGEST')['val'](),'content-Type':'application/json;odata=verbose','X-Http-Method':_0x3a5f16(0x103),'If-Match':'*'},'data':JSON['stringify'](_0x399d11),'async':![],'success':function(_0x3749fc){var _0x5b3228=_0x3a5f16;_0x22548b[_0x5b3228(0x125)](!![]);},'error':function(_0x4d3b04){var _0x536617=_0x3a5f16;alert(JSON[_0x536617(0x105)](_0x4d3b04)),_0x22548b[_0x536617(0x12d)](_0x4d3b04);}}),_0x22548b[_0x3a5f16(0xef)]();}function AddItemToList(_0x43bcc8,_0x4b05bf){var _0x512f14=a0_0x136f,_0x8f4e81=titanForWork[_0x512f14(0x100)]('CompanySiteUrl'),_0x3dbd67=$[_0x512f14(0x137)]();return $['ajax']({'url':_0x8f4e81+_0x512f14(0xfb)+_0x43bcc8+_0x512f14(0xe8),'type':_0x512f14(0xff),'async':![],'headers':{'accept':_0x512f14(0xec),'X-RequestDigest':$(_0x512f14(0xf6))['val'](),'content-Type':_0x512f14(0xec)},'data':JSON[_0x512f14(0x105)](_0x4b05bf),'success':function(_0x5891e2){console['log'](_0x43bcc8),_0x3dbd67['resolve'](_0x5891e2);},'error':function(_0xfa255b){var _0x30e9df=_0x512f14;alert('Failure\x20:\x20'+JSON[_0x30e9df(0x105)](_0xfa255b)),_0x3dbd67['reject'](_0xfa255b);}}),_0x3dbd67[_0x512f14(0xef)]();}function AddAttachments(_0x45625e){var _0x4c6db6=a0_0x136f,_0x116a9f=titanForWork[_0x4c6db6(0x100)](_0x4c6db6(0xfd)),_0x4ae04c='';$[_0x4c6db6(0x138)]({'url':_spPageContextInfo[_0x4c6db6(0xe3)]+_0x4c6db6(0x11c),'method':_0x4c6db6(0xff),'async':![],'headers':{'ACCEPT':_0x4c6db6(0xec),'content-type':_0x4c6db6(0xec)},'success':function(_0x13b03c){var _0x1c1238=_0x4c6db6;_0x4ae04c=_0x13b03c['d']['GetContextWebInformation'][_0x1c1238(0x13b)];},'error':function(_0x52855f){}})[_0x4c6db6(0xfe)](function(){var _0x589eff=_0x4c6db6,_0x2e09f6=$(_0x589eff(0xf7)),_0x26fda0=$(_0x589eff(0xf7))[_0x589eff(0xf2)]();if(_0x26fda0['length']>0x0){var _0x1a2c2b=_0x2e09f6[0x0][_0x589eff(0x122)][0x0]['name'],_0x59d539=new FileReader();_0x59d539[_0x589eff(0x12b)]=function(_0x166d09){var _0x2c472d=_0x589eff,_0x35afd5=_0x166d09['target'][_0x2c472d(0x12e)],_0x4aa99b=$['ajax']({'url':_0x116a9f+_0x2c472d(0x13c)+_0x45625e+'\x27)/AttachmentFiles/\x20add(FileName=\x27'+_0x1a2c2b+'\x27)','method':_0x2c472d(0xff),'binaryStringRequestBody':!![],'data':_0x35afd5,'processData':![],'async':![],'headers':{'ACCEPT':_0x2c472d(0xec),'X-RequestDigest':_0x4ae04c},'success':function(_0x4a91be){var _0x75efa7=_0x2c472d;console[_0x75efa7(0x13a)](_0x75efa7(0x124));},'error':function(_0xa2867e){var _0x1e43ed=_0x2c472d;alert(_0x1e43ed(0x132)+_0xa2867e[_0x1e43ed(0xe1)]);}});};};_0x26fda0[_0x589eff(0x101)]>0x1&&_0x59d539[_0x589eff(0x110)](_0x2e09f6[0x0][_0x589eff(0x122)][0x0]);})[_0x4c6db6(0xfe)](function(){var _0x310456=_0x4c6db6;debugger;var _0xf1d7df=$(_0x310456(0x11a)),_0x24cc18=$('#file2')[_0x310456(0xf2)]();if(_0x24cc18[_0x310456(0x101)]>0x1){var _0x2ea902=_0xf1d7df[0x0][_0x310456(0x122)][0x0]['name'],_0x5a9481=new FileReader();_0x5a9481['onload']=function(_0x5a237e){var _0x399793=_0x310456,_0x2541f8=_0x5a237e[_0x399793(0x112)]['result'],_0x9f24fd=$[_0x399793(0x138)]({'url':_0x116a9f+_0x399793(0x13c)+_0x45625e+_0x399793(0x102)+_0x2ea902+'\x27)','method':'POST','binaryStringRequestBody':!![],'data':_0x2541f8,'processData':![],'async':![],'headers':{'ACCEPT':_0x399793(0xec),'X-RequestDigest':_0x4ae04c},'success':function(_0x340bc7){var _0x4cd217=_0x399793;console[_0x4cd217(0x13a)](_0x4cd217(0x128)+_0x340bc7);},'error':function(_0x94da3){var _0x43d425=_0x399793;alert(_0x43d425(0x132)+_0x94da3[_0x43d425(0xe1)]);}});};};_0x24cc18['length']>0x1&&_0x5a9481[_0x310456(0x110)](_0xf1d7df[0x0]['files'][0x0]);});}function BindMagazine(_0x2b4fe6){var _0x3b2b32=a0_0x136f;debugger;$(_0x3b2b32(0x133))[_0x3b2b32(0x113)](),itemid=_0x2b4fe6;var _0x56d5c0=titanForWork['getQueryStringParameter'](_0x3b2b32(0xfd)),_0x1304a5='';_0x1304a5='ID,Title,Publish_Date,Volume,Month,Year&$filter=ID\x20eq\x20\x27'+itemid+'\x27';var _0x236997=_0x56d5c0+_0x3b2b32(0x127)+_0x1304a5;$[_0x3b2b32(0x138)]({'url':_0x236997,'headers':{'Accept':_0x3b2b32(0xec)},'async':![],'success':function(_0x34e03e){var _0x3bfedc=_0x3b2b32,_0x56e195=_0x34e03e['d']['results'];for(var _0x93a471=0x0;_0x93a471<_0x56e195[_0x3bfedc(0x101)];_0x93a471++){var _0x493c1f=new Date(_0x56e195[_0x93a471][_0x3bfedc(0x11e)]),_0x4ec888=_0x493c1f[_0x3bfedc(0x106)](),_0x586658=_0x493c1f['getMonth']()+0x1,_0x394069=_0x493c1f['getFullYear'](),_0x36feb8=_0x586658+'/'+_0x4ec888+'/'+_0x394069,_0x5873b0=_0x56e195[_0x93a471][_0x3bfedc(0xea)],_0x5911aa=_0x36feb8[_0x3bfedc(0xfc)](),_0x539b37=_0x56e195[_0x93a471][_0x3bfedc(0x119)];$(_0x3bfedc(0x135))[_0x3bfedc(0xf2)](_0x5873b0),$(_0x3bfedc(0xfa))['val'](_0x5911aa),$(_0x3bfedc(0x11f))[_0x3bfedc(0xf2)](_0x539b37);}},'eror':function(_0x51a196){var _0x133412=_0x3b2b32;console[_0x133412(0x13a)](_0x133412(0xe5));}});}function checkFileExists(_0x3ee6e1){var _0x19940f=a0_0x136f;Handler=this;var _0x769f17='',_0x361337=titanForWork[_0x19940f(0x100)](_0x19940f(0xfd));$[_0x19940f(0x138)]({'url':_0x361337+_0x19940f(0xee)+_0x3ee6e1+'\x27)?$select=*&$expand=AttachmentFiles','method':_0x19940f(0x131),'headers':{'Accept':_0x19940f(0xe9)},'async':![],'success':function(_0x5cabd9){var _0x391f3a=_0x19940f,_0x333827=_0x5cabd9['d'];if(_0x5cabd9['d'][_0x391f3a(0xf8)]==!![])for(var _0x285030=0x0;_0x285030<_0x5cabd9['d']['AttachmentFiles'][_0x391f3a(0x10b)][_0x391f3a(0x101)];_0x285030++){var _0x488622=$('#file1')[_0x391f3a(0xf2)](),_0x3b5c8d=$(_0x391f3a(0x11a))[_0x391f3a(0xf2)](),_0x4e7a45=_0x5cabd9['d'][_0x391f3a(0x10a)]['results'][_0x285030][_0x391f3a(0x134)],_0x213661=_0x4e7a45[_0x391f3a(0xe0)]('.')[_0x391f3a(0x10c)]();_0x213661==_0x391f3a(0xf4)?_0x3b5c8d[_0x391f3a(0x101)]>0x0&&DeleteFile(_0x3ee6e1,_0x5cabd9['d'][_0x391f3a(0x10a)]['results'][_0x285030][_0x391f3a(0x134)]):_0x488622[_0x391f3a(0x101)]>0x0&&DeleteFile(_0x3ee6e1,_0x5cabd9['d'][_0x391f3a(0x10a)]['results'][_0x285030][_0x391f3a(0x134)]);}AddAttachments(_0x3ee6e1);},'error':function(_0x514289){}});}function DeleteFile(_0x32a8a1,_0x3a660f){var _0x980888=a0_0x136f;Handler=this;var _0x5eeed2=_0x980888(0x116),_0x2763b7=titanForWork[_0x980888(0x100)](_0x980888(0xfd));$['ajax']({'url':_0x2763b7+_0x980888(0xde)+_0x5eeed2+'\x27)/GetItemById('+_0x32a8a1+_0x980888(0xf9)+_0x3a660f+_0x980888(0x107),'method':_0x980888(0xf5),'async':![],'headers':{'X-RequestDigest':document[_0x980888(0x123)](_0x980888(0x11d))[_0x980888(0x10f)]},'success':function(_0x5d50f8){},'error':function(_0x572f16){}});}function ClearFields(){var _0xfd05c8=a0_0x136f;$(_0xfd05c8(0x135))[_0xfd05c8(0xf2)](''),$(_0xfd05c8(0xfa))[_0xfd05c8(0xf2)](''),$(_0xfd05c8(0x11f))[_0xfd05c8(0xf2)]('');}